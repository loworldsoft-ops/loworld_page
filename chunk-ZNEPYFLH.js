import{a as re,b as oe,c as ie,d as ne,e as ae,f as ue,g as se}from"./chunk-FGDHLTWM.js";import{a as Fe}from"./chunk-YEEPMWEI.js";import{a as Ie,b as Oe}from"./chunk-FZNFOUMC.js";import{a as ee,b as te}from"./chunk-426V4S74.js";import{a as W,b as X}from"./chunk-CR77YJOL.js";import{b as U,c as V,f as K,i as G,l as H,o as Y,p as J,q as Z,r as Q}from"./chunk-AZPA42WD.js";import{ma as pe,oa as z,ra as $}from"./chunk-HHNYRRMJ.js";import{F as y,H as l,K as R,L as k,P as F,U as I,W as O,ca as T,e as j,ea as L,ga as ke,ia as C,ja as N,la as q,p as D,y as Re}from"./chunk-KLYCXVJS.js";import{Ec as w,H as De,Tb as s,Ub as n,Vb as i,Wb as d,_ as E,_b as _e,a as v,b as B,cc as h,dc as A,fa as x,fb as u,h as _,ja as f,k as P,kb as c,l as je,p as fe,pa as he,q as le,qa as ve,rb as M,sc as a,tc as b,u as ce,uc as ye,xb as p}from"./chunk-7GZKVAVG.js";var g=class r{constructor(e,t){this.http=e;this.router=t;this.initializeAuth()}API_URL=`${Fe.baseSyncUrl}/auth`;TOKEN_KEY="project_auth_token";REFRESH_TOKEN_KEY="project_refresh_token";USER_KEY="project_user";authStateSubject=new je({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null});authState$=this.authStateSubject.asObservable();refreshTimer;initializeAuth(){let e=localStorage.getItem(this.TOKEN_KEY),t=localStorage.getItem(this.REFRESH_TOKEN_KEY),o=localStorage.getItem(this.USER_KEY);if(e&&t&&o)try{let m=JSON.parse(o);this.updateAuthState({user:m,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1,error:null}),this.startTokenRefreshTimer()}catch{this.clearAuthData()}}login(e){if(this.updateAuthState(B(v({},this.authStateSubject.value),{isLoading:!0,error:null})),e.username==="admin"&&e.password==="9902"){let t={user:{id:"admin-001",username:"admin",email:"admin@loworld.com",fullName:"\uAD00\uB9AC\uC790",role:"admin",isActive:!0,createdAt:new Date,lastLoginAt:new Date},token:"mock-jwt-token-"+Date.now(),refreshToken:"mock-refresh-token-"+Date.now(),expiresIn:3600};return this.setAuthData(t),this.startTokenRefreshTimer(),this.updateAuthState(B(v({},this.authStateSubject.value),{isLoading:!1,error:null})),new _(o=>{o.next(t),o.complete()})}else{let t={code:"INVALID_CREDENTIALS",message:"\uC0AC\uC6A9\uC790\uBA85 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."};return this.updateAuthState(B(v({},this.authStateSubject.value),{isLoading:!1,error:t.message})),le(t)}}register(e){this.updateAuthState(B(v({},this.authStateSubject.value),{isLoading:!0,error:null}));let t={user:{id:"user-"+Date.now(),username:e.username,email:e.email,fullName:e.fullName,role:"member",isActive:!0,createdAt:new Date,lastLoginAt:new Date},token:"mock-jwt-token-"+Date.now(),refreshToken:"mock-refresh-token-"+Date.now(),expiresIn:3600};return this.setAuthData(t),this.startTokenRefreshTimer(),this.updateAuthState(B(v({},this.authStateSubject.value),{isLoading:!1,error:null})),new _(o=>{o.next(t),o.complete()})}logout(){return this.clearAuthData(),new _(e=>{e.next(),e.complete()})}refreshToken(){let e=this.authStateSubject.value.refreshToken,t=this.authStateSubject.value.user;if(!e||!t)return this.clearAuthData(),le("No refresh token available");let o={user:t,token:"mock-jwt-token-"+Date.now(),refreshToken:"mock-refresh-token-"+Date.now(),expiresIn:3600};return this.setAuthData(o),this.startTokenRefreshTimer(),new _(m=>{m.next(o),m.complete()})}requestPasswordReset(e){return new _(t=>{setTimeout(()=>{t.next(),t.complete()},500)})}confirmPasswordReset(e){return new _(t=>{setTimeout(()=>{t.next(),t.complete()},500)})}changePassword(e){return new _(t=>{setTimeout(()=>{t.next(),t.complete()},500)})}getCurrentUser(){let e=this.authStateSubject.value.user;return e?new _(t=>{t.next(e),t.complete()}):le("No user found")}isAuthenticated(){return this.authStateSubject.value.isAuthenticated}getUser(){return this.authStateSubject.value.user}getToken(){return this.authStateSubject.value.token}setAuthData(e){localStorage.setItem(this.TOKEN_KEY,e.token),localStorage.setItem(this.REFRESH_TOKEN_KEY,e.refreshToken),localStorage.setItem(this.USER_KEY,JSON.stringify(e.user)),this.updateAuthState({user:e.user,token:e.token,refreshToken:e.refreshToken,isAuthenticated:!0,isLoading:!1,error:null})}clearAuthData(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.USER_KEY),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),this.updateAuthState({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null}),this.router.navigate(["/project/auth/login"])}updateAuthState(e){this.authStateSubject.next(v(v({},this.authStateSubject.value),e))}startTokenRefreshTimer(){this.refreshTimer&&clearTimeout(this.refreshTimer);let e=45*60*1e3;this.refreshTimer=setTimeout(()=>{this.refreshToken().subscribe({error:()=>this.clearAuthData()})},e)}handleAuthError(e){let t;return e.error instanceof ErrorEvent?t={code:"CLIENT_ERROR",message:"\uB124\uD2B8\uC6CC\uD06C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",details:e.error.message}:t={code:e.error?.code||"SERVER_ERROR",message:e.error?.message||"\uC11C\uBC84 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",details:e.error},this.updateAuthState(B(v({},this.authStateSubject.value),{isLoading:!1,error:t.message})),le(t)}static \u0275fac=function(t){return new(t||r)(f(Re),f(C))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})};var Te=class r{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){return this.checkAuth(t.url)}canActivateChild(e,t){return this.checkAuth(t.url)}checkAuth(e){return this.authService.authState$.pipe(ce(t=>t.isAuthenticated?!0:(this.router.navigate(["/project/auth/login"],{queryParams:{returnUrl:e}}),!1)),De(()=>(this.router.navigate(["/project/auth/login"],{queryParams:{returnUrl:e}}),fe(!1))))}static \u0275fac=function(t){return new(t||r)(f(g),f(C))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})},Le=class r{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){return this.authService.authState$.pipe(ce(o=>o.isAuthenticated?(this.router.navigate(["/project"]),!1):!0))}static \u0275fac=function(t){return new(t||r)(f(g),f(C))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})},Ne=class r{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){let o=e.data.roles;return!o||o.length===0?fe(!0):this.authService.authState$.pipe(ce(m=>!m.isAuthenticated||!m.user?(this.router.navigate(["/project/auth/login"]),!1):o.includes(m.user.role)?!0:(this.router.navigate(["/project/access-denied"]),!1)))}static \u0275fac=function(t){return new(t||r)(f(g),f(C))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})};var Xe=()=>["/project/auth/forgot-password"],et=()=>["/project/auth/register"];function tt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC0AC\uC6A9\uC790\uBA85\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function rt(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function ot(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638\uB294 \uCD5C\uC18C 4\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4 "),i())}function it(r,e){r&1&&d(0,"mat-spinner",21)}function nt(r,e){r&1&&(n(0,"span"),a(1,"\uB85C\uADF8\uC778"),i())}var qe=class r{constructor(e,t,o,m,S){this.fb=e;this.authService=t;this.router=o;this.route=m;this.snackBar=S;this.loginForm=this.fb.group({username:["admin",[l.required]],password:["9902",[l.required,l.minLength(4)]],rememberMe:[!1]})}loginForm;hidePassword=!0;isLoading=!1;returnUrl="/project";destroy$=new P;ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/project",this.authService.authState$.pipe(E(this.destroy$)).subscribe(e=>{this.isLoading=e.isLoading,e.isAuthenticated&&this.router.navigate([this.returnUrl]),e.error&&this.showError(e.error)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){if(this.loginForm.valid){let e={username:this.loginForm.value.username,password:this.loginForm.value.password,rememberMe:this.loginForm.value.rememberMe};this.authService.login(e).subscribe({next:()=>{this.showSuccess("\uB85C\uADF8\uC778\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")},error:t=>{console.error("Login error:",t),this.showError(t.message||"\uB85C\uADF8\uC778\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}}showSuccess(e){this.snackBar.open(e,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}showError(e){this.snackBar.open(e,"\uB2EB\uAE30",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||r)(c(T),c(g),c(C),c(ke),c(ee))};static \u0275cmp=M({type:r,selectors:[["app-project-login"]],decls:45,vars:13,consts:[[1,"login-container"],[1,"login-card-wrapper"],[1,"login-card"],[1,"header-content"],[1,"logo"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","\uC0AC\uC6A9\uC790\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"form-options"],["formControlName","rememberMe"],[1,"forgot-password-link",3,"routerLink"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20",4,"ngIf"],[1,"card-actions"],[1,"register-section"],[1,"register-link",3,"routerLink"],["diameter","20"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"div",3)(5,"div",4)(6,"mat-icon"),a(7,"business"),i()(),n(8,"mat-card-title"),a(9,"\uD504\uB85C\uC81D\uD2B8 \uAD00\uB9AC"),i(),n(10,"mat-card-subtitle"),a(11,"\uB85C\uADF8\uC778\uD558\uC5EC \uD504\uB85C\uC81D\uD2B8\uB97C \uAD00\uB9AC\uD558\uC138\uC694"),i()()(),n(12,"mat-card-content")(13,"form",5),h("ngSubmit",function(){return o.onSubmit()}),n(14,"mat-form-field",6)(15,"mat-label"),a(16,"\uC0AC\uC6A9\uC790\uBA85"),i(),d(17,"input",7),n(18,"mat-icon",8),a(19,"person"),i(),p(20,tt,2,0,"mat-error",9),i(),n(21,"mat-form-field",6)(22,"mat-label"),a(23,"\uBE44\uBC00\uBC88\uD638"),i(),d(24,"input",10),n(25,"button",11),h("click",function(){return o.hidePassword=!o.hidePassword}),n(26,"mat-icon"),a(27),i()(),p(28,rt,2,0,"mat-error",9)(29,ot,2,0,"mat-error",9),i(),n(30,"div",12)(31,"mat-checkbox",13),a(32," \uB85C\uADF8\uC778 \uC0C1\uD0DC \uC720\uC9C0 "),i(),n(33,"a",14),a(34," \uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694? "),i()(),n(35,"div",15)(36,"button",16),p(37,it,1,0,"mat-spinner",17)(38,nt,2,0,"span",9),i()()()(),n(39,"mat-card-actions",18)(40,"div",19)(41,"span"),a(42,"\uACC4\uC815\uC774 \uC5C6\uC73C\uC2E0\uAC00\uC694?"),i(),n(43,"a",20),a(44," \uD68C\uC6D0\uAC00\uC785 "),i()()()()()()),t&2){let m,S,me;u(13),s("formGroup",o.loginForm),u(7),s("ngIf",(m=o.loginForm.get("username"))==null?null:m.hasError("required")),u(4),s("type",o.hidePassword?"password":"text"),u(3),b(o.hidePassword?"visibility_off":"visibility"),u(),s("ngIf",(S=o.loginForm.get("password"))==null?null:S.hasError("required")),u(),s("ngIf",(me=o.loginForm.get("password"))==null?null:me.hasError("minlength")),u(4),s("routerLink",w(11,Xe)),u(3),s("disabled",o.loginForm.invalid||o.isLoading),u(),s("ngIf",o.isLoading),u(),s("ngIf",!o.isLoading),u(5),s("routerLink",w(12,et))}},dependencies:[D,j,L,F,y,R,k,I,O,q,N,se,re,ae,ie,ue,ne,oe,H,G,U,V,K,J,Y,$,z,pe,Oe,Ie,Q,Z,X,W,te],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--project-primary),var(--project-accent));padding:2rem}.login-card-wrapper[_ngcontent-%COMP%]{width:100%;max-width:400px}.login-card[_ngcontent-%COMP%]{padding:2rem;border-radius:16px;box-shadow:0 8px 32px #0000001a;background:var(--project-bg-primary)}.header-content[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--project-primary),var(--project-accent));margin-bottom:1rem}.logo[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;color:#fff}mat-card-title[_ngcontent-%COMP%]{color:var(--project-text-primary);font-weight:600;margin-bottom:.5rem}mat-card-subtitle[_ngcontent-%COMP%]{color:var(--project-text-secondary);font-size:14px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.forgot-password-link[_ngcontent-%COMP%]{color:var(--project-primary);text-decoration:none;font-size:14px;transition:color .3s ease}.forgot-password-link[_ngcontent-%COMP%]:hover{color:var(--project-accent);text-decoration:underline}.form-actions[_ngcontent-%COMP%]{margin-bottom:1rem}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500;border-radius:8px}.card-actions[_ngcontent-%COMP%]{padding:0;justify-content:center}.register-section[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:var(--project-text-secondary)}.register-link[_ngcontent-%COMP%]{color:var(--project-primary);text-decoration:none;font-weight:500;margin-left:.5rem;transition:color .3s ease}.register-link[_ngcontent-%COMP%]:hover{color:var(--project-accent);text-decoration:underline}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-card[_ngcontent-%COMP%]{padding:1.5rem}.form-options[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})};var at=()=>["/project/auth/login"];function ut(r,e){r&1&&(n(0,"mat-error"),a(1," \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function st(r,e){r&1&&(n(0,"mat-error"),a(1," \uC774\uB984\uC740 \uCD5C\uC18C 2\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4 "),i())}function mt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC0AC\uC6A9\uC790\uBA85\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function lt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC0AC\uC6A9\uC790\uBA85\uC740 \uCD5C\uC18C 3\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4 "),i())}function ct(r,e){r&1&&(n(0,"mat-error"),a(1," \uC0AC\uC6A9\uC790\uBA85\uC740 \uC601\uBB38, \uC22B\uC790, \uC5B8\uB354\uC2A4\uCF54\uC5B4\uB9CC \uC0AC\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4 "),i())}function pt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC774\uBA54\uC77C\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function dt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC62C\uBC14\uB978 \uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function Ct(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function gt(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638\uB294 \uCD5C\uC18C 8\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4 "),i())}function ft(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638\uB294 \uC601\uBB38, \uC22B\uC790, \uD2B9\uC218\uBB38\uC790\uB97C \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4 "),i())}function ht(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638 \uD655\uC778\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function vt(r,e){r&1&&(n(0,"mat-error"),a(1," \uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4 "),i())}function _t(r,e){r&1&&d(0,"mat-spinner",21)}function St(r,e){r&1&&(n(0,"span"),a(1,"\uD68C\uC6D0\uAC00\uC785"),i())}var Qe=class r{constructor(e,t,o,m){this.fb=e;this.authService=t;this.router=o;this.snackBar=m;this.registerForm=this.fb.group({fullName:["",[l.required,l.minLength(2)]],username:["",[l.required,l.minLength(3),l.pattern(/^[a-zA-Z0-9_]+$/)]],email:["",[l.required,l.email]],password:["",[l.required,l.minLength(8),l.pattern(/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/)]],confirmPassword:["",[l.required]]},{validators:this.passwordMatchValidator})}registerForm;hidePassword=!0;hideConfirmPassword=!0;isLoading=!1;destroy$=new P;ngOnInit(){this.authService.authState$.pipe(E(this.destroy$)).subscribe(e=>{this.isLoading=e.isLoading,e.isAuthenticated&&this.router.navigate(["/project"]),e.error&&this.showError(e.error)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){if(this.registerForm.valid){let e={fullName:this.registerForm.value.fullName,username:this.registerForm.value.username,email:this.registerForm.value.email,password:this.registerForm.value.password,confirmPassword:this.registerForm.value.confirmPassword};this.authService.register(e).subscribe({next:()=>{this.showSuccess("\uD68C\uC6D0\uAC00\uC785\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")},error:t=>{console.error("Register error:",t),this.showError(t.message||"\uD68C\uC6D0\uAC00\uC785\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}}passwordMatchValidator(e){let t=e.get("password"),o=e.get("confirmPassword");if(!t||!o)return null;if(t.value!==o.value)return o.setErrors({mismatch:!0}),{mismatch:!0};{let m=o.errors;return m&&(delete m.mismatch,Object.keys(m).length===0&&o.setErrors(null)),null}}showSuccess(e){this.snackBar.open(e,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}showError(e){this.snackBar.open(e,"\uB2EB\uAE30",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||r)(c(T),c(g),c(C),c(ee))};static \u0275cmp=M({type:r,selectors:[["app-project-register"]],decls:68,vars:22,consts:[[1,"register-container"],[1,"register-card-wrapper"],[1,"register-card"],[1,"header-content"],[1,"logo"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","fullName","placeholder","\uC804\uCCB4 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","name"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","username","placeholder","\uC0AC\uC6A9\uC790\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","username"],["matInput","","type","email","formControlName","email","placeholder","\uC774\uBA54\uC77C\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","email"],["matInput","","formControlName","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","new-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uB2E4\uC2DC \uC785\uB825\uD558\uC138\uC694","autocomplete","new-password",3,"type"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"register-button",3,"disabled"],["diameter","20",4,"ngIf"],[1,"card-actions"],[1,"login-section"],[1,"login-link",3,"routerLink"],["diameter","20"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"div",3)(5,"div",4)(6,"mat-icon"),a(7,"business"),i()(),n(8,"mat-card-title"),a(9,"\uACC4\uC815 \uC0DD\uC131"),i(),n(10,"mat-card-subtitle"),a(11,"\uD504\uB85C\uC81D\uD2B8 \uAD00\uB9AC \uC2DC\uC2A4\uD15C\uC5D0 \uAC00\uC785\uD558\uC138\uC694"),i()()(),n(12,"mat-card-content")(13,"form",5),h("ngSubmit",function(){return o.onSubmit()}),n(14,"mat-form-field",6)(15,"mat-label"),a(16,"\uC774\uB984"),i(),d(17,"input",7),n(18,"mat-icon",8),a(19,"person"),i(),p(20,ut,2,0,"mat-error",9)(21,st,2,0,"mat-error",9),i(),n(22,"mat-form-field",6)(23,"mat-label"),a(24,"\uC0AC\uC6A9\uC790\uBA85"),i(),d(25,"input",10),n(26,"mat-icon",8),a(27,"account_circle"),i(),p(28,mt,2,0,"mat-error",9)(29,lt,2,0,"mat-error",9)(30,ct,2,0,"mat-error",9),i(),n(31,"mat-form-field",6)(32,"mat-label"),a(33,"\uC774\uBA54\uC77C"),i(),d(34,"input",11),n(35,"mat-icon",8),a(36,"email"),i(),p(37,pt,2,0,"mat-error",9)(38,dt,2,0,"mat-error",9),i(),n(39,"mat-form-field",6)(40,"mat-label"),a(41,"\uBE44\uBC00\uBC88\uD638"),i(),d(42,"input",12),n(43,"button",13),h("click",function(){return o.hidePassword=!o.hidePassword}),n(44,"mat-icon"),a(45),i()(),p(46,Ct,2,0,"mat-error",9)(47,gt,2,0,"mat-error",9)(48,ft,2,0,"mat-error",9),i(),n(49,"mat-form-field",6)(50,"mat-label"),a(51,"\uBE44\uBC00\uBC88\uD638 \uD655\uC778"),i(),d(52,"input",14),n(53,"button",13),h("click",function(){return o.hideConfirmPassword=!o.hideConfirmPassword}),n(54,"mat-icon"),a(55),i()(),p(56,ht,2,0,"mat-error",9)(57,vt,2,0,"mat-error",9),i(),n(58,"div",15)(59,"button",16),p(60,_t,1,0,"mat-spinner",17)(61,St,2,0,"span",9),i()()()(),n(62,"mat-card-actions",18)(63,"div",19)(64,"span"),a(65,"\uC774\uBBF8 \uACC4\uC815\uC774 \uC788\uC73C\uC2E0\uAC00\uC694?"),i(),n(66,"a",20),a(67," \uB85C\uADF8\uC778 "),i()()()()()()),t&2){let m,S,me,Se,Be,be,we,Pe,Ee,xe,Me,Ae;u(13),s("formGroup",o.registerForm),u(7),s("ngIf",(m=o.registerForm.get("fullName"))==null?null:m.hasError("required")),u(),s("ngIf",(S=o.registerForm.get("fullName"))==null?null:S.hasError("minlength")),u(7),s("ngIf",(me=o.registerForm.get("username"))==null?null:me.hasError("required")),u(),s("ngIf",(Se=o.registerForm.get("username"))==null?null:Se.hasError("minlength")),u(),s("ngIf",(Be=o.registerForm.get("username"))==null?null:Be.hasError("pattern")),u(7),s("ngIf",(be=o.registerForm.get("email"))==null?null:be.hasError("required")),u(),s("ngIf",(we=o.registerForm.get("email"))==null?null:we.hasError("email")),u(4),s("type",o.hidePassword?"password":"text"),u(3),b(o.hidePassword?"visibility_off":"visibility"),u(),s("ngIf",(Pe=o.registerForm.get("password"))==null?null:Pe.hasError("required")),u(),s("ngIf",(Ee=o.registerForm.get("password"))==null?null:Ee.hasError("minlength")),u(),s("ngIf",(xe=o.registerForm.get("password"))==null?null:xe.hasError("pattern")),u(4),s("type",o.hideConfirmPassword?"password":"text"),u(3),b(o.hideConfirmPassword?"visibility_off":"visibility"),u(),s("ngIf",(Me=o.registerForm.get("confirmPassword"))==null?null:Me.hasError("required")),u(),s("ngIf",(Ae=o.registerForm.get("confirmPassword"))==null?null:Ae.hasError("mismatch")),u(2),s("disabled",o.registerForm.invalid||o.isLoading),u(),s("ngIf",o.isLoading),u(),s("ngIf",!o.isLoading),u(5),s("routerLink",w(21,at))}},dependencies:[D,j,L,F,y,R,k,I,O,q,N,se,re,ae,ie,ue,ne,oe,H,G,U,V,K,J,Y,$,z,pe,Q,Z,X,W,te],styles:[".register-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--project-primary),var(--project-accent));padding:2rem}.register-card-wrapper[_ngcontent-%COMP%]{width:100%;max-width:450px}.register-card[_ngcontent-%COMP%]{padding:2rem;border-radius:16px;box-shadow:0 8px 32px #0000001a;background:var(--project-bg-primary)}.header-content[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--project-primary),var(--project-accent));margin-bottom:1rem}.logo[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;color:#fff}mat-card-title[_ngcontent-%COMP%]{color:var(--project-text-primary);font-weight:600;margin-bottom:.5rem}mat-card-subtitle[_ngcontent-%COMP%]{color:var(--project-text-secondary);font-size:14px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.form-actions[_ngcontent-%COMP%]{margin-bottom:1rem}.register-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500;border-radius:8px}.card-actions[_ngcontent-%COMP%]{padding:0;justify-content:center}.login-section[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:var(--project-text-secondary)}.login-link[_ngcontent-%COMP%]{color:var(--project-primary);text-decoration:none;font-weight:500;margin-left:.5rem;transition:color .3s ease}.login-link[_ngcontent-%COMP%]:hover{color:var(--project-accent);text-decoration:underline}@media (max-width: 480px){.register-container[_ngcontent-%COMP%]{padding:1rem}.register-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var Bt=()=>["/project/auth/login"];function bt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC774\uBA54\uC77C\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function wt(r,e){r&1&&(n(0,"mat-error"),a(1," \uC62C\uBC14\uB978 \uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function Pt(r,e){r&1&&d(0,"mat-spinner",18)}function Et(r,e){r&1&&(n(0,"span"),a(1,"\uC7AC\uC124\uC815 \uB9C1\uD06C \uC804\uC1A1"),i())}function xt(r,e){if(r&1){let t=_e();n(0,"form",10),h("ngSubmit",function(){he(t);let m=A();return ve(m.onSubmit())}),n(1,"mat-form-field",11)(2,"mat-label"),a(3,"\uC774\uBA54\uC77C"),i(),d(4,"input",12),n(5,"mat-icon",13),a(6,"email"),i(),p(7,bt,2,0,"mat-error",14)(8,wt,2,0,"mat-error",14),i(),n(9,"div",15)(10,"button",16),p(11,Pt,1,0,"mat-spinner",17)(12,Et,2,0,"span",14),i()()()}if(r&2){let t,o,m=A();s("formGroup",m.forgotPasswordForm),u(7),s("ngIf",(t=m.forgotPasswordForm.get("email"))==null?null:t.hasError("required")),u(),s("ngIf",(o=m.forgotPasswordForm.get("email"))==null?null:o.hasError("email")),u(2),s("disabled",m.forgotPasswordForm.invalid||m.isLoading),u(),s("ngIf",m.isLoading),u(),s("ngIf",!m.isLoading)}}function Mt(r,e){r&1&&(n(0,"span"),a(1,"\uB2E4\uC2DC \uC804\uC1A1"),i())}function At(r,e){if(r&1&&(n(0,"span"),a(1),i()),r&2){let t=A(2);u(),ye("",t.resendCooldown,"\uCD08 \uD6C4 \uC7AC\uC804\uC1A1 \uAC00\uB2A5")}}function jt(r,e){if(r&1){let t=_e();n(0,"div",19)(1,"mat-icon",20),a(2,"mark_email_read"),i(),n(3,"h3"),a(4,"\uC774\uBA54\uC77C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694"),i(),n(5,"p")(6,"strong"),a(7),i(),a(8,"\uB85C \uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815 \uB9C1\uD06C\uB97C \uBCF4\uB0B4\uB4DC\uB838\uC2B5\uB2C8\uB2E4. \uC774\uBA54\uC77C\uC744 \uD655\uC778\uD558\uC2DC\uACE0 \uB9C1\uD06C\uB97C \uD074\uB9AD\uD558\uC5EC \uBE44\uBC00\uBC88\uD638\uB97C \uC7AC\uC124\uC815\uD574\uC8FC\uC138\uC694. "),i(),n(9,"p",21),a(10," \uC774\uBA54\uC77C\uC774 \uB3C4\uCC29\uD558\uC9C0 \uC54A\uC558\uB2E4\uBA74 \uC2A4\uD338 \uD3F4\uB354\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694. "),i(),n(11,"button",22),h("click",function(){he(t);let m=A();return ve(m.resendEmail())}),p(12,Mt,2,0,"span",14)(13,At,2,1,"span",14),i()()}if(r&2){let t=A();u(7),b(t.sentEmail),u(4),s("disabled",t.resendCooldown>0),u(),s("ngIf",t.resendCooldown===0),u(),s("ngIf",t.resendCooldown>0)}}var We=class r{constructor(e,t,o,m){this.fb=e;this.authService=t;this.router=o;this.snackBar=m;this.forgotPasswordForm=this.fb.group({email:["",[l.required,l.email]]})}forgotPasswordForm;isLoading=!1;emailSent=!1;sentEmail="";resendCooldown=0;destroy$=new P;cooldownTimer;ngOnInit(){this.authService.authState$.pipe(E(this.destroy$)).subscribe(e=>{this.isLoading=e.isLoading,e.error&&this.showError(e.error)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.cooldownTimer&&clearInterval(this.cooldownTimer)}onSubmit(){if(this.forgotPasswordForm.valid){let e=this.forgotPasswordForm.value.email,t={email:e};this.authService.requestPasswordReset(t).subscribe({next:()=>{this.sentEmail=e,this.emailSent=!0,this.showSuccess("\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815 \uC774\uBA54\uC77C\uC744 \uC804\uC1A1\uD588\uC2B5\uB2C8\uB2E4."),this.startResendCooldown()},error:o=>{console.error("Password reset error:",o),this.showError(o.message||"\uC774\uBA54\uC77C \uC804\uC1A1\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}}resendEmail(){this.resendCooldown===0&&this.onSubmit()}startResendCooldown(){this.resendCooldown=60,this.cooldownTimer=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&clearInterval(this.cooldownTimer)},1e3)}showSuccess(e){this.snackBar.open(e,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}showError(e){this.snackBar.open(e,"\uB2EB\uAE30",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||r)(c(T),c(g),c(C),c(ee))};static \u0275cmp=M({type:r,selectors:[["app-project-forgot-password"]],decls:21,vars:4,consts:[[1,"forgot-password-container"],[1,"forgot-password-card-wrapper"],[1,"forgot-password-card"],[1,"header-content"],[1,"logo"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"card-actions"],[1,"back-section"],[1,"back-link",3,"routerLink"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","\uB4F1\uB85D\uD558\uC2E0 \uC774\uBA54\uC77C\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","email"],["matSuffix",""],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"reset-button",3,"disabled"],["diameter","20",4,"ngIf"],["diameter","20"],[1,"success-message"],[1,"success-icon"],[1,"note"],["mat-raised-button","","color","primary",1,"resend-button",3,"click","disabled"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"div",3)(5,"div",4)(6,"mat-icon"),a(7,"lock_reset"),i()(),n(8,"mat-card-title"),a(9,"\uBE44\uBC00\uBC88\uD638 \uCC3E\uAE30"),i(),n(10,"mat-card-subtitle"),a(11," \uC774\uBA54\uC77C \uC8FC\uC18C\uB97C \uC785\uB825\uD558\uC2DC\uBA74 \uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815 \uB9C1\uD06C\uB97C \uBCF4\uB0B4\uB4DC\uB9BD\uB2C8\uB2E4 "),i()()(),n(12,"mat-card-content"),p(13,xt,13,6,"form",5)(14,jt,14,4,"div",6),i(),n(15,"mat-card-actions",7)(16,"div",8)(17,"a",9)(18,"mat-icon"),a(19,"arrow_back"),i(),a(20," \uB85C\uADF8\uC778\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30 "),i()()()()()()),t&2&&(u(13),s("ngIf",!o.emailSent),u(),s("ngIf",o.emailSent),u(3),s("routerLink",w(3,Bt)))},dependencies:[D,j,L,F,y,R,k,I,O,q,N,se,re,ae,ie,ue,ne,oe,H,G,U,V,K,J,Y,$,z,Q,Z,X,W,te],styles:[".forgot-password-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--project-primary),var(--project-accent));padding:2rem}.forgot-password-card-wrapper[_ngcontent-%COMP%]{width:100%;max-width:450px}.forgot-password-card[_ngcontent-%COMP%]{padding:2rem;border-radius:16px;box-shadow:0 8px 32px #0000001a;background:var(--project-bg-primary)}.header-content[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--project-accent),var(--project-primary));margin-bottom:1rem}.logo[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;color:#fff}mat-card-title[_ngcontent-%COMP%]{color:var(--project-text-primary);font-weight:600;margin-bottom:.5rem}mat-card-subtitle[_ngcontent-%COMP%]{color:var(--project-text-secondary);font-size:14px;line-height:1.4}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.form-actions[_ngcontent-%COMP%]{margin-bottom:1rem}.reset-button[_ngcontent-%COMP%], .resend-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500;border-radius:8px}.success-message[_ngcontent-%COMP%]{text-align:center;padding:1rem 0}.success-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--project-accent);margin-bottom:1rem}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--project-text-primary);margin-bottom:1rem;font-weight:600}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--project-text-secondary);line-height:1.5;margin-bottom:1rem}.success-message[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{font-size:14px;color:var(--project-text-hint);margin-bottom:1.5rem}.card-actions[_ngcontent-%COMP%]{padding:0;justify-content:center}.back-section[_ngcontent-%COMP%]{text-align:center}.back-link[_ngcontent-%COMP%]{color:var(--project-primary);text-decoration:none;font-size:14px;display:inline-flex;align-items:center;gap:.5rem;transition:color .3s ease}.back-link[_ngcontent-%COMP%]:hover{color:var(--project-accent);text-decoration:underline}@media (max-width: 480px){.forgot-password-container[_ngcontent-%COMP%]{padding:1rem}.forgot-password-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};export{g as a,Te as b,Le as c,Ne as d,qe as e,Qe as f,We as g};
