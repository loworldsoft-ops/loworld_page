import{S as xt,T as bt,Z as Ct,c as ht,e as pt,f as mt,o as ft}from"./chunk-ARY6345B.js";import{$b as rt,Kb as N,Lb as v,Mb as P,Nb as dt,Oc as ut,Rb as H,Vb as k,Wb as D,Z as X,Za as V,_ as lt,_b as it,ac as at,cb as ct,fc as Z,g as nt,gc as U,ha as $,ia as L,jb as Q,jc as F,kb as gt,pb as ot,rb as j,xa as K}from"./chunk-WMBKZIN6.js";import{a as et,e as I}from"./chunk-JKOY2XUY.js";var yt=class w{static \u0275fac=function(e){return new(e||w)};static \u0275mod=gt({type:w});static \u0275inj=lt({imports:[ft,Ct]})};var wt=class w{constructor(){}extractTextStreamAsJson(t){return I(this,null,function*(){try{let e={fileName:t.name,fileSize:t.size,pageCount:0,extractionTimestamp:new Date().toISOString(),extractionMethod:"PDF.js + \uD5A5\uC0C1\uB41C \uBD84\uC11D",pages:[],metadata:{totalTextItems:0,totalWords:0,totalCharacters:0,uniqueFonts:[],hasImages:!1,hasVectorGraphics:!1}},n=yield t.arrayBuffer();if(typeof window.pdfjsLib<"u"){let o=window.pdfjsLib;o.VerbosityLevel&&(o.GlobalWorkerOptions.verbosity=0),o.GlobalWorkerOptions.workerSrc||(o.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js");let r=yield o.getDocument({data:n}).promise,a=1;e.pageCount=a;let h=new Set,d=0,x=0,s=0;for(let l=1;l<=Math.min(r.numPages,a);l++){let u=yield r.getPage(l),p=u.getViewport({scale:1}),y=yield u.getTextContent(),O=[];try{O=yield this.extractTextColorsFromOperatorList(u)}catch(c){console.error("\uC0C9\uC0C1 \uCD94\uCD9C \uC911 \uC5D0\uB7EC \uBC1C\uC0DD:",c)}let T=y.items.map((c,C)=>{let f=c.transform,_={id:`page-${l}-item-${C}`,text:c.str,position:{x:Math.round(f[4]*100)/100,y:Math.round((p.height-f[5])*100)/100,width:Math.round(c.width*100)/100,height:Math.round(c.height*100)/100},font:{name:c.fontName||"Unknown",size:Math.round(Math.abs(f[0])*100)/100},transform:f,style:{direction:c.dir||"ltr",hasEndOfLine:c.hasEOL||!1,color:O[C]||"#000000"},analysis:this.analyzeText(c.str)};return c.fontName&&h.add(c.fontName),_}).filter(c=>c.text.trim().length>0),E=this.groupTextIntoSentences(T),b=this.calculatePageStatistics(T),M={pageNumber:l,width:Math.round(p.width),height:Math.round(p.height),textItems:T,sentences:E,statistics:b};e.pages.push(M),d+=T.length,x+=b.wordCount,s+=b.charCount}let m=yield this.checkForVectorGraphics(r),S;if(m)try{S=yield this.extractVectorGraphicsDetails(r)}catch(l){console.warn("\u26A0\uFE0F \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C1\uC138 \uC815\uBCF4 \uCD94\uCD9C \uC2E4\uD328:",l)}return e.metadata={totalTextItems:d,totalWords:x,totalCharacters:s,uniqueFonts:Array.from(h),hasImages:yield this.checkForImages(r),hasVectorGraphics:m,vectorGraphicsDetails:S},console.log("\u2705 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC644\uB8CC"),console.log(`\u{1F4CA} \uD1B5\uACC4: ${d}\uAC1C \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C, ${x}\uAC1C \uB2E8\uC5B4, ${s}\uAC1C \uBB38\uC790`),e}throw new Error("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}catch(e){throw console.error("\u274C \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC624\uB958:",e),e}})}analyzeText(t){let e=t.trim().split(/\s+/).filter(o=>o.length>0).length,n=t.length;return{wordCount:e,charCount:n,containsEnglish:/[a-zA-Z]/.test(t),containsKorean:/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),containsNumbers:/[0-9]/.test(t),containsSpecialChars:/[!@#$%^&*(),.?":{}|<>]/.test(t)}}groupTextIntoSentences(t){let e=[],n={text:"",items:[],x:null,y:null,width:0,height:0};return t.forEach((o,i)=>{if(n.x===null&&(n.x=o.position.x,n.y=o.position.y),n.text+=o.text,n.items.push(o),n.width+=o.position.width,n.height=Math.max(n.height,o.position.height),(o.style.hasEndOfLine||o.text.includes(".")||o.text.includes("!")||o.text.includes("?")||i===t.length-1)&&n.text.trim()){let a=n.text.trim();e.push({id:`sentence-${e.length+1}`,text:a,position:{x:n.x||0,y:n.y||0,width:n.width,height:n.height},itemCount:n.items.length,itemIds:n.items.map(h=>h.id),language:this.detectLanguage(a)}),n={text:"",items:[],x:null,y:null,width:0,height:0}}}),e}detectLanguage(t){let e=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),n=/[a-zA-Z]/.test(t);return e&&n?"mixed":e?"korean":n?"english":"unknown"}calculatePageStatistics(t){let e=t.reduce((r,a)=>r+a.analysis.wordCount,0),n=t.reduce((r,a)=>r+a.analysis.charCount,0),o=t.length>0?t.reduce((r,a)=>r+a.font.size,0)/t.length:0,i={};return t.forEach(r=>{i[r.font.name]=(i[r.font.name]||0)+1}),{totalItems:t.length,wordCount:e,charCount:n,avgFontSize:Math.round(o*100)/100,fontDistribution:i}}checkForImages(t){return I(this,null,function*(){try{for(let e=1;e<=t.numPages;e++){let o=yield(yield t.getPage(e)).getOperatorList({intent:"display"});for(let i=0;i<o.fnArray.length;i++){let r=o.fnArray[i];if(r===window.pdfjsLib.OPS.paintImageXObject||r===window.pdfjsLib.OPS.paintInlineImageXObject)return!0}}}catch(e){console.warn("\uC774\uBBF8\uC9C0 \uD655\uC778 \uC911 \uC624\uB958:",e)}return!1})}checkForVectorGraphics(t){return I(this,null,function*(){try{for(let e=1;e<=t.numPages;e++){let o=yield(yield t.getPage(e)).getOperatorList({intent:"display"});for(let i=0;i<o.fnArray.length;i++){let r=o.fnArray[i];if(r===window.pdfjsLib.OPS.moveTo||r===window.pdfjsLib.OPS.lineTo||r===window.pdfjsLib.OPS.curveTo||r===window.pdfjsLib.OPS.rectangle||r===window.pdfjsLib.OPS.fill||r===window.pdfjsLib.OPS.stroke)return!0}}}catch(e){console.warn("\uBCA1\uD130 \uADF8\uB798\uD53D \uD655\uC778 \uC911 \uC624\uB958:",e)}return!1})}extractVectorGraphicsDetails(t){return I(this,null,function*(){console.log("\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C1\uC138 \uC815\uBCF4 \uCD94\uCD9C \uC2DC\uC791...");let e={totalOperations:0,summary:{totalPaths:0,totalLines:0,totalCurves:0,totalRectangles:0,totalFillOperations:0,totalStrokeOperations:0,totalClipOperations:0},pageDetails:[]};try{for(let n=1;n<=t.numPages;n++){let o=yield t.getPage(n),i=yield o.getOperatorList({intent:"display"}),r={pageNumber:n,operations:[],statistics:{pathCount:0,lineCount:0,curveCount:0,rectangleCount:0,fillCount:0,strokeCount:0,clipCount:0}};for(let h=0;h<i.fnArray.length;h++){let d=i.fnArray[h],x=i.argsArray[h],s=null,m=!1;d===1?(s="moveTo",m=!0,r.statistics.pathCount++,e.summary.totalPaths++):d===2?(s="lineTo",m=!0,r.statistics.lineCount++,e.summary.totalLines++):d>=3&&d<=6?(s="curve",m=!0,r.statistics.curveCount++,e.summary.totalCurves++):d===7?(s="rectangle",m=!0,r.statistics.rectangleCount++,e.summary.totalRectangles++):d===9?(s="closePath",m=!0):d===22?(s="fill",m=!0,r.statistics.fillCount++,e.summary.totalFillOperations++):d===20?(s="stroke",m=!0,r.statistics.strokeCount++,e.summary.totalStrokeOperations++):d===29?(s="clip",m=!0,r.statistics.clipCount++,e.summary.totalClipOperations++):d>=31&&d<=34?(s="matrixTransform",m=!1):d>=10&&d<=12?(s="styleSettings",m=!1):[28,37,42,44,58,59,70,71,91].includes(d)&&(x&&Array.isArray(x)&&x.length>=2&&typeof x[x.length-2]=="number"&&typeof x[x.length-1]=="number"?(s="unknownVectorGraphic",m=!0):(s="unknownOperation",m=!1)),s&&(m||s.includes("Transform")||s.includes("Settings"))&&(r.operations.push({type:s,args:x||[],opCode:d,isVectorGraphic:m,coordinates:this.extractCoordinates(x)}),m&&e.totalOperations++)}r.operations.length>0&&(e.pageDetails.push(r),console.log(`\u{1F4C4} \uD398\uC774\uC9C0 ${n} OperatorList: ${r.operations.length}\uAC1C \uC5F0\uC0B0`)),console.log(`\u{1F3A8} \uD398\uC774\uC9C0 ${n} SVG \uB80C\uB354\uB9C1 \uC911...`);let a=yield this.extractVectorGraphicsFromSVG(o,window.pdfjsLib);e.summary.totalPaths+=a.totalPaths,e.summary.totalLines+=a.totalLines,e.summary.totalCurves+=a.totalCurves}return e}catch(n){throw console.error("\u274C \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C1\uC138 \uC815\uBCF4 \uCD94\uCD9C \uC624\uB958:",n),n}})}extractTextColorsFromOperatorList(t){return I(this,null,function*(){try{let e=yield t.getOperatorList({intent:"display"}),n=e.fnArray,o=e.argsArray,i=window.pdfjsLib;if(!i||!i.OPS)return console.error("pdfjsLib.OPS\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!"),[];let r=i.OPS,a=[],h="#000000",d="DeviceRGB",x=0,s=0;for(let m=0;m<n.length;m++){let S=n[m],l=o[m];if(S===r.setFillColorSpace)d=l[0]?.name||l[0]||"DeviceRGB";else if(S===r.setFillRGBColor){x++;try{let u;if(l instanceof Uint8ClampedArray||l instanceof Uint8Array)u=Array.from(l);else if(Array.isArray(l))u=l;else continue;if(u.length<3)continue;let p=typeof u[0]=="number"?u[0]:parseFloat(u[0]),y=typeof u[1]=="number"?u[1]:parseFloat(u[1]),O=typeof u[2]=="number"?u[2]:parseFloat(u[2]);if(isNaN(p)||isNaN(y)||isNaN(O))continue;let T=p>1?Math.round(p):Math.round(p*255),E=y>1?Math.round(y):Math.round(y*255),b=O>1?Math.round(O):Math.round(O*255);h=`#${T.toString(16).padStart(2,"0")}${E.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}`}catch{}}else if(S===r.setFillGray)try{let u;if(l instanceof Uint8ClampedArray||l instanceof Uint8Array)u=Array.from(l);else if(Array.isArray(l))u=l;else continue;if(u.length<1)continue;let p=typeof u[0]=="number"?u[0]:parseFloat(u[0]);if(isNaN(p))continue;let y=p>1?Math.round(p):Math.round(p*255);h=`#${y.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}`}catch{}else if(S===r.setFillCMYKColor)try{let u;if(l instanceof Uint8ClampedArray||l instanceof Uint8Array)u=Array.from(l);else if(Array.isArray(l))u=l;else continue;if(u.length<4)continue;let p=typeof u[0]=="number"?u[0]:parseFloat(u[0]),y=typeof u[1]=="number"?u[1]:parseFloat(u[1]),O=typeof u[2]=="number"?u[2]:parseFloat(u[2]),T=typeof u[3]=="number"?u[3]:parseFloat(u[3]);if(isNaN(p)||isNaN(y)||isNaN(O)||isNaN(T))continue;let E=Math.max(0,Math.min(255,Math.round(255*(1-p)*(1-T)))),b=Math.max(0,Math.min(255,Math.round(255*(1-y)*(1-T)))),M=Math.max(0,Math.min(255,Math.round(255*(1-O)*(1-T))));h=`#${E.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}${M.toString(16).padStart(2,"0")}`}catch{}else if(S===r.setFillColor)try{if(!Array.isArray(l))continue;if(d==="DeviceRGB"&&l.length>=3){let u=typeof l[0]=="number"?l[0]:parseFloat(l[0]),p=typeof l[1]=="number"?l[1]:parseFloat(l[1]),y=typeof l[2]=="number"?l[2]:parseFloat(l[2]);if(isNaN(u)||isNaN(p)||isNaN(y))continue;let O=Math.max(0,Math.min(255,Math.round(u*255))),T=Math.max(0,Math.min(255,Math.round(p*255))),E=Math.max(0,Math.min(255,Math.round(y*255)));h=`#${O.toString(16).padStart(2,"0")}${T.toString(16).padStart(2,"0")}${E.toString(16).padStart(2,"0")}`}else if(d==="DeviceGray"&&l.length>=1){let u=typeof l[0]=="number"?l[0]:parseFloat(l[0]);if(isNaN(u))continue;let p=Math.max(0,Math.min(255,Math.round(u*255)));h=`#${p.toString(16).padStart(2,"0")}${p.toString(16).padStart(2,"0")}${p.toString(16).padStart(2,"0")}`}else if(d==="DeviceCMYK"&&l.length>=4){let u=typeof l[0]=="number"?l[0]:parseFloat(l[0]),p=typeof l[1]=="number"?l[1]:parseFloat(l[1]),y=typeof l[2]=="number"?l[2]:parseFloat(l[2]),O=typeof l[3]=="number"?l[3]:parseFloat(l[3]);if(isNaN(u)||isNaN(p)||isNaN(y)||isNaN(O))continue;let T=Math.max(0,Math.min(255,Math.round(255*(1-u)*(1-O)))),E=Math.max(0,Math.min(255,Math.round(255*(1-p)*(1-O)))),b=Math.max(0,Math.min(255,Math.round(255*(1-y)*(1-O))));h=`#${T.toString(16).padStart(2,"0")}${E.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}`}}catch{}else(S===r.showText||S===r.showSpacedText||S===r.nextLineShowText)&&(s++,a.push(h))}return a}catch(e){return console.error("\uD14D\uC2A4\uD2B8 \uC0C9\uC0C1 \uCD94\uCD9C \uC2E4\uD328:",e),[]}})}extractColorsFromSVG(t){let e=[],n=[],o={};try{t.querySelectorAll("*").forEach(h=>{let d=h.getAttribute("fill");if(d&&d!=="none"&&d!=="transparent"){let s=this.normalizeSVGColor(d);e.push(s),o[s]=(o[s]||0)+1}let x=h.getAttribute("stroke");if(x&&x!=="none"&&x!=="transparent"){let s=this.normalizeSVGColor(x);n.push(s)}});let r=[...new Set(e)],a=[...new Set(n)];return{fillColors:e,strokeColors:n,uniqueFillColors:r,uniqueStrokeColors:a,colorDistribution:o}}catch(i){return console.error("[SVG_COLOR_ERROR] SVG \uC0C9\uC0C1 \uCD94\uCD9C \uC2E4\uD328:",i),{fillColors:[],strokeColors:[],uniqueFillColors:[],uniqueStrokeColors:[],colorDistribution:{}}}}normalizeSVGColor(t){try{if(/^#[0-9a-fA-F]{6}$/.test(t))return t.toLowerCase();if(/^#[0-9a-fA-F]{3}$/.test(t))return`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`.toLowerCase();let e=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(e){let o=parseInt(e[1]).toString(16).padStart(2,"0"),i=parseInt(e[2]).toString(16).padStart(2,"0"),r=parseInt(e[3]).toString(16).padStart(2,"0");return`#${o}${i}${r}`}let n=t.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*[\d.]+\)/);if(n){let o=parseInt(n[1]).toString(16).padStart(2,"0"),i=parseInt(n[2]).toString(16).padStart(2,"0"),r=parseInt(n[3]).toString(16).padStart(2,"0");return`#${o}${i}${r}`}return console.warn(`[SVG_COLOR] \uC54C \uC218 \uC5C6\uB294 \uC0C9\uC0C1 \uD615\uC2DD: ${t}`),"#000000"}catch(e){return console.error(`[SVG_COLOR] \uC0C9\uC0C1 \uBCC0\uD658 \uC624\uB958: ${t}`,e),"#000000"}}extractTextColorsFromSVG(t){let e=[],n=[];try{t.querySelectorAll("text, tspan").forEach((r,a)=>{let h=r.textContent?.trim()||"",d=r.getAttribute("fill");if(!d||d==="none"){let l=r.parentElement;for(;l&&(!d||d==="none");)d=l.getAttribute("fill"),l=l.parentElement}let x=d&&d!=="none"?this.normalizeSVGColor(d):"#000000",s=parseFloat(r.getAttribute("x")||"0"),m=parseFloat(r.getAttribute("y")||"0"),S=r.getAttribute("transform");if(S){let l=S.match(/translate\(([^,]+),\s*([^)]+)\)/);l&&(s+=parseFloat(l[1]),m+=parseFloat(l[2]))}n.push({x:s,y:m,color:x}),h&&e.push({text:h,color:x,x:s,y:m})});let i=[...new Set(n.map(r=>r.color))];return{textItems:e,colorsByPosition:n}}catch(o){return console.error("[SVG_TEXT_COLOR_ERROR] SVG \uD14D\uC2A4\uD2B8 \uC0C9\uC0C1 \uCD94\uCD9C \uC2E4\uD328:",o),{textItems:[],colorsByPosition:[]}}}downloadJsonData(t){try{let e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json;charset=utf-8;"}),o=document.createElement("a"),i=URL.createObjectURL(n),r=new Date().toISOString().split("T")[0],a=`${t.fileName}_text_stream_${r}.json`;o.setAttribute("href",i),o.setAttribute("download",a),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),console.log(`\u2705 JSON \uD30C\uC77C \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC: ${a}`)}catch(e){throw console.error("\u274C JSON \uD30C\uC77C \uB2E4\uC6B4\uB85C\uB4DC \uC624\uB958:",e),e}}logJsonData(t){console.group("\u{1F4C4} PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC JSON \uB370\uC774\uD130"),console.log("\u{1F4CA} \uAE30\uBCF8 \uC815\uBCF4:",{fileName:t.fileName,fileSize:t.fileSize,pageCount:t.pageCount,extractionTimestamp:t.extractionTimestamp})}processFileWithAutoExtraction(t){return I(this,null,function*(){try{console.log("\u{1F680} PDF \uD30C\uC77C \uCC98\uB9AC \uC2DC\uC791 (\uC790\uB3D9 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C):",t.name);let e=yield this.extractTextStreamAsJson(t);this.logJsonData(e);let n=this.generateSummary(e);return console.log(`\u{1F4CB} \uC694\uC57D \uC815\uBCF4:
`+n),e}catch(e){throw console.error("\u274C PDF \uD30C\uC77C \uCC98\uB9AC \uC2E4\uD328:",e),e}})}filterTextByCondition(t,e){let n=[];return t.pages.forEach(o=>{e.pageNumber&&o.pageNumber!==e.pageNumber||o.textItems.forEach(i=>{let r=!0;e.containsEnglish!==void 0&&(r=r&&i.analysis.containsEnglish===e.containsEnglish),e.containsKorean!==void 0&&(r=r&&i.analysis.containsKorean===e.containsKorean),e.minFontSize!==void 0&&(r=r&&i.font.size>=e.minFontSize),e.maxFontSize!==void 0&&(r=r&&i.font.size<=e.maxFontSize),r&&n.push(i)})}),n}generateSummary(t){return[`\u{1F4C4} PDF \uD30C\uC77C: ${t.fileName}`,"\u{1F4CA} \uAE30\uBCF8 \uC815\uBCF4:",`   - \uD30C\uC77C \uD06C\uAE30: ${this.formatFileSize(t.fileSize)}`,`   - \uD398\uC774\uC9C0 \uC218: ${t.pageCount}`,`   - \uCD94\uCD9C \uC2DC\uAC04: ${new Date(t.extractionTimestamp).toLocaleString("ko-KR")}`,"","\u{1F4C8} \uD14D\uC2A4\uD2B8 \uD1B5\uACC4:",`   - \uCD1D \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C: ${t.metadata.totalTextItems.toLocaleString()}\uAC1C`,`   - \uCD1D \uB2E8\uC5B4 \uC218: ${t.metadata.totalWords.toLocaleString()}\uAC1C`,`   - \uCD1D \uBB38\uC790 \uC218: ${t.metadata.totalCharacters.toLocaleString()}\uAC1C`,`   - \uC0AC\uC6A9\uB41C \uD3F0\uD2B8: ${t.metadata.uniqueFonts.length}\uAC1C`,"","\u{1F5BC}\uFE0F \uBBF8\uB514\uC5B4 \uC694\uC18C:",`   - \uC774\uBBF8\uC9C0 \uD3EC\uD568: ${t.metadata.hasImages?"\uC608":"\uC544\uB2C8\uC624"}`,`   - \uBCA1\uD130 \uADF8\uB798\uD53D \uD3EC\uD568: ${t.metadata.hasVectorGraphics?"\uC608":"\uC544\uB2C8\uC624"}`,"","\u{1F4DD} \uD398\uC774\uC9C0\uBCC4 \uC0C1\uC138:",...t.pages.map(n=>`   \uD398\uC774\uC9C0 ${n.pageNumber}: ${n.statistics.totalItems}\uAC1C \uD14D\uC2A4\uD2B8, ${n.statistics.wordCount}\uB2E8\uC5B4`)].join(`
`)}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,o)).toFixed(2))+" "+n[o]}extractVectorStreamData(t){return I(this,null,function*(){console.log("\u{1F3A8} \uBCA1\uD130 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130 \uCD94\uCD9C \uC2DC\uC791...");let e=yield t.arrayBuffer(),n=yield window.pdfjsLib.getDocument(e).promise,o=1;console.log(`\u{1F512} \uBCA1\uD130 \uC2A4\uD2B8\uB9BC: ${n.numPages}\uD398\uC774\uC9C0 \uC911 ${o}\uD398\uC774\uC9C0\uB9CC \uBD84\uC11D\uD569\uB2C8\uB2E4.`);let i={fileName:t.name.replace(/\.[^/.]+$/,""),fileSize:t.size,pageCount:o,extractionTimestamp:new Date().toISOString(),extractionMethod:"PDF.js OperatorList Analysis (First Page Only)",totalOperations:0,summary:{totalPaths:0,totalLines:0,totalCurves:0,totalRectangles:0,totalFillOperations:0,totalStrokeOperations:0,totalClipOperations:0,glyphPaths:0,shapePaths:0},pageDetails:[],debugInfo:{totalOperatorsFound:0,recognizedOperators:0,unrecognizedOperators:0,uniqueOperatorCodes:[]}},r=new Set;try{console.log("\u{1F512} \uBCA1\uD130 \uC2A4\uD2B8\uB9BC \uB2E8\uC77C \uD398\uC774\uC9C0 \uBAA8\uB4DC: 1\uD398\uC774\uC9C0\uB9CC \uBD84\uC11D\uD569\uB2C8\uB2E4.");for(let h=1;h<=Math.min(n.numPages,1);h++){let d=yield n.getPage(h),x=yield d.getOperatorList({intent:"display"});i.debugInfo.totalOperatorsFound+=x.fnArray.length,x.fnArray.forEach(C=>r.add(C));let s={pageNumber:h,operations:[],statistics:{pathCount:0,lineCount:0,curveCount:0,rectangleCount:0,fillCount:0,strokeCount:0,clipCount:0}},m=[],S=!1,l=null,u=[],p="#000000",y="#000000",O=[],T=[],E=[],M=window.pdfjsLib.OPS;for(let C=0;C<x.fnArray.length;C++){let f=x.fnArray[C],g=x.argsArray[C],_="",A=!1;if(f===M.setFillRGBColor){if(g&&g.length>=3){let z=Math.round(g[0]*255),G=Math.round(g[1]*255),R=Math.round(g[2]*255);p=`#${z.toString(16).padStart(2,"0")}${G.toString(16).padStart(2,"0")}${R.toString(16).padStart(2,"0")}`}}else if(f===M.setStrokeRGBColor){if(g&&g.length>=3){let z=Math.round(g[0]*255),G=Math.round(g[1]*255),R=Math.round(g[2]*255);y=`#${z.toString(16).padStart(2,"0")}${G.toString(16).padStart(2,"0")}${R.toString(16).padStart(2,"0")}`}}else if(f===M.setFillGray){if(g&&g.length>=1){let z=Math.round(g[0]*255);p=`#${z.toString(16).padStart(2,"0")}${z.toString(16).padStart(2,"0")}${z.toString(16).padStart(2,"0")}`}}else if(f===M.setStrokeGray){if(g&&g.length>=1){let z=Math.round(g[0]*255);y=`#${z.toString(16).padStart(2,"0")}${z.toString(16).padStart(2,"0")}${z.toString(16).padStart(2,"0")}`}}else if(f===30)l&&u.push([...l]),O.push(p),T.push(y);else if(f===31)g&&g.length>=6&&(l=g.slice(0,6)),_="matrixTransform";else if(f===32)u.length>0&&(l=u.pop()||null),O.length>0&&(p=O.pop()),T.length>0&&(y=T.pop());else if(f===1)g&&g.length>=2&&(m.push({type:"moveTo",coords:[g[0],g[1]]}),S=!0),_="moveTo",A=!0,s.statistics.pathCount++,i.summary.totalPaths++;else if(f===2)g&&g.length>=2&&(m.push({type:"lineTo",coords:[g[0],g[1]]}),S=!0),_="lineTo",A=!0,s.statistics.lineCount++,i.summary.totalLines++;else if(f>=3&&f<=6)g&&g.length>=6&&(m.push({type:"curve",coords:g.slice(0,6)}),S=!0),_="curve",A=!0,s.statistics.curveCount++,i.summary.totalCurves++;else if(f===7)g&&g.length>=4&&(m.push({type:"rectangle",coords:[g[0],g[1],g[2],g[3]]}),S=!0),_="rectangle",A=!0,s.statistics.rectangleCount++,i.summary.totalRectangles++;else if(f===9)S&&m.push({type:"closePath",coords:[]}),_="closePath",A=!0;else if(f===22){if(_="fill",A=!0,s.statistics.fillCount++,i.summary.totalFillOperations++,E.push({operation:"fill",fillColor:p,strokeColor:y}),!S&&l){let z=l[4],G=l[5],R=l[0],q=l[3],B=Math.max(Math.abs(R),Math.abs(q),1);m.push({type:"implicitRect",coords:[z,G,B,B]}),S=!0,console.log(`\u{1F538} \uC554\uBB35\uC801 fill path \uC0DD\uC131: (${z.toFixed(2)}, ${G.toFixed(2)}) ${B.toFixed(2)}x${B.toFixed(2)} \uC0C9\uC0C1: ${p}`)}}else f===20?(_="stroke",A=!0,s.statistics.strokeCount++,i.summary.totalStrokeOperations++,E.push({operation:"stroke",fillColor:p,strokeColor:y})):f===29?(_="clip",A=!0,s.statistics.clipCount++,i.summary.totalClipOperations++):f===12?(g&&g.length===6&&(l=g.slice(0,6)),_="styleSettings"):f>=10&&f<=11?_="styleSettings":[28,37,42,44,58,59,70,71,91].includes(f)&&(g&&Array.isArray(g)&&g.length>=2&&typeof g[g.length-2]=="number"&&typeof g[g.length-1]=="number"?(_="unknownVectorGraphic",A=!0):(_="unknownOperation",A=!1));if(_&&(A||_.includes("Transform")||_.includes("Settings"))){let z={type:_,args:g||[],opCode:f,opName:this.getOpName(f)||`code_${f}`,isVectorGraphic:A,coordinates:this.extractCoordinates(g)};(_==="fill"||_==="stroke")&&m.length>0&&(z.currentPath=[...m],z.pathSegments=m.length),l&&(z.transformMatrix=[...l]),s.operations.push(z),A&&(i.totalOperations++,i.debugInfo.recognizedOperators++),(_==="fill"||_==="stroke")&&(m=[],S=!1)}else i.debugInfo.unrecognizedOperators++}if(console.log(`\u{1F4C4} \uD398\uC774\uC9C0 ${h} OperatorList: ${s.operations.length}\uAC1C \uC5F0\uC0B0`),E.length>0){let C=[...new Set(E.map(g=>g.fillColor))],f=[...new Set(E.map(g=>g.strokeColor))];s.colorInfo={colorsByOperation:E,uniqueFillColors:C,uniqueStrokeColors:f,totalFillOperations:E.filter(g=>g.operation==="fill").length,totalStrokeOperations:E.filter(g=>g.operation==="stroke").length}}try{let C=d.getViewport({scale:1}),f=yield d.getOperatorList({intent:"display"}),_=yield new window.pdfjsLib.SVGGraphics(d.commonObjs,d.objs).getSVG(f,C),A=this.extractColorsFromSVG(_),z=yield this.extractTextColorsAndPositionsFromOperatorList(d),G=z.colorPositions,R=z.debugInfo,q={textItemsCount:G.length,uniqueTextColors:[...new Set(G.map(W=>W.color))],colorsByPosition:G,debugInfo:R,sampleTextItems:G.slice(0,10).map(W=>({text:"",color:W.color,position:{x:W.x,y:W.y}}))};s.svgColorInfo=A,s.textColorInfo=q;let B=_.querySelectorAll("text, tspan");B.forEach(W=>W.remove()),console.log(`\u{1F5D1}\uFE0F ${B.length}\uAC1C\uC758 \uD14D\uC2A4\uD2B8 \uC694\uC18C \uC81C\uAC70\uB428`);let Y=new XMLSerializer().serializeToString(_);Y=Y.replace(/<svg:svg/g,"<svg").replace(/<\/svg:svg>/g,"</svg>").replace(/<svg:g/g,"<g").replace(/<\/svg:g>/g,"</g>").replace(/<svg:path/g,"<path").replace(/<\/svg:path>/g,"</path>").replace(/<svg:rect/g,"<rect").replace(/<\/svg:rect>/g,"</rect>").replace(/<svg:line/g,"<line").replace(/<\/svg:line>/g,"</line>").replace(/<svg:circle/g,"<circle").replace(/<\/svg:circle>/g,"</circle>").replace(/<svg:ellipse/g,"<ellipse").replace(/<\/svg:ellipse>/g,"</ellipse>").replace(/<svg:polygon/g,"<polygon").replace(/<\/svg:polygon>/g,"</polygon>").replace(/<svg:polyline/g,"<polyline").replace(/<\/svg:polyline>/g,"</polyline>").replace(/<svg:text/g,"<text").replace(/<\/svg:text>/g,"</text>").replace(/<svg:tspan/g,"<tspan").replace(/<\/svg:tspan>/g,"</tspan>").replace(/xmlns:svg="[^"]*"/g,"").replace(/xmlns:xlink="[^"]*"/g,'xmlns:xlink="http://www.w3.org/1999/xlink"').replace(/<svg /g,'<svg xmlns="http://www.w3.org/2000/svg" '),s.svgContent=Y,console.log(`\u2705\u2705\u2705 \uD398\uC774\uC9C0 ${h} SVG \uC0DD\uC131 \uC644\uB8CC (\uAE38\uC774: ${s.svgContent.length}\uC790) \u2705\u2705\u2705`),console.log("\u{1F50D} SVG \uC2DC\uC791 \uBD80\uBD84:",s.svgContent.substring(0,200))}catch(C){console.error(`\u274C\u274C\u274C [SVG_ERROR] \uD398\uC774\uC9C0 ${h} SVG \uC0DD\uC131 \uC2E4\uD328! \u274C\u274C\u274C`,C),console.error("[SVG_ERROR] \uC5D0\uB7EC \uC0C1\uC138:",{message:C.message,stack:C.stack,name:C.name}),s.svgContent=void 0}(s.operations.length>0||s.svgContent)&&(i.pageDetails.push(s),console.log(`\u{1F4E6} \uD398\uC774\uC9C0 ${h} pageDetails\uC5D0 \uCD94\uAC00\uB428 (SVG: ${s.svgContent?"YES":"NO"})`)),console.log(`\u{1F3A8} \uD398\uC774\uC9C0 ${h} SVG \uBD84\uC11D \uC911...`);let c=yield this.extractVectorGraphicsFromSVG(d,window.pdfjsLib);console.log(`\u2705 \uD398\uC774\uC9C0 ${h} SVG \uBD84\uC11D \uC644\uB8CC:`,{paths:c.totalPaths,lines:c.totalLines,curves:c.totalCurves,fills:c.totalFills,glyphPaths:c.glyphPaths,shapePaths:c.shapePaths}),i.summary.totalPaths+=c.totalPaths,i.summary.totalLines+=c.totalLines,i.summary.totalCurves+=c.totalCurves,i.summary.glyphPaths+=c.glyphPaths,i.summary.shapePaths+=c.shapePaths,console.log(`\u{1F4CA} \uD398\uC774\uC9C0 ${h} \uB204\uC801 \uD1B5\uACC4:`,{totalPaths:i.summary.totalPaths,totalLines:i.summary.totalLines,totalCurves:i.summary.totalCurves,totalFills:i.summary.totalFillOperations,glyphPaths:i.summary.glyphPaths,shapePaths:i.summary.shapePaths})}return i.debugInfo.uniqueOperatorCodes=Array.from(r).sort(),i.extractionMethod="PDF.js OperatorList + SVG Rendering (Hybrid)",console.log("\u2705 \uBCA1\uD130 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130 \uCD94\uCD9C \uC644\uB8CC:",{totalOperations:i.totalOperations,recognizedOperators:i.debugInfo.recognizedOperators,unrecognizedOperators:i.debugInfo.unrecognizedOperators}),i}catch(a){throw console.error("\u274C \uBCA1\uD130 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130 \uCD94\uCD9C \uC624\uB958:",a),a}})}downloadVectorStreamJson(t){try{let e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json;charset=utf-8;"}),o=document.createElement("a"),i=URL.createObjectURL(n),r=new Date().toISOString().split("T")[0],a=`${t.fileName}_vector_stream_${r}.json`;o.setAttribute("href",i),o.setAttribute("download",a),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),console.log(`\u2705 \uBCA1\uD130 \uC2A4\uD2B8\uB9BC JSON \uD30C\uC77C \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC: ${a}`)}catch(e){throw console.error("\u274C \uBCA1\uD130 \uC2A4\uD2B8\uB9BC JSON \uD30C\uC77C \uB2E4\uC6B4\uB85C\uB4DC \uC624\uB958:",e),e}}logVectorStreamJson(t){console.group("\u{1F3A8} PDF \uBCA1\uD130 \uC2A4\uD2B8\uB9BC JSON \uB370\uC774\uD130"),console.log("\u{1F4CA} \uAE30\uBCF8 \uC815\uBCF4:",{fileName:t.fileName,fileSize:t.fileSize,pageCount:t.pageCount,extractionTimestamp:t.extractionTimestamp}),console.log("\u{1F4C8} \uBCA1\uD130 \uD1B5\uACC4:",t.summary),console.log("\u{1F50D} \uB514\uBC84\uADF8 \uC815\uBCF4:",t.debugInfo),console.log("\u{1F3A8} \uC804\uCCB4 \uBCA1\uD130 JSON \uB370\uC774\uD130:",t),console.groupEnd()}getOpName(t){return{1:"moveTo",2:"lineTo",3:"curveTo",4:"quadraticCurveTo",5:"bezierCurveTo",6:"arcTo",7:"rectangle",9:"closePath",10:"setLineWidth",11:"setLineCap",12:"setLineJoin",20:"stroke",22:"fill",29:"clip",31:"concat",32:"scale",33:"rotate",34:"translate"}[t]||null}extractCoordinates(t){if(!t||!Array.isArray(t))return null;if(t.length===6&&t.every(n=>typeof n=="number"))return{type:"matrix",x:t[4],y:t[5],transform:[t[0],t[1],t[2],t[3]]};if(t.length===2&&t.every(n=>typeof n=="number"))return{type:"point",x:t[0],y:t[1]};if(t.length===4&&t.every(n=>typeof n=="number"))return{type:"rectangle",x:t[0],y:t[1],width:t[2],height:t[3]};let e=t.filter(n=>typeof n=="number");return e.length>=2?{type:"extracted",x:e[e.length-2],y:e[e.length-1],allNumbers:e}:null}parseSVGPathCommands(t){let e={moveToCount:0,lineToCount:0,curveToCount:0,commands:[]};if(!t||typeof t!="string")return e;let n=/([MLHVCSQTAZmlhvcsqtaz])([^MLHVCSQTAZmlhvcsqtaz]*)/g,o;for(;(o=n.exec(t))!==null;){let i=o[1],r=o[2].trim();if(!r){(i==="Z"||i==="z")&&e.commands.push({type:"closePath",coords:[]});continue}let a=r.replace(/,/g," ").replace(/-/g," -").split(/\s+/).filter(h=>h&&h!=="-").map(h=>parseFloat(h)).filter(h=>!isNaN(h));switch(i.toUpperCase()){case"M":e.moveToCount++,e.commands.push({type:"moveTo",coords:a});break;case"L":e.lineToCount++,e.commands.push({type:"lineTo",coords:a});break;case"H":e.lineToCount++,e.commands.push({type:"hLineTo",coords:a});break;case"V":e.lineToCount++,e.commands.push({type:"vLineTo",coords:a});break;case"C":e.curveToCount++,e.commands.push({type:"curveTo",coords:a});break;case"S":e.curveToCount++,e.commands.push({type:"smoothCurveTo",coords:a});break;case"Q":e.curveToCount++,e.commands.push({type:"quadraticCurveTo",coords:a});break;case"T":e.curveToCount++,e.commands.push({type:"smoothQuadraticCurveTo",coords:a});break;case"A":e.curveToCount++,e.commands.push({type:"arc",coords:a});break;case"Z":e.commands.push({type:"closePath",coords:[]});break}}return e}analyzeSVGPaths(t){let e={totalPaths:0,totalLines:0,totalCurves:0,totalFills:0,glyphPaths:0,shapePaths:0,pathDetails:[],renderablePaths:[]};return t.querySelectorAll("path").forEach((o,i)=>{let r=o.getAttribute("d");if(!r)return;let a=this.parseSVGPathCommands(r),h=1/0,d=1/0,x=-1/0,s=-1/0,m=r.match(/-?\d+(\.\d+)?/g);if(m)for(let b=0;b<m.length;b+=2){let M=parseFloat(m[b]),c=parseFloat(m[b+1]||"0");h=Math.min(h,M),d=Math.min(d,c),x=Math.max(x,M),s=Math.max(s,c)}let S=x-h,l=s-d,u=o.getAttribute("fill"),p=o.getAttribute("stroke"),y=!!(u&&u.toLowerCase()!=="none"),O=!!(p&&p.toLowerCase()!=="none"),E=(S<5&&l<5||S===1&&l===1)&&y&&!O;e.totalPaths++,E?e.glyphPaths++:e.shapePaths++,e.totalLines+=a.lineToCount,e.totalCurves+=a.curveToCount,(y||O)&&(y&&e.totalFills++,e.renderablePaths.push({element:o,d:r,fill:u,stroke:p,strokeWidth:o.getAttribute("stroke-width"),opacity:o.getAttribute("opacity"),transform:o.getAttribute("transform")})),e.pathDetails.push({pathIndex:i,moveToCount:a.moveToCount,lineToCount:a.lineToCount,curveToCount:a.curveToCount,dAttribute:r.substring(0,100)+(r.length>100?"...":""),isGlyph:E})}),e}extractVectorGraphicsFromSVG(t,e){return I(this,null,function*(){try{let n=t.getViewport({scale:1}),o=yield t.getOperatorList({intent:"display"}),r=yield new e.SVGGraphics(t.commonObjs,t.objs).getSVG(o,n),a=this.analyzeSVGPaths(r),d=new XMLSerializer().serializeToString(r);return{totalPaths:a.totalPaths,totalLines:a.totalLines,totalCurves:a.totalCurves,totalFills:a.totalFills,glyphPaths:a.glyphPaths,shapePaths:a.shapePaths,svgString:d.substring(0,500),renderablePaths:a.renderablePaths}}catch{return{totalPaths:0,totalLines:0,totalCurves:0,totalFills:0,glyphPaths:0,shapePaths:0,svgString:"",renderablePaths:[]}}})}redrawVectorGraphicsFromSVG(t,e,n){return I(this,null,function*(){try{console.log("\u{1F3A8} SVG \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C8\uB85C\uADF8\uB9AC\uAE30 \uC2DC\uC791...");let o=n.querySelector("canvas");if(!o)return console.error("\u274C \uCE94\uBC84\uC2A4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),{success:!1,totalElementsCreated:0,fillCount:0,strokeCount:0};let i=o.width,r=o.height,a=o.offsetWidth,h=o.offsetHeight;console.log(`\u{1F4D0} \uCE94\uBC84\uC2A4 \uD06C\uAE30: ${i} x ${r}`),console.log(`\u{1F4D0} \uD45C\uC2DC \uD06C\uAE30: ${a} x ${h}`);let d=t.getViewport({scale:1}),x=i/d.width;console.log(`\u{1F4CF} PDF \uC6D0\uBCF8 \uD06C\uAE30: ${d.width} x ${d.height}`),console.log(`\u{1F50D} \uD604\uC7AC \uC2A4\uCF00\uC77C: ${x}`);let s=t.getViewport({scale:x}),m=yield t.getOperatorList({intent:"display"}),l=yield new e.SVGGraphics(t.commonObjs,t.objs).getSVG(m,s);console.log("\u{1F50D} \uC0DD\uC131\uB41C SVG \uC804\uCCB4 \uAD6C\uC870:"),console.log("SVG \uD06C\uAE30:",s.width,"x",s.height),console.log("SVG \uC790\uC2DD \uC694\uC18C \uAC1C\uC218:",l.children.length),Array.from(l.children).forEach((T,E)=>{let b=T;if(console.log(`
\u{1F4E6} \uC694\uC18C ${E+1}:`,b.tagName),b.tagName==="path"){let M=b;console.log("  - d:",M.getAttribute("d")?.substring(0,100)+"..."),console.log("  - fill:",M.getAttribute("fill")),console.log("  - stroke:",M.getAttribute("stroke")),console.log("  - transform:",M.getAttribute("transform"))}else b.tagName==="g"&&(console.log("  - transform:",b.getAttribute("transform")),console.log("  - \uC790\uC2DD \uAC1C\uC218:",b.children.length),Array.from(b.children).forEach((M,c)=>{let C=M;if(C.tagName==="path"){let f=C;console.log(`    \u2022 path ${c+1}:`),console.log("      - d:",f.getAttribute("d")?.substring(0,80)+"..."),console.log("      - fill:",f.getAttribute("fill")),console.log("      - stroke:",f.getAttribute("stroke"))}}))});let u=this.analyzeSVGPaths(l);if(u.renderablePaths.length===0)return console.warn("\u26A0\uFE0F \uB80C\uB354\uB9C1 \uAC00\uB2A5\uD55C \uBCA1\uD130 \uC694\uC18C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),{success:!1,totalElementsCreated:0,fillCount:0,strokeCount:0};console.log(`
\u{1F4CA} \uB80C\uB354\uB9C1 \uAC00\uB2A5\uD55C \uBCA1\uD130 \uC694\uC18C: ${u.renderablePaths.length}\uAC1C`),console.log(`   - fill \uC694\uC18C: ${u.totalFills}\uAC1C`);let p=n.querySelector(".vector-graphics-overlay");p?(p.innerHTML="",p.style.width=`${a}px`,p.style.height=`${h}px`,p.setAttribute("viewBox",`0 0 ${s.width} ${s.height}`)):(p=document.createElementNS("http://www.w3.org/2000/svg","svg"),p.classList.add("vector-graphics-overlay"),p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.width=`${a}px`,p.style.height=`${h}px`,p.style.pointerEvents="none",p.style.zIndex="10",p.setAttribute("viewBox",`0 0 ${s.width} ${s.height}`),p.setAttribute("preserveAspectRatio","xMidYMid meet"),n.style.position="relative",n.appendChild(p));let y=0,O=0;return u.renderablePaths.forEach((T,E)=>{try{let b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d",T.d),T.fill&&(b.setAttribute("fill",T.fill),y++),T.stroke&&(b.setAttribute("stroke",T.stroke),O++),T.strokeWidth&&b.setAttribute("stroke-width",T.strokeWidth),T.opacity&&b.setAttribute("opacity",T.opacity),T.transform&&b.setAttribute("transform",T.transform),b.classList.add("vector-path"),b.setAttribute("data-path-index",E.toString()),p.appendChild(b)}catch(b){console.error(`\u274C Path ${E} \uC0DD\uC131 \uC2E4\uD328:`,b)}}),console.log(`\u2705 \uBCA1\uD130 \uC694\uC18C \uC0DD\uC131 \uC644\uB8CC: ${u.renderablePaths.length}\uAC1C`),console.log(`   - fill: ${y}\uAC1C, stroke: ${O}\uAC1C`),{success:!0,totalElementsCreated:u.renderablePaths.length,fillCount:y,strokeCount:O}}catch(o){return console.error("\u274C \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C8\uB85C\uADF8\uB9AC\uAE30 \uC2E4\uD328:",o),{success:!1,totalElementsCreated:0,fillCount:0,strokeCount:0}}})}redrawAllPagesVectorGraphics(t,e,n){return I(this,null,function*(){try{console.log("\u{1F3A8}\u{1F3A8}\u{1F3A8} \uC804\uCCB4 \uD398\uC774\uC9C0 \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C8\uB85C\uADF8\uB9AC\uAE30 \uC2DC\uC791...");let o=t.numPages,i=0,r=0,a=0;for(let h=1;h<=o;h++){let d=yield t.getPage(h),x=n.querySelector(`.page[data-page-number="${h}"]`);if(!x){console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${h} DOM \uC694\uC18C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);continue}let s=yield this.redrawVectorGraphicsFromSVG(d,e,x);s.success&&(i+=s.totalElementsCreated,r+=s.fillCount,a+=s.strokeCount)}console.log("\u2705\u2705\u2705 \uC804\uCCB4 \uD398\uC774\uC9C0 \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C8\uB85C\uADF8\uB9AC\uAE30 \uC644\uB8CC!"),console.log(`\u{1F4CA} \uCD1D \uC0DD\uC131\uB41C \uC694\uC18C: ${i}\uAC1C`),console.log(`   - fill: ${r}\uAC1C`),console.log(`   - stroke: ${a}\uAC1C`)}catch(o){throw console.error("\u274C \uC804\uCCB4 \uD398\uC774\uC9C0 \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C8\uB85C\uADF8\uB9AC\uAE30 \uC2E4\uD328:",o),o}})}viewVectorGraphicsAsSVG(t,e,n){return I(this,null,function*(){try{console.log(`\u{1F5BC}\uFE0F \uD398\uC774\uC9C0 ${n} \uBCA1\uD130 \uADF8\uB798\uD53D SVG \uC0DD\uC131 \uC911...`);let o=t.getViewport({scale:2}),i=o.width,r=o.height,a=yield t.getOperatorList({intent:"display"}),d=yield new e.SVGGraphics(t.commonObjs,t.objs).getSVG(a,o),s=new XMLSerializer().serializeToString(d);s.includes("viewBox")||(s=s.replace("<svg",`<svg viewBox="0 0 ${i} ${r}"`));let m=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>\uD398\uC774\uC9C0 ${n} - \uBCA1\uD130 \uADF8\uB798\uD53D</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }
        .info {
            color: #666;
            font-size: 14px;
        }
        .info-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 5px;
        }
        .svg-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: auto;
        }
        svg {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
        }
        .controls {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        button:hover {
            background: #0056b3;
        }
        button.secondary {
            background: #6c757d;
        }
        button.secondary:hover {
            background: #545b62;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>\u{1F4CA} PDF \uBCA1\uD130 \uADF8\uB798\uD53D - \uD398\uC774\uC9C0 ${n}</h1>
        <div class="info">
            <span class="info-item">\u{1F4D0} \uD06C\uAE30: ${i.toFixed(2)} \xD7 ${r.toFixed(2)}</span>
            <span class="info-item">\u{1F50D} \uC2A4\uCF00\uC77C: 2.0x</span>
            <span class="info-item">\u{1F4C5} \uC0DD\uC131: ${new Date().toLocaleString("ko-KR")}</span>
        </div>
    </div>

    <div class="controls">
        <button onclick="downloadSVG()">\u{1F4BE} SVG \uB2E4\uC6B4\uB85C\uB4DC</button>
        <button onclick="copyToClipboard()" class="secondary">\u{1F4CB} SVG \uCF54\uB4DC \uBCF5\uC0AC</button>
        <button onclick="toggleGrid()" class="secondary">\u{1F4CF} \uADF8\uB9AC\uB4DC \uD1A0\uAE00</button>
    </div>

    <div class="svg-container" id="svgContainer">
        ${s}
    </div>

    <script>
        function downloadSVG() {
            const svgElement = document.querySelector('svg');
            const serializer = new XMLSerializer();
            const svgString = serializer.serializeToString(svgElement);
            const blob = new Blob([svgString], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'page_${n}_vector_graphics.svg';
            a.click();
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const svgElement = document.querySelector('svg');
            const serializer = new XMLSerializer();
            const svgString = serializer.serializeToString(svgElement);
            navigator.clipboard.writeText(svgString).then(() => {
                console.log('\u2705 SVG \uCF54\uB4DC\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!');
            }).catch(err => {
                console.error('\uBCF5\uC0AC \uC2E4\uD328:', err);
            });
        }

        let gridVisible = false;
        function toggleGrid() {
            const container = document.getElementById('svgContainer');
            if (gridVisible) {
                container.style.backgroundImage = 'none';
                gridVisible = false;
            } else {
                container.style.backgroundImage = 
                    'linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),' +
                    'linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px)';
                container.style.backgroundSize = '20px 20px';
                gridVisible = true;
            }
        }
    <\/script>
</body>
</html>
      `,S=window.open("","_blank");S?(S.document.write(m),S.document.close(),console.log("\u2705 SVG \uBCA1\uD130 \uADF8\uB798\uD53D\uC774 \uC0C8 \uCC3D\uC5D0 \uD45C\uC2DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!")):console.error("\u274C \uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.")}catch(o){throw console.error("\u274C SVG \uC0DD\uC131 \uC2E4\uD328:",o),o}})}downloadAllPagesVectorGraphicsAsSVG(t,e){return I(this,null,function*(){try{console.log("\u{1F4E6} \uBAA8\uB4E0 \uD398\uC774\uC9C0\uC758 \uBCA1\uD130 \uADF8\uB798\uD53D SVG \uC0DD\uC131 \uC911...");let n=t.numPages,o="";for(let d=1;d<=n;d++){let x=yield t.getPage(d),s=x.getViewport({scale:2}),m=yield x.getOperatorList({intent:"display"}),l=yield new e.SVGGraphics(x.commonObjs,x.objs).getSVG(m,s),p=new XMLSerializer().serializeToString(l);o+=`
<!-- \uD398\uC774\uC9C0 ${d} -->
${p}
`}let i=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>\uC804\uCCB4 \uD398\uC774\uC9C0 \uBCA1\uD130 \uADF8\uB798\uD53D</title>
    <style>
        body { margin: 20px; background: #f5f5f5; }
        .page { background: white; margin-bottom: 40px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h2 { margin: 0 0 20px 0; color: #333; }
        svg { max-width: 100%; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>\u{1F4DA} PDF \uBCA1\uD130 \uADF8\uB798\uD53D (\uC804\uCCB4 ${n}\uD398\uC774\uC9C0)</h1>
    ${o}
</body>
</html>
      `,r=new Blob([i],{type:"text/html"}),a=URL.createObjectURL(r),h=document.createElement("a");h.href=a,h.download=`all_pages_vector_graphics_${Date.now()}.html`,h.click(),URL.revokeObjectURL(a),console.log("\u2705 \uBAA8\uB4E0 \uD398\uC774\uC9C0\uC758 \uBCA1\uD130 \uADF8\uB798\uD53D\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!")}catch(n){throw console.error("\u274C \uC804\uCCB4 \uD398\uC774\uC9C0 SVG \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",n),n}})}extractTextColorsAndPositionsFromOperatorList(t){return I(this,null,function*(){try{let e=yield t.getOperatorList({intent:"display"}),n=t.getViewport({scale:1}),o=e.fnArray,i=e.argsArray,r=window.pdfjsLib;if(!r||!r.OPS)return console.error("[OPERATOR_LIST] pdfjsLib.OPS\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!"),{colorPositions:[],debugInfo:{totalOperations:0,colorChangeCount:0,textOperationCount:0,opsCodeCheck:{},colorChanges:[],textOperations:[]}};let a=r.OPS,h=[],d=[],x=[],s="#000000",m=[1,0,0,1,0,0],S="DeviceRGB",l=0,u=0,p=!1,y="#000000",O=[],T={setFillRGBColor:a.setFillRGBColor,setFillGray:a.setFillGray,setFillColorSpace:a.setFillColorSpace,showText:a.showText,showSpacedText:a.showSpacedText,beginText:a.beginText,endText:a.endText};for(let b=0;b<o.length;b++){let M=o[b],c=i[b];if(M===a.beginText){p=!0;continue}else if(M===a.endText){p=!1;continue}if(M===a.transform){let[C,f,g,_,A,z]=c,[G,R,q,B,st,Y]=m;m=[C*G+f*q,C*R+f*B,g*G+_*q,g*R+_*B,A*G+z*q+st,A*R+z*B+Y]}else M===a.setTextMatrix&&(m=c.slice());if(M===a.setFillColorSpace){let C=c[0]?.name||c[0]||"DeviceRGB";C!==S&&(S=C)}else if(M===a.setFillRGBColor){if(l++,l<=10&&O.push({changeNumber:l,operationIndex:b,type:"setFillRGBColor",argsIsArray:Array.isArray(c),argsLength:c?.length,argsValue:c,argsType:typeof c,isInTextObject:p}),c&&c.length>=3){let C=c[0]<=1&&c[1]<=1&&c[2]<=1,f=C?Math.max(0,Math.min(255,Math.round(c[0]*255))):Math.max(0,Math.min(255,Math.round(c[0]))),g=C?Math.max(0,Math.min(255,Math.round(c[1]*255))):Math.max(0,Math.min(255,Math.round(c[1]))),_=C?Math.max(0,Math.min(255,Math.round(c[2]*255))):Math.max(0,Math.min(255,Math.round(c[2]))),A=`#${f.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}${_.toString(16).padStart(2,"0")}`;s=A,p&&(y=A,d.push({index:b,type:"setFillRGBColor",color:A,args:[c[0],c[1],c[2]]}))}}else if(M===a.setFillGray){if(l++,l<=10&&O.push({changeNumber:l,operationIndex:b,type:"setFillGray",argsIsArray:Array.isArray(c),argsLength:c?.length,argsValue:c,argsType:typeof c,isInTextObject:p}),c&&c.length>=1){let f=c[0]<=1?Math.max(0,Math.min(255,Math.round(c[0]*255))):Math.max(0,Math.min(255,Math.round(c[0]))),g=`#${f.toString(16).padStart(2,"0")}${f.toString(16).padStart(2,"0")}${f.toString(16).padStart(2,"0")}`;s=g,p&&(y=g,d.push({index:b,type:"setFillGray",color:g,args:[c[0]]}))}}else if(M===a.setFillCMYKColor){if(c&&c.length>=4){let[C,f,g,_]=c,A=Math.max(0,Math.min(255,Math.round(255*(1-C)*(1-_)))),z=Math.max(0,Math.min(255,Math.round(255*(1-f)*(1-_)))),G=Math.max(0,Math.min(255,Math.round(255*(1-g)*(1-_)))),R=`#${A.toString(16).padStart(2,"0")}${z.toString(16).padStart(2,"0")}${G.toString(16).padStart(2,"0")}`;s=R,p&&(y=R)}}else if(M===a.setFillColor){if(c){let C=s;if(S==="DeviceRGB"&&c.length>=3){let f=c[0]<=1&&c[1]<=1&&c[2]<=1,g=f?Math.max(0,Math.min(255,Math.round(c[0]*255))):Math.max(0,Math.min(255,Math.round(c[0]))),_=f?Math.max(0,Math.min(255,Math.round(c[1]*255))):Math.max(0,Math.min(255,Math.round(c[1]))),A=f?Math.max(0,Math.min(255,Math.round(c[2]*255))):Math.max(0,Math.min(255,Math.round(c[2])));C=`#${g.toString(16).padStart(2,"0")}${_.toString(16).padStart(2,"0")}${A.toString(16).padStart(2,"0")}`}else if(S==="DeviceGray"&&c.length>=1){let g=c[0]<=1?Math.max(0,Math.min(255,Math.round(c[0]*255))):Math.max(0,Math.min(255,Math.round(c[0])));C=`#${g.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}`}s=C,p&&(y=C)}}else if(M===a.showText||M===a.showSpacedText||M===a.nextLineShowText){u++;let C=m[4],f=n.height-m[5],g=M===a.showText?"showText":M===a.showSpacedText?"showSpacedText":"nextLineShowText";h.push({x:C,y:f,color:y}),x.push({index:b,type:g,x:C,y:f,color:y})}}let E=[...new Set(h.map(b=>b.color))];return{colorPositions:h,debugInfo:{totalOperations:o.length,colorChangeCount:l,textOperationCount:u,opsCodeCheck:T,colorChanges:d.slice(0,20),textOperations:x.slice(0,20),argsCheckLog:O}}}catch(e){return console.error("[COLOR_POSITION_ERROR] \uC0C9\uC0C1-\uC704\uCE58 \uCD94\uCD9C \uC2E4\uD328:",e),{colorPositions:[],debugInfo:{totalOperations:0,colorChangeCount:0,textOperationCount:0,opsCodeCheck:{},colorChanges:[],textOperations:[]}}}})}static \u0275fac=function(e){return new(e||w)};static \u0275prov=X({token:w,factory:w.\u0275fac,providedIn:"root"})};var vt=class w{constructor(){}deletePages(t,e){return I(this,null,function*(){try{let o=yield(yield fetch(t)).arrayBuffer(),i=yield PDFLib.PDFDocument.load(o),r=i.getPageCount();console.log(`\uC6D0\uBCF8 PDF \uD398\uC774\uC9C0 \uC218: ${r}`),console.log(`\uC0AD\uC81C\uD560 \uD398\uC774\uC9C0: ${e.join(", ")}`);let a=[...e].sort((s,m)=>m-s);for(let s of a)if(s<1||s>r)throw new Error(`\uD398\uC774\uC9C0 ${s}\uB294 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. (\uCD1D ${r}\uD398\uC774\uC9C0)`);for(let s of a){let m=s-1;i.removePage(m),console.log(`\uD398\uC774\uC9C0 ${s} \uC0AD\uC81C \uC644\uB8CC`)}let h=yield i.save(),d=new Blob([h],{type:"application/pdf"}),x=URL.createObjectURL(d);return console.log(`\uD398\uC774\uC9C0 \uC0AD\uC81C \uC644\uB8CC. \uB0A8\uC740 \uD398\uC774\uC9C0 \uC218: ${i.getPageCount()}`),x}catch(n){throw console.error("PDF \uD398\uC774\uC9C0 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:",n),n}})}getPageCount(t){return I(this,null,function*(){try{let n=yield(yield fetch(t)).arrayBuffer();return(yield PDFLib.PDFDocument.load(n)).getPageCount()}catch(e){throw console.error("PDF \uD398\uC774\uC9C0 \uC218 \uD655\uC778 \uC911 \uC624\uB958 \uBC1C\uC0DD:",e),e}})}static \u0275fac=function(e){return new(e||w)};static \u0275prov=X({token:w,factory:w.\u0275fac,providedIn:"root"})};var _t=class w{textEditorsSubject=new nt([]);activeEditorIdSubject=new nt(null);textEditors$=this.textEditorsSubject.asObservable();activeEditorId$=this.activeEditorIdSubject.asObservable();idCounter=0;constructor(){}createTextEditor(t=100,e=100){let n=`text-editor-${++this.idCounter}`,o={id:n,x:t,y:e,width:200,height:100,rotation:0,text:""},i=this.textEditorsSubject.value;return this.textEditorsSubject.next([...i,o]),this.setActiveEditor(n),n}addTextEditor(t){let e=this.textEditorsSubject.value;this.textEditorsSubject.next([...e,t])}updateTextEditor(t,e){let o=this.textEditorsSubject.value.map(i=>i.id===t?et(et({},i),e):i);this.textEditorsSubject.next(o)}deleteTextEditor(t){let n=this.textEditorsSubject.value.filter(o=>o.id!==t);this.textEditorsSubject.next(n),this.activeEditorIdSubject.value===t&&this.setActiveEditor(null)}setActiveEditor(t){this.activeEditorIdSubject.next(t)}getActiveEditor(){return this.activeEditorIdSubject.value}getTextEditor(t){return this.textEditorsSubject.value.find(e=>e.id===t)}getAllTextEditors(){return this.textEditorsSubject.value}getAllActiveEditors(){return this.textEditorsSubject.value}clearAllTextEditors(){this.textEditorsSubject.next([]),this.setActiveEditor(null)}exportTextEditors(){return JSON.stringify(this.textEditorsSubject.value,null,2)}importTextEditors(t){try{let e=JSON.parse(t);return Array.isArray(e)?(this.textEditorsSubject.next(e),this.setActiveEditor(null),!0):!1}catch(e){return console.error("Failed to import text editors:",e),!1}}static \u0275fac=function(e){return new(e||w)};static \u0275prov=X({token:w,factory:w.\u0275fac,providedIn:"root"})};var tt=class w{constructor(t){this.cdr=t}textEditor;position={x:0,y:0};cssClass="";fontSizeChange=new j;fontFamilyChange=new j;boldToggle=new j;italicToggle=new j;underlineToggle=new j;textAlignChange=new j;colorChange=new j;ngOnInit(){console.log("PdfTextEditorToolbarComponent ngOnInit")}ngOnChanges(t){console.log("PdfTextEditorToolbarComponent ngOnChanges:",t),t.textEditor&&(console.log("textEditor changed:",t.textEditor.currentValue),this.cdr.detectChanges()),t.position&&console.log("position changed:",t.position.currentValue)}onFontSizeChange(t){let e=t.target,n=parseInt(e.value,10);this.fontSizeChange.emit({editor:this.textEditor,fontSize:n})}onFontFamilyChange(t){let n=t.target.value;this.fontFamilyChange.emit({editor:this.textEditor,fontFamily:n})}onBoldToggle(){this.boldToggle.emit(this.textEditor)}onItalicToggle(){this.italicToggle.emit(this.textEditor)}onUnderlineToggle(){this.underlineToggle.emit(this.textEditor)}onTextAlignChange(t){this.textAlignChange.emit({editor:this.textEditor,align:t})}onColorChange(t){let n=t.target.value;this.colorChange.emit({editor:this.textEditor,color:n})}static \u0275fac=function(e){return new(e||w)(ct(ut))};static \u0275cmp=Q({type:w,selectors:[["app-pdf-text-adder-toolbar"]],inputs:{textEditor:"textEditor",position:"position",cssClass:"cssClass"},outputs:{fontSizeChange:"fontSizeChange",fontFamilyChange:"fontFamilyChange",boldToggle:"boldToggle",italicToggle:"italicToggle",underlineToggle:"underlineToggle",textAlignChange:"textAlignChange",colorChange:"colorChange"},standalone:!1,features:[K],decls:50,vars:20,consts:[[1,"text-style-toolbar",3,"ngClass"],[1,"toolbar-group"],["type","number","min","8","max","72","step","1",3,"change","value"],[3,"change","value"],["value","Arial"],["value","Helvetica"],["value","Times New Roman"],["value","Courier New"],["value","Georgia"],["value","Verdana"],["value","NanumGothicLocal"],["value","'Pretendard Variable', 'Pretendard'"],["value","'Noto Sans KR'"],["value","'Pretendard Variable', 'Pretendard', 'Noto Sans KR', 'NanumGothicLocal', 'NanumGothic', '\uB098\uB214\uACE0\uB515', sans-serif"],["title","\uAD75\uAC8C",3,"click"],["title","\uAE30\uC6B8\uC784",3,"click"],["title","\uBC11\uC904",3,"click"],["title","\uC67C\uCABD \uC815\uB82C",3,"click"],["title","\uAC00\uC6B4\uB370 \uC815\uB82C",3,"click"],["title","\uC624\uB978\uCABD \uC815\uB82C",3,"click"],["type","color",3,"change","value"]],template:function(e,n){e&1&&(v(0,"div",0)(1,"div",1)(2,"label"),F(3,"\uD06C\uAE30:"),P(),v(4,"input",2),k("change",function(i){return n.onFontSizeChange(i)}),P()(),v(5,"div",1)(6,"label"),F(7,"\uD3F0\uD2B8:"),P(),v(8,"select",3),k("change",function(i){return n.onFontFamilyChange(i)}),v(9,"option",4),F(10,"Arial"),P(),v(11,"option",5),F(12,"Helvetica"),P(),v(13,"option",6),F(14,"Times New Roman"),P(),v(15,"option",7),F(16,"Courier New"),P(),v(17,"option",8),F(18,"Georgia"),P(),v(19,"option",9),F(20,"Verdana"),P(),v(21,"option",10),F(22,"\uB098\uB214\uACE0\uB515"),P(),v(23,"option",11),F(24,"Pretendard"),P(),v(25,"option",12),F(26,"Noto Sans KR"),P(),v(27,"option",13),F(28,"\uAE30\uBCF8 \uD55C\uAE00\uD3F0\uD2B8"),P()()(),v(29,"div",1)(30,"button",14),k("click",function(){return n.onBoldToggle()}),v(31,"strong"),F(32,"B"),P()(),v(33,"button",15),k("click",function(){return n.onItalicToggle()}),v(34,"em"),F(35,"I"),P()(),v(36,"button",16),k("click",function(){return n.onUnderlineToggle()}),v(37,"u"),F(38,"U"),P()()(),v(39,"div",1)(40,"button",17),k("click",function(){return n.onTextAlignChange("left")}),F(41," \u2261 "),P(),v(42,"button",18),k("click",function(){return n.onTextAlignChange("center")}),F(43," \u2261 "),P(),v(44,"button",19),k("click",function(){return n.onTextAlignChange("right")}),F(45," \u2261 "),P()(),v(46,"div",1)(47,"label"),F(48,"\uC0C9\uC0C1:"),P(),v(49,"input",20),k("change",function(i){return n.onColorChange(i)}),P()()()),e&2&&(Z("left",n.position.x,"px")("top",n.position.y,"px"),N("ngClass",n.cssClass),V(4),N("value",n.textEditor.fontSize),V(4),N("value",n.textEditor.fontFamily),V(22),U("active",n.textEditor.bold),V(3),U("active",n.textEditor.italic),V(3),U("active",n.textEditor.underline),V(4),U("active",n.textEditor.textAlign==="left"),V(2),U("active",n.textEditor.textAlign==="center"),V(2),U("active",n.textEditor.textAlign==="right"),V(5),N("value",n.textEditor.color))},dependencies:[ht,xt,bt],styles:['@charset "UTF-8";.text-style-toolbar[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #ddd;border-radius:4px;padding:8px;display:flex;gap:12px;align-items:center;box-shadow:0 2px 8px #00000026;z-index:1001;font-size:12px;white-space:nowrap}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#666;white-space:nowrap}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:50px;padding:2px 4px;border:1px solid #ddd;border-radius:2px;font-size:12px}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #ddd;border-radius:2px;font-size:12px;min-width:80px;background:#fff}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:30px;height:24px;border:1px solid #ddd;border-radius:2px;cursor:pointer;padding:0}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid #ddd;background:#fff;border-radius:2px;cursor:pointer;font-size:12px;min-width:24px}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#007acc;color:#fff;border-color:#007acc}.text-style-toolbar.inline[_ngcontent-%COMP%]{position:relative;border-radius:4px 4px 0 0;box-shadow:0 -2px 8px #0000001a;padding:6px 8px;gap:8px;font-size:11px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{gap:3px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:45px;font-size:11px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:11px;min-width:70px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:24px;height:20px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 6px;font-size:10px;min-width:20px}.text-style-toolbar.floating[_ngcontent-%COMP%]{position:fixed;z-index:2000;box-shadow:0 4px 12px #0003}.text-style-toolbar.modifier[_ngcontent-%COMP%]{position:absolute;z-index:1500;box-shadow:0 4px 12px #0003}.text-style-toolbar.compact[_ngcontent-%COMP%]{padding:4px 6px;gap:6px;font-size:11px}.text-style-toolbar.compact[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{gap:2px}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][_ngcontent-%COMP%]{position:relative}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\c67c\\cabd][_ngcontent-%COMP%]{text-align:left}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\ac00\\c6b4\\b370][_ngcontent-%COMP%]{text-align:center}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\c624\\b978\\cabd][_ngcontent-%COMP%]{text-align:right}']})};var Ot=["textEditor"],Et=["textarea"];function zt(w,t){if(w&1){let e=H();v(0,"div",16),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"nw"))}),P()}}function At(w,t){if(w&1){let e=H();v(0,"div",17),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"ne"))}),P()}}function kt(w,t){if(w&1){let e=H();v(0,"div",18),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"sw"))}),P()}}function Ft(w,t){if(w&1){let e=H();v(0,"div",19),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"se"))}),P()}}function Vt(w,t){if(w&1){let e=H();v(0,"div",20),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"n"))}),P()}}function $t(w,t){if(w&1){let e=H();v(0,"div",21),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"s"))}),P()}}function Lt(w,t){if(w&1){let e=H();v(0,"div",22),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"w"))}),P()}}function Gt(w,t){if(w&1){let e=H();v(0,"div",23),k("mousedown",function(o){$(e);let i=D();return L(i.startResize(o,"e"))}),P()}}function It(w,t){if(w&1){let e=H();v(0,"app-pdf-text-adder-toolbar",24),k("fontSizeChange",function(o){$(e);let i=D();return L(i.onToolbarFontSizeChange(o))})("fontFamilyChange",function(o){$(e);let i=D();return L(i.onToolbarFontFamilyChange(o))})("boldToggle",function(o){$(e);let i=D();return L(i.onToolbarBoldToggle(o))})("italicToggle",function(o){$(e);let i=D();return L(i.onToolbarItalicToggle(o))})("underlineToggle",function(o){$(e);let i=D();return L(i.onToolbarUnderlineToggle(o))})("textAlignChange",function(o){$(e);let i=D();return L(i.onToolbarTextAlignChange(o))})("colorChange",function(o){$(e);let i=D();return L(i.onToolbarColorChange(o))}),P()}if(w&2){let e=D();N("textEditor",e.convertToTextEditor())("position",e.toolbarPosition)}}var St=class w{config={id:"",x:100,y:100,width:200,height:100,rotation:0,text:"",font:{name:"Arial",size:14}};isVisible=!1;containerWidth=800;containerHeight=600;configChange=new j;close=new j;delete=new j;deactivate=new j;textEditor;textarea;toolbarPosition={x:0,y:0};showToolbar=!1;isDragging=!1;isResizing=!1;isRotating=!1;dragStart={x:0,y:0};resizeHandle="";initialRotation=0;initialAngle=0;resizeObserver;ngOnInit(){this.config.id||(this.config.id="text-editor-"+Date.now()),this.resizeObserver=new ResizeObserver(()=>{this.constrainPosition()})}ngOnChanges(t){if(t.config&&t.config.currentValue){let e=t.config.currentValue;e.isActive!==void 0&&(console.log(`\uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 ${e.id} \uD65C\uC131\uD654 \uC0C1\uD0DC \uBCC0\uACBD:`,e.isActive),e.isActive?this.showToolbarForEditor():this.showToolbar=!1)}}ngOnDestroy(){this.resizeObserver?.disconnect()}ngAfterViewInit(){this.textarea&&this.config.text&&setTimeout(()=>{this.autoResizeTextarea(this.textarea.nativeElement)},0)}onMouseDown(t){t.preventDefault(),t.stopPropagation();let e=t.target;e.tagName!=="TEXTAREA"&&(e.classList.contains("resize-handle")?this.startResize(t,e.dataset.handle||""):e.classList.contains("rotate-handle")?this.startRotate(t):this.startDrag(t))}startDrag(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!0,this.dragStart={x:t.clientX-this.config.x,y:t.clientY-this.config.y},document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}startResize(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.resizeHandle=e,this.dragStart={x:t.clientX,y:t.clientY},document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}startRotate(t){t.preventDefault(),t.stopPropagation(),this.isRotating=!0,this.initialRotation=this.config.rotation;let e=this.textEditor.nativeElement.getBoundingClientRect(),n=e.left+e.width/2,o=e.top+e.height/2;this.initialAngle=Math.atan2(t.clientY-o,t.clientX-n)*180/Math.PI,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.body.style.cursor="grabbing"}onMouseMove=t=>{this.isDragging?(this.config.x=t.clientX-this.dragStart.x,this.config.y=t.clientY-this.dragStart.y,this.constrainPosition()):this.isResizing?this.handleResize(t):this.isRotating&&this.handleRotate(t),this.configChange.emit(this.config),this.showToolbar&&this.updateToolbarPosition()};onMouseUp=()=>{this.isDragging=!1,this.isResizing=!1,this.isRotating=!1,this.resizeHandle="",document.body.style.cursor="",document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)};handleResize(t){let e=t.clientX-this.dragStart.x,n=t.clientY-this.dragStart.y;switch(this.resizeHandle){case"nw":this.config.x+=e,this.config.y+=n,this.config.width-=e,this.config.height-=n;break;case"ne":this.config.y+=n,this.config.width+=e,this.config.height-=n;break;case"sw":this.config.x+=e,this.config.width-=e,this.config.height+=n;break;case"se":this.config.width+=e,this.config.height+=n;break;case"n":this.config.y+=n,this.config.height-=n;break;case"s":this.config.height+=n;break;case"w":this.config.x+=e,this.config.width-=e;break;case"e":this.config.width+=e;break}this.config.width=Math.max(50,this.config.width),this.config.height=Math.max(30,this.config.height),this.dragStart={x:t.clientX,y:t.clientY},this.constrainPosition()}handleRotate(t){let e=this.textEditor.nativeElement.getBoundingClientRect(),n=e.left+e.width/2,o=e.top+e.height/2,r=Math.atan2(t.clientY-o,t.clientX-n)*180/Math.PI-this.initialAngle;this.config.rotation=(this.initialRotation+r)%360,this.config.rotation<0&&(this.config.rotation+=360)}constrainPosition(){this.config.x=Math.max(0,Math.min(this.containerWidth-this.config.width,this.config.x)),this.config.y=Math.max(0,Math.min(this.containerHeight-this.config.height,this.config.y))}onTextChange(t){let e=t.target,n=this.config.text;if(this.config.text=e.value,console.log("=== \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBCC0\uACBD \uAC10\uC9C0 ==="),console.log("\uC5D0\uB514\uD130 ID:",this.config.id),console.log("\uC774\uC804 \uD14D\uC2A4\uD2B8:",n),console.log("\uC0C8 \uD14D\uC2A4\uD2B8:",this.config.text),console.log("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:",this.config.originalText),this.config.originalText!==void 0){let o=this.config.isModified;this.config.isModified=this.config.text.trim()!==this.config.originalText.trim(),console.log("\uC218\uC815 \uC0C1\uD0DC \uBCC0\uACBD:",o,"\u2192",this.config.isModified),console.log("\uD14D\uC2A4\uD2B8 \uBE44\uAD50:",{current:`"${this.config.text.trim()}"`,original:`"${this.config.originalText.trim()}"`,equal:this.config.text.trim()===this.config.originalText.trim()}),o!==this.config.isModified&&(console.log(`\u{1F504} \uC5D0\uB514\uD130 ${this.config.id} \uC218\uC815 \uC0C1\uD0DC \uBCC0\uACBD: ${o} \u2192 ${this.config.isModified}`),this.config.isModified?console.log(`\u{1F4DD} \uC5D0\uB514\uD130 ${this.config.id}\uAC00 \uC218\uC815\uB428\uC73C\uB85C \uD45C\uC2DC\uB428 (\uC800\uC7A5 \uB300\uC0C1\uC5D0 \uD3EC\uD568\uB428)`):console.log(`\u{1F504} \uC5D0\uB514\uD130 ${this.config.id}\uAC00 \uC6D0\uBCF8\uC73C\uB85C \uB418\uB3CC\uC544\uAC10`))}this.autoResizeTextarea(e),console.log("\uC0C1\uC704 \uCEF4\uD3EC\uB10C\uD2B8\uB85C \uBCC0\uACBD\uC0AC\uD56D \uC804\uB2EC \uC911..."),this.configChange.emit(this.config),console.log("=== \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBCC0\uACBD \uCC98\uB9AC \uC644\uB8CC ===")}autoResizeTextarea(t){let e=t.style.height;t.style.height="auto";let n=this.config.font?.size||14,o=Math.max(n*1.5+16,30),i=t.scrollHeight,r=Math.max(i,o);this.config.height=r,t.style.height=r+"px",this.configChange.emit(this.config)}onTextareaMouseDown(t){t.stopPropagation()}onTextareaClick(t){t.stopPropagation();let e=t.target;if(this.config.isActive)e.focus(),this.showToolbarForEditor();else{let n=new CustomEvent("activate-text-editor",{detail:{editorId:this.config.id}});document.dispatchEvent(n)}}onClose(){this.close.emit()}onDelete(){this.delete.emit(this.config.id)}onDeactivate(){this.deactivate.emit(this.config.id)}focusTextarea(){this.textarea&&this.textarea.nativeElement.focus()}getTransform(){return`translate(${this.config.x}px, ${this.config.y}px) rotate(${this.config.rotation}deg)`}getTextareaStyle(){let t=this.config.font?.name||"Arial",e=this.config.font?.size||14,n=this.config.font?.color||"#000000",o=this.config.font?.weight||"normal",i=this.config.font?.style||"normal",r=this.config.font?.letterSpacing||0,a=this.config.font?.lineHeight||1.2;return{fontSize:`${e}px`,fontFamily:'"Pretendard Variable", "Pretendard", "Noto Sans KR", "NanumGothicLocal", "NanumGothic", "\uB098\uB214\uACE0\uB515", sans-serif',color:n,fontWeight:o,fontStyle:i,letterSpacing:`${r}px`,lineHeight:a,fontKerning:"auto",fontVariantLigatures:"common-ligatures",fontFeatureSettings:'"kern" 1',textSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",fontStretch:"semi-condensed",transform:"scaleX(0.97)",wordBreak:"keep-all",overflowWrap:"break-word",backgroundColor:"rgba(255, 255, 255, 0.9)",width:"100%",height:"100%",border:"none",outline:"none",resize:"none",overflow:"hidden",padding:"2px 4px",margin:"0",boxSizing:"border-box"}}isTextModified(){return this.config.originalText?this.config.text.trim()!==this.config.originalText.trim():!1}convertToTextEditor(){return{id:this.config.id,x:this.config.x,y:this.config.y,width:this.config.width,height:this.config.height,text:this.config.text,fontSize:this.config.font?.size||14,fontFamily:this.config.font?.name||"Arial",color:this.config.font?.color||"#000000",bold:this.config.font?.weight==="bold"||this.config.font?.weight==="700",italic:this.config.font?.style==="italic",underline:!1,textAlign:"left",zIndex:1e3}}showToolbarForEditor(){this.config.isActive&&(this.showToolbar=!0,this.updateToolbarPosition())}updateToolbarPosition(){let t=this.containerWidth||800,e=this.containerHeight||600,n=400,o=50,i=this.config.x,r=this.config.y;r=this.config.y-o-10,i+n>t-20&&(i=t-n-20),r<10&&(r=this.config.y+this.config.height+10),r+o>e-20&&(r=e-o-20),i<10&&(i=10),this.toolbarPosition={x:i,y:r}}onToolbarFontSizeChange(t){this.config.font?this.config.font.size=t.fontSize:this.config.font={name:"Arial",size:t.fontSize},this.configChange.emit(this.config)}onToolbarFontFamilyChange(t){this.config.font?this.config.font.name=t.fontFamily:this.config.font={name:t.fontFamily,size:14},this.configChange.emit(this.config)}onToolbarBoldToggle(t){this.config.font?this.config.font.weight=t.bold?"bold":"normal":this.config.font={name:"Arial",size:14,weight:t.bold?"bold":"normal"},this.configChange.emit(this.config)}onToolbarItalicToggle(t){this.config.font?this.config.font.style=t.italic?"italic":"normal":this.config.font={name:"Arial",size:14,style:t.italic?"italic":"normal"},this.configChange.emit(this.config)}onToolbarUnderlineToggle(t){console.log("Underline toggle not supported in TextEditorConfig")}onToolbarTextAlignChange(t){console.log("Text align change not supported in TextEditorConfig")}onToolbarColorChange(t){this.config.font?this.config.font.color=t.color:this.config.font={name:"Arial",size:14,color:t.color},this.configChange.emit(this.config)}static \u0275fac=function(e){return new(e||w)};static \u0275cmp=Q({type:w,selectors:[["app-pdf-text-modifier"]],viewQuery:function(e,n){if(e&1&&(it(Ot,5),it(Et,5)),e&2){let o;rt(o=at())&&(n.textEditor=o.first),rt(o=at())&&(n.textarea=o.first)}},inputs:{config:"config",isVisible:"isVisible",containerWidth:"containerWidth",containerHeight:"containerHeight"},outputs:{configChange:"configChange",close:"close",delete:"delete",deactivate:"deactivate"},standalone:!1,features:[K],decls:17,vars:30,consts:[["textEditor",""],["textarea",""],[1,"text-editor-container"],["title","\uB4DC\uB798\uADF8\uD558\uC5EC \uC774\uB3D9",1,"drag-handle",3,"mousedown"],[1,"drag-indicator"],["placeholder","\uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uC138\uC694...",1,"text-input",3,"input","mousedown","click","ngStyle","value","readonly"],[1,"border"],["class","resize-handle nw","data-handle","nw",3,"mousedown",4,"ngIf"],["class","resize-handle ne","data-handle","ne",3,"mousedown",4,"ngIf"],["class","resize-handle sw","data-handle","sw",3,"mousedown",4,"ngIf"],["class","resize-handle se","data-handle","se",3,"mousedown",4,"ngIf"],["class","resize-handle n","data-handle","n",3,"mousedown",4,"ngIf"],["class","resize-handle s","data-handle","s",3,"mousedown",4,"ngIf"],["class","resize-handle w","data-handle","w",3,"mousedown",4,"ngIf"],["class","resize-handle e","data-handle","e",3,"mousedown",4,"ngIf"],["cssClass","modifier",3,"textEditor","position","fontSizeChange","fontFamilyChange","boldToggle","italicToggle","underlineToggle","textAlignChange","colorChange",4,"ngIf"],["data-handle","nw",1,"resize-handle","nw",3,"mousedown"],["data-handle","ne",1,"resize-handle","ne",3,"mousedown"],["data-handle","sw",1,"resize-handle","sw",3,"mousedown"],["data-handle","se",1,"resize-handle","se",3,"mousedown"],["data-handle","n",1,"resize-handle","n",3,"mousedown"],["data-handle","s",1,"resize-handle","s",3,"mousedown"],["data-handle","w",1,"resize-handle","w",3,"mousedown"],["data-handle","e",1,"resize-handle","e",3,"mousedown"],["cssClass","modifier",3,"fontSizeChange","fontFamilyChange","boldToggle","italicToggle","underlineToggle","textAlignChange","colorChange","textEditor","position"]],template:function(e,n){if(e&1){let o=H();v(0,"div",2,0)(2,"div",3),k("mousedown",function(r){return $(o),L(n.startDrag(r))}),v(3,"div",4),F(4,"\u22EE\u22EE"),P()(),v(5,"textarea",5,1),k("input",function(r){return $(o),L(n.onTextChange(r))})("mousedown",function(r){return $(o),L(n.onTextareaMouseDown(r))})("click",function(r){return $(o),L(n.onTextareaClick(r))}),P(),dt(7,"div",6),ot(8,zt,1,0,"div",7)(9,At,1,0,"div",8)(10,kt,1,0,"div",9)(11,Ft,1,0,"div",10)(12,Vt,1,0,"div",11)(13,$t,1,0,"div",12)(14,Lt,1,0,"div",13)(15,Gt,1,0,"div",14),P(),ot(16,It,1,2,"app-pdf-text-adder-toolbar",15)}e&2&&(Z("display",n.isVisible?"block":"none")("transform",n.getTransform())("width",n.config.width,"px")("height",n.config.height,"px"),U("dragging",n.isDragging)("resizing",n.isResizing)("rotating",n.isRotating)("text-modified",n.isTextModified())("active-editor",n.config.isActive),V(5),N("ngStyle",n.getTextareaStyle())("value",n.config.text)("readonly",!n.config.isActive),V(3),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.config.isActive),V(),N("ngIf",n.showToolbar&&n.config.isActive))},dependencies:[pt,mt,tt],styles:[".text-editor-container[_ngcontent-%COMP%]{position:absolute;min-width:50px;min-height:30px;z-index:1000;-webkit-user-select:none;user-select:none;box-sizing:border-box}.text-editor-container[_ngcontent-%COMP%]:hover   .resize-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:hover   .rotate-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:hover   .control-panel[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:hover   .drag-handle[_ngcontent-%COMP%]{opacity:1}.text-editor-container.text-modified[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-color:#ffc107;box-shadow:0 0 4px #ffc10780}.text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .resize-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .rotate-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .control-panel[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .drag-handle[_ngcontent-%COMP%]{opacity:0}.drag-handle[_ngcontent-%COMP%]{position:absolute;top:50%;left:-25px;transform:translateY(-50%);width:15px;height:30px;background:#b2b2b2;border:1px solid #fff;border-radius:4px 0 0 4px;display:flex;align-items:center;justify-content:center;cursor:move;opacity:0;transition:opacity .2s ease;z-index:2;color:#fff;font-size:10px}.drag-handle[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{font-weight:700;line-height:1;transform:rotate(90deg)}.drag-handle[_ngcontent-%COMP%]:hover{background:#323232}.text-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border:none;outline:none;resize:none;background:transparent;z-index:1;cursor:text;overflow:hidden;word-wrap:break-word;white-space:pre-wrap}.text-input[readonly][_ngcontent-%COMP%]{cursor:pointer;background-color:#fffc;color:#333}.border[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;box-sizing:border-box;border:2px solid #007ACC}.resize-handle[_ngcontent-%COMP%]{position:absolute;background:#007acc;border:1px solid #fff;opacity:0;transition:opacity .2s ease;z-index:2}.resize-handle.nw[_ngcontent-%COMP%], .resize-handle.ne[_ngcontent-%COMP%], .resize-handle.sw[_ngcontent-%COMP%], .resize-handle.se[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.resize-handle.n[_ngcontent-%COMP%], .resize-handle.s[_ngcontent-%COMP%]{width:20px;height:6px;left:50%;transform:translate(-50%)}.resize-handle.w[_ngcontent-%COMP%], .resize-handle.e[_ngcontent-%COMP%]{width:6px;height:20px;top:50%;transform:translateY(-50%)}.resize-handle.nw[_ngcontent-%COMP%]{top:-4px;left:-4px;cursor:nw-resize}.resize-handle.ne[_ngcontent-%COMP%]{top:-4px;right:-4px;cursor:ne-resize}.resize-handle.sw[_ngcontent-%COMP%]{bottom:-4px;left:-4px;cursor:sw-resize}.resize-handle.se[_ngcontent-%COMP%]{bottom:-4px;right:-4px;cursor:se-resize}.resize-handle.n[_ngcontent-%COMP%]{top:-3px;cursor:n-resize}.resize-handle.s[_ngcontent-%COMP%]{bottom:-3px;cursor:s-resize}.resize-handle.w[_ngcontent-%COMP%]{left:-3px;cursor:w-resize}.resize-handle.e[_ngcontent-%COMP%]{right:-3px;cursor:e-resize}.rotate-handle[_ngcontent-%COMP%]{position:absolute;top:-30px;left:50%;transform:translate(-50%);width:24px;height:24px;background:#ffc107;border:1px solid #fff;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:grab;opacity:0;transition:opacity .2s ease;z-index:2;color:#212529}.rotate-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.rotate-handle[_ngcontent-%COMP%]:hover{background:#e0a800}.rotate-handle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.control-panel[_ngcontent-%COMP%]{position:absolute;bottom:-35px;right:-5px;background:#fffffff2;border:1px solid #ccc;border-radius:4px;padding:4px;opacity:0;transition:opacity .2s ease;z-index:3;box-shadow:0 2px 8px #00000026}.control-panel[_ngcontent-%COMP%]   .control-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:4px}.btn-close[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-deactivate[_ngcontent-%COMP%]{width:24px;height:24px;border:none;border-radius:2px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover, .btn-delete[_ngcontent-%COMP%]:hover, .btn-deactivate[_ngcontent-%COMP%]:hover{opacity:.7}.btn-close[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-delete[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-deactivate[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.text-input[_ngcontent-%COMP%]{line-height:inherit;vertical-align:top;text-align:left;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.text-editor-container.dragging[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%], .text-editor-container.resizing[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%], .text-editor-container.rotating[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none}.text-editor-container.dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{opacity:.5;background:#414141;cursor:grabbing}.text-editor-container.rotating[_ngcontent-%COMP%]   .rotate-handle[_ngcontent-%COMP%]{opacity:1;background:#e0a800;cursor:grabbing}.text-editor-container.selected[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%], .text-editor-container.selected[_ngcontent-%COMP%]   .rotate-handle[_ngcontent-%COMP%], .text-editor-container.selected[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%], .text-editor-container.selected[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{opacity:1}"]})};export{yt as a,wt as b,vt as c,_t as d,tt as e,St as f};
