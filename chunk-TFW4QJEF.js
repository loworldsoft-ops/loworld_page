import{a as m}from"./chunk-YEEPMWEI.js";import{v as g,w as d}from"./chunk-N2Z47IIO.js";import{B as a,U as o,Z as p,ba as c,k as i}from"./chunk-JVCDH4YT.js";import{a as h}from"./chunk-JKOY2XUY.js";var b=(n=>(n.BOT_ACTIVE="bot_active",n.WAITING_AGENT="waiting_agent",n.AGENT_ACTIVE="agent_active",n.RESOLVED="resolved",n.CLOSED="closed",n))(b||{}),I=(r=>(r.CLIENT="client",r.AGENT="agent",r.BOT="bot",r.SYSTEM="system",r))(I||{});var u=class l{constructor(e){this.http=e}baseUrl=m.channelTalkApiUrl;validateSession(e,t){return this.http.post(`${this.baseUrl}/validate-session`,{sessionId:e,storeId:t})}identifyCustomer(e,t,s){return this.http.post(`${this.baseUrl}/identify-customer`,{fingerprint:e,storeId:t,preProvidedToken:s})}identifyCustomerWithObject(e){return this.http.post(`${this.baseUrl}/identify-customer`,e).pipe(o(t=>console.log("\u{1F4E1} \uACE0\uAC1D \uC2DD\uBCC4 \uC644\uB8CC:",t)),a(t=>(console.log("\uACE0\uAC1D \uC2DD\uBCC4 \uC2E4\uD328 - \uC11C\uBC84 \uC5F0\uACB0 \uBD88\uAC00"),i({client:null,rooms:[]}))))}getStore(e){return this.http.get(`${m.apiUrl}/stores/${e}`)}getClientRooms(e){return this.http.get(`${this.baseUrl}/rooms/${e}`).pipe(o(t=>console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uBAA9\uB85D \uC870\uD68C:",t)),a(t=>(console.log("\uCC44\uD305 \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i([]))))}getRoom(e){return this.http.get(`${this.baseUrl}/room/${e}`).pipe(o(t=>console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uC815\uBCF4 \uC870\uD68C:",t)),a(t=>(console.log("\uCC44\uD305\uBC29 \uC815\uBCF4 \uC870\uD68C \uC2E4\uD328 - \uC11C\uBC84 \uC5F0\uACB0 \uBD88\uAC00"),i(null))))}createRoom(e){return this.http.post(`${this.baseUrl}/rooms`,e).pipe(o(t=>console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uC0DD\uC131 \uC644\uB8CC:",t)),a(t=>(console.log("\uCC44\uD305\uBC29 \uC0DD\uC131 \uC2E4\uD328 - \uC11C\uBC84 \uC5F0\uACB0 \uBD88\uAC00"),i(null))))}createRoomWithOrganization(e){return this.http.post(`${this.baseUrl}/rooms`,e).pipe(o(t=>{console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uC0DD\uC131 API \uC751\uB2F5:",t),console.log("\u{1F4E1} \uC751\uB2F5 \uD0C0\uC785:",typeof t),console.log("\u{1F4E1} \uC751\uB2F5 \uAD6C\uC870:",JSON.stringify(t,null,2))}),a(t=>(console.error("\u274C \uCC44\uD305\uBC29 \uC0DD\uC131 API \uC5D0\uB7EC:",t),console.error("\u274C \uC5D0\uB7EC \uC0C1\uD0DC:",t.status),console.error("\u274C \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",t.message),console.error("\u274C \uC5D0\uB7EC \uC0C1\uC138:",t.error),i(null))))}updateRoomStatus(e,t){return this.http.patch(`${this.baseUrl}/rooms/${e}/status`,{status:t})}deleteWaitingRooms(e){return this.http.delete(`${this.baseUrl}/rooms/waiting/${e}`).pipe(o(t=>console.log("\u{1F4E1} \uB300\uAE30 \uC911\uC778 \uCC44\uD305\uBC29 \uC0AD\uC81C \uC644\uB8CC:",t)),a(t=>{throw console.error("\u274C \uCC44\uD305\uBC29 \uC0AD\uC81C \uC2E4\uD328:",t),t}))}getRoomMessages(e,t,s){let r=new g;return t&&(r=r.set("limit",t.toString())),s&&(r=r.set("offset",s.toString())),this.http.get(`${this.baseUrl}/messages/room/${e}`,{params:r}).pipe(o(n=>console.log("\u{1F4E1} \uBA54\uC2DC\uC9C0 \uBAA9\uB85D \uC870\uD68C:",n)),a(n=>(console.log("\uBA54\uC2DC\uC9C0 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328 - \uC11C\uBC84 \uC5F0\uACB0 \uBD88\uAC00"),i([]))))}sendMessage(e){return this.http.post(`${this.baseUrl}/messages`,e).pipe(o(t=>console.log("\u{1F4E1} \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC:",t)),a(t=>(console.log("\uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC2E4\uD328 - \uC11C\uBC84 \uC5F0\uACB0 \uBD88\uAC00"),i(null))))}markAsRead(e,t,s){return this.http.post(`${this.baseUrl}/messages/mark-as-read`,{roomId:e,userId:t,userType:s})}syncMessageForms(e,t,s){return this.http.post(`${this.baseUrl}/messages/${t}/forms`,{roomId:e,forms:s})}updateClient(e,t){return this.http.patch(`${this.baseUrl}/clients/${e}`,t)}updateClientData(e,t,s){return this.http.patch(`${this.baseUrl}/clients/${t}/data`,h({roomId:e},s))}transferToAgent(e){return this.http.post(`${this.baseUrl}/transfer-to-human`,{roomId:e})}getAgentRooms(e,t){let s=new g;return t&&(s=s.set("status",t)),this.http.get(`${this.baseUrl}/agent/rooms/organization/${e}`,{params:s})}assignAgent(e,t){return this.http.patch(`${this.baseUrl}/rooms/${e}/assign`,{agentId:t})}getWaitingRooms(e){return this.http.get(`${this.baseUrl}/rooms/waiting`,{params:new g().set("storeId",e)})}static \u0275fac=function(t){return new(t||l)(c(d))};static \u0275prov=p({token:l,factory:l.\u0275fac,providedIn:"root"})};export{b as a,I as b,u as c};
