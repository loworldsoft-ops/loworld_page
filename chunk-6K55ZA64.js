import{a as xt,b as vt,c as Mt}from"./chunk-SF2OVJEZ.js";import{b as I,c as yt}from"./chunk-MFFC5IMK.js";import{b as ft}from"./chunk-V7YY2L3L.js";import{a as ut,b as bt}from"./chunk-UQGXXO52.js";import{a as Ct}from"./chunk-5UIMZFHZ.js";import{a as Ot}from"./chunk-XRVTMXYW.js";import"./chunk-YEEPMWEI.js";import{d as ht}from"./chunk-BSKGBRCR.js";import{d as ct}from"./chunk-MNKRZP7T.js";import{a as pt}from"./chunk-XD5WRJ26.js";import{b as _t}from"./chunk-JOEASKFR.js";import{l as rt,p as lt,s as dt,t as mt,u as gt}from"./chunk-26SHGXXT.js";import{a as Z}from"./chunk-QNKFZVMU.js";import{aa as tt,ga as et,ha as it,ia as nt,ja as ot,ka as at,la as st,w as J}from"./chunk-R3X7UJ7J.js";import{D as H,H as U,K,Z as Y,_ as X,d as W,e as G,ea as k,o as q}from"./chunk-ARY6345B.js";import{$b as R,Kb as m,Lb as i,Mb as n,Nb as P,Oc as Q,Rb as C,Vb as b,Wb as l,Za as c,_ as x,_b as D,ac as T,ca as y,cb as A,gc as M,ha as _,ia as p,jb as L,jc as o,kb as v,kc as O,lc as h,mc as N,pb as u,pc as V,qc as $,rc as j}from"./chunk-WMBKZIN6.js";import{a as z,b as F,e as f}from"./chunk-JKOY2XUY.js";var Pt=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=v({type:a});static \u0275inj=x({imports:[J,tt,it,ct,I]})}return a})();var It=["messagesContainer"];function St(a,e){a&1&&(i(0,"div",7)(1,"div",8)(2,"div",9)(3,"mat-icon"),o(4,"chat_bubble_outline"),n()(),i(5,"h1"),o(6,"\uCC44\uD305\uC0C1\uB2F4\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4"),n(),i(7,"p",10),o(8," \uCC44\uD305\uC0C1\uB2F4 \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 \uAE00\uB85C\uBC8C \uB124\uBE44\uAC8C\uC774\uD130\uC5D0\uC11C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694. "),n(),i(9,"div",11)(10,"div",12)(11,"span",13),o(12,"1"),n(),i(13,"span",14),o(14,"\uC6B0\uCE21 \uC0C1\uB2E8 "),i(15,"strong"),o(16,"\u2699\uFE0F \uBC84\uD2BC"),n(),o(17," \uD074\uB9AD"),n()(),i(18,"div",12)(19,"span",13),o(20,"2"),n(),i(21,"span",14)(22,"strong"),o(23,"\uAE00\uB85C\uBC8C \uAE30\uB2A5"),n(),o(24," \uD0ED \uC120\uD0DD"),n()(),i(25,"div",12)(26,"span",13),o(27,"3"),n(),i(28,"span",14)(29,"strong"),o(30,"\uCC44\uD305\uC0C1\uB2F4 \uD65C\uC131\uD654"),n(),o(31," \uD1A0\uAE00 ON"),n()()(),i(32,"div",15)(33,"mat-icon"),o(34,"info"),n(),i(35,"span"),o(36,"\uD65C\uC131\uD654 \uD6C4 \uC790\uB3D9\uC73C\uB85C \uB300\uC2DC\uBCF4\uB4DC\uAC00 \uB85C\uB4DC\uB429\uB2C8\uB2E4"),n()()()())}function Et(a,e){if(a&1){let t=C();i(0,"div",16)(1,"div",17),P(2,"span",18),i(3,"span",19),o(4),n()(),i(5,"div",20),o(6),n(),i(7,"button",21),b("click",function(){_(t);let r=l();return p(r.testSocketConnection())}),i(8,"mat-icon"),o(9,"bug_report"),n(),o(10," \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 "),n()()}if(a&2){let t=l();M("connected",t.socketService.isConnected())("disconnected",!t.socketService.isConnected()),c(4),h(" ",t.socketService.isConnected()?"\u{1F7E2} \uC2E4\uC2DC\uAC04 \uC5F0\uACB0\uB428":"\u{1F534} \uC5F0\uACB0 \uB04A\uAE40"," "),c(2),N(" \uC0C1\uB2F4\uC6D0: ",t.agentName," | \uC870\uC9C1: ",t.organizationId," ")}}function At(a,e){a&1&&(i(0,"div",22)(1,"div",23)(2,"mat-icon",24),o(3,"refresh"),n(),i(4,"p"),o(5,"\uB300\uC2DC\uBCF4\uB4DC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."),n()()())}function Lt(a,e){if(a&1){let t=C();i(0,"div",25)(1,"mat-icon"),o(2,"error_outline"),n(),i(3,"span"),o(4),n(),i(5,"button",26),b("click",function(){_(t);let r=l();return p(r.ngOnInit())}),i(6,"mat-icon"),o(7,"refresh"),n()()()}if(a&2){let t=l();c(4),O(t.error)}}function Dt(a,e){if(a&1){let t=C();i(0,"div",42)(1,"div",43),P(2,"div",44)(3,"div",45),i(4,"mat-icon",46),o(5,"verified"),n()(),i(6,"div",47)(7,"h2"),o(8,"\u{1F389} \uBAA8\uB4E0 \uC0C1\uB2F4\uC774 \uCC98\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),n(),i(9,"p"),o(10,"\uC0C8\uB85C\uC6B4 \uC0C1\uB2F4 \uC694\uCCAD\uC744 \uAE30\uB2E4\uB9AC\uACE0 \uC788\uC2B5\uB2C8\uB2E4"),n(),i(11,"div",48)(12,"div",49)(13,"mat-icon"),o(14,"schedule"),n(),i(15,"span"),o(16,"\uB300\uAE30: "),i(17,"strong"),o(18,"0"),n()()(),i(19,"div",49)(20,"mat-icon"),o(21,"support_agent"),n(),i(22,"span"),o(23,"\uC628\uB77C\uC778"),n()(),i(24,"div",49)(25,"mat-icon"),o(26,"timer"),n(),i(27,"span"),o(28,"\uC751\uB2F5\uC2DC\uAC04: "),i(29,"strong"),o(30,"<2\uBD84"),n()()()(),i(31,"div",50)(32,"button",51),b("click",function(){_(t);let r=l(2);return p(r.loadRooms())}),i(33,"mat-icon"),o(34,"refresh"),n(),o(35," \uC0C8\uB85C\uACE0\uCE68 "),n(),i(36,"button",51),b("click",function(){_(t);let r=l(2);return p(r.openTestGuide())}),i(37,"mat-icon"),o(38,"help_outline"),n(),o(39," \uD14C\uC2A4\uD2B8 \uBC29\uBC95 "),n()()()()}}function Rt(a,e){if(a&1&&(i(0,"span",63),o(1),n()),a&2){let t=l().$implicit;c(),h(" (",t.client==null||t.client.sessionId==null?null:t.client.sessionId.substring(0,8),"...) ")}}function Tt(a,e){if(a&1){let t=C();i(0,"div",54),b("click",function(){let r=_(t).$implicit,g=l(3);return p(g.selectRoom(r))}),i(1,"div",55)(2,"div",56)(3,"mat-icon"),o(4,"person"),n()(),i(5,"div",57)(6,"div",58),o(7),u(8,Rt,2,1,"span",59),n(),i(9,"div",60)(10,"span",61),o(11),n(),o(12),n()(),i(13,"button",62),b("click",function(r){let g=_(t).$implicit;return l(3).acceptRequest(g),p(r.stopPropagation())}),i(14,"mat-icon"),o(15,"check"),n()()()()}if(a&2){let t=e.$implicit,s=l(3);M("selected",(s.selectedRoom==null?null:s.selectedRoom.id)===t.id),c(7),h(" ID: ",t.clientId," "),c(),m("ngIf",t.client==null?null:t.client.sessionId),c(3),O((t.client==null?null:t.client.name)||"\uC775\uBA85"),c(),h(" ",s.formatTime(t.lastQueuedAt||t.updatedAt)," ")}}function Bt(a,e){if(a&1&&(i(0,"div",52),u(1,Tt,16,6,"div",53),n()),a&2){let t=l(2);c(),m("ngForOf",t.waitingRooms)}}function zt(a,e){a&1&&(i(0,"div",64)(1,"mat-icon"),o(2,"check_circle_outline"),n(),i(3,"p"),o(4,"\uB300\uAE30\uC911\uC778 \uC0C1\uB2F4\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),n()())}function Ft(a,e){if(a&1&&(i(0,"span",63),o(1),n()),a&2){let t=l().$implicit;c(),h(" (",t.client==null||t.client.sessionId==null?null:t.client.sessionId.substring(0,8),"...) ")}}function Nt(a,e){if(a&1&&(i(0,"div",68),o(1),n()),a&2){let t=l().$implicit;c(),h(" ",t.unreadCount," ")}}function Vt(a,e){if(a&1){let t=C();i(0,"div",66),b("click",function(){let r=_(t).$implicit,g=l(3);return p(g.selectRoom(r))}),i(1,"div",55)(2,"div",56)(3,"mat-icon"),o(4,"person"),n()(),i(5,"div",57)(6,"div",58),o(7),u(8,Ft,2,1,"span",59),n(),i(9,"div",60)(10,"span",61),o(11),n(),o(12),n()(),u(13,Nt,2,1,"div",67),n()()}if(a&2){let t=e.$implicit,s=l(3);M("selected",(s.selectedRoom==null?null:s.selectedRoom.id)===t.id),c(7),h(" ID: ",t.clientId," "),c(),m("ngIf",t.client==null?null:t.client.sessionId),c(3),O((t.client==null?null:t.client.name)||"\uC775\uBA85"),c(),h(" ",s.formatTime(t.lastMessageAt||t.updatedAt)," "),c(),m("ngIf",t.unreadCount&&t.unreadCount>0)}}function $t(a,e){if(a&1&&(i(0,"div",52),u(1,Vt,14,7,"div",65),n()),a&2){let t=l(2);c(),m("ngForOf",t.activeRooms)}}function jt(a,e){a&1&&(i(0,"div",64)(1,"mat-icon"),o(2,"chat_bubble_outline"),n(),i(3,"p"),o(4,"\uC9C4\uD589\uC911\uC778 \uC0C1\uB2F4\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),n()())}function Qt(a,e){a&1&&(i(0,"div",69)(1,"mat-icon"),o(2,"chat_bubble_outline"),n(),i(3,"h3"),o(4,"\uC0C1\uB2F4\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694"),n(),i(5,"p"),o(6,"\uC67C\uCABD\uC5D0\uC11C \uC0C1\uB2F4\uC744 \uC120\uD0DD\uD558\uAC70\uB098 \uB300\uAE30\uC911\uC778 \uC0C1\uB2F4\uC744 \uC218\uB77D\uD574\uC8FC\uC138\uC694."),n()())}function Wt(a,e){if(a&1&&(i(0,"span",93),o(1),n()),a&2){let t=l(3);c(),h(" (",t.selectedRoom.client==null||t.selectedRoom.client.sessionId==null?null:t.selectedRoom.client.sessionId.substring(0,12),"...) ")}}function Gt(a,e){if(a&1&&(i(0,"span",94)(1,"mat-icon"),o(2,"fingerprint"),n(),o(3),n()),a&2){let t=l(3);c(3),h(" Session: ",t.selectedRoom.client==null||t.selectedRoom.client.sessionId==null?null:t.selectedRoom.client.sessionId.substring(0,8)," ")}}function qt(a,e){if(a&1&&(i(0,"span")(1,"mat-icon"),o(2,"email"),n(),o(3),n()),a&2){let t=l(3);c(3),h(" ",t.currentClient.email," ")}}function Ht(a,e){if(a&1&&(i(0,"span")(1,"mat-icon"),o(2,"phone"),n(),o(3),n()),a&2){let t=l(3);c(3),h(" ",t.currentClient.phone," ")}}function Ut(a,e){a&1&&(i(0,"div",95)(1,"mat-icon",96),o(2,"chat_bubble_outline"),n(),i(3,"p",97),o(4,"\uBA54\uC2DC\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),n(),i(5,"p",98),o(6,"\uCCAB \uBA54\uC2DC\uC9C0\uB97C \uBCF4\uB0B4\uBCF4\uC138\uC694!"),n()())}function Kt(a,e){if(a&1&&(i(0,"div",99)(1,"div",100)(2,"div",101),o(3),n(),i(4,"div",102),o(5),n()()()),a&2){let t=e.$implicit,s=l(3);M("client-message",t.senderType===s.SenderType.CLIENT)("agent-message",t.senderType===s.SenderType.AGENT)("bot-message",t.senderType===s.SenderType.BOT)("system-message",t.senderType===s.SenderType.SYSTEM),c(3),O(t.content),c(2),O(s.formatTime(t.createdAt))}}function Yt(a,e){a&1&&(i(0,"div",103)(1,"div",104),P(2,"span")(3,"span")(4,"span"),n(),i(5,"span",105),o(6,"\uACE0\uAC1D\uC774 \uC785\uB825\uC911..."),n()())}function Xt(a,e){if(a&1){let t=C();i(0,"div",70)(1,"div",71)(2,"div",72)(3,"div",73)(4,"mat-icon"),o(5,"person"),n()(),i(6,"div",74)(7,"h3"),o(8),u(9,Wt,2,1,"span",75),n(),i(10,"div",76)(11,"span",77)(12,"mat-icon"),o(13,"person_outline"),n(),o(14),n(),u(15,Gt,4,1,"span",78)(16,qt,4,1,"span",79)(17,Ht,4,1,"span",79),n()()(),i(18,"div",80)(19,"button",81)(20,"mat-icon"),o(21,"info"),n()(),i(22,"button",82),b("click",function(){_(t);let r=l(2);return p(r.closeRoom())}),i(23,"mat-icon"),o(24,"close"),n()()()(),i(25,"div",83,0),u(27,Ut,7,0,"div",84)(28,Kt,6,10,"div",85)(29,Yt,7,0,"div",86),n(),i(30,"div",87)(31,"div",88)(32,"button",89)(33,"mat-icon"),o(34,"attach_file"),n()(),i(35,"button",90)(36,"mat-icon"),o(37,"image"),n()()(),i(38,"textarea",91),j("ngModelChange",function(r){_(t);let g=l(2);return $(g.messageInput,r)||(g.messageInput=r),p(r)}),b("keydown",function(r){_(t);let g=l(2);return p(g.onKeyPress(r))})("input",function(){_(t);let r=l(2);return p(r.onTyping())}),n(),i(39,"button",92),b("click",function(){_(t);let r=l(2);return p(r.sendMessage())}),i(40,"mat-icon"),o(41,"send"),n()()()()}if(a&2){let t=l(2);c(8),h(" ID: ",t.selectedRoom.clientId," "),c(),m("ngIf",t.selectedRoom.client==null?null:t.selectedRoom.client.sessionId),c(5),h(" ",(t.selectedRoom.client==null?null:t.selectedRoom.client.name)||"\uC775\uBA85 \uC0AC\uC6A9\uC790"," "),c(),m("ngIf",t.selectedRoom.client==null?null:t.selectedRoom.client.sessionId),c(),m("ngIf",t.currentClient&&t.currentClient.email),c(),m("ngIf",t.currentClient&&t.currentClient.phone),c(10),m("ngIf",t.messages.length===0),c(),m("ngForOf",t.messages)("ngForTrackBy",t.trackByMessageId),c(),m("ngIf",t.isTyping),c(9),V("ngModel",t.messageInput),c(),m("disabled",!t.messageInput.trim())}}function Zt(a,e){if(a&1){let t=C();i(0,"div",27),u(1,Dt,40,0,"div",28),i(2,"div",29)(3,"div",30)(4,"h2"),o(5,"\uC0C1\uB2F4 \uBAA9\uB85D"),n(),i(6,"button",31),b("click",function(){_(t);let r=l();return p(r.loadRooms())}),i(7,"mat-icon"),o(8,"refresh"),n()()(),i(9,"div",32)(10,"div",33)(11,"mat-icon",34),o(12,"schedule"),n(),i(13,"h3"),o(14),n(),i(15,"button",35),b("click",function(){_(t);let r=l();return p(r.deleteAllWaitingRooms())}),i(16,"mat-icon"),o(17,"delete_sweep"),n()()(),u(18,Bt,2,1,"div",36)(19,zt,5,0,"div",37),n(),i(20,"div",32)(21,"div",33)(22,"mat-icon",38),o(23,"chat"),n(),i(24,"h3"),o(25),n()(),u(26,$t,2,1,"div",36)(27,jt,5,0,"div",37),n()(),i(28,"div",39),u(29,Qt,7,0,"div",40)(30,Xt,42,12,"div",41),n()()}if(a&2){let t=l();c(),m("ngIf",t.waitingRooms.length===0&&t.activeRooms.length===0),c(13),h("\uB300\uAE30\uC911 (",t.waitingRooms.length,")"),c(),m("disabled",t.waitingRooms.length===0),c(3),m("ngIf",t.waitingRooms.length>0),c(),m("ngIf",t.waitingRooms.length===0),c(6),h("\uC9C4\uD589\uC911 (",t.activeRooms.length,")"),c(),m("ngIf",t.activeRooms.length>0),c(),m("ngIf",t.activeRooms.length===0),c(2),m("ngIf",!t.selectedRoom),c(),m("ngIf",t.selectedRoom)}}var S=class a{constructor(e,t){this.apiService=e;this.socketService=t}messagesContainer;agentId="agent-1";agentName="\uC0C1\uB2F4\uC6D0";organizationId="store-platform";waitingRooms=[];activeRooms=[];allRooms=[];selectedRoom;messages=[];currentClient;loading=!0;error=null;messageInput="";isTyping=!1;typingTimeout;subscriptions=[];socketStatusInterval;RoomStatus=xt;SenderType=vt;debugLogger=y(Z);snackBar=y(pt);cdr=y(Q);chatConsultationToggle=y(Ct);ngOnInit(){return f(this,null,function*(){if(this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u{1F680} \uC0C1\uB2F4\uC6D0 \uB300\uC2DC\uBCF4\uB4DC \uCD08\uAE30\uD654 \uC2DC\uC791"),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC",`\uC0C1\uB2F4\uC6D0 \uC815\uBCF4: ${this.agentName} (ID: ${this.agentId})`),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC",`\uC870\uC9C1 ID: ${this.organizationId}`),!this.chatConsultationToggle.isEnabled()){this.debugLogger.warn("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u26A0\uFE0F \uCC44\uD305\uC0C1\uB2F4\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4"),this.loading=!1;return}try{this.loading=!0,this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u{1F50C} WebSocket \uC5F0\uACB0 \uC2DC\uC791"),yield this.connectWebSocket(),yield this.loadRooms(),this.debugLogger.success("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u2705 \uB300\uC2DC\uBCF4\uB4DC \uCD08\uAE30\uD654 \uC644\uB8CC"),this.loading=!1}catch(e){console.error("\uB300\uC2DC\uBCF4\uB4DC \uCD08\uAE30\uD654 \uC2E4\uD328:",e),this.debugLogger.error("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC",`\u274C \uCD08\uAE30\uD654 \uC2E4\uD328: ${e?.message||e}`),this.debugLogger.warn("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u26A0\uFE0F \uC77C\uBD80 \uAE30\uB2A5\uC774 \uC81C\uD55C\uB420 \uC218 \uC788\uC9C0\uB9CC \uB300\uC2DC\uBCF4\uB4DC\uB294 \uACC4\uC18D \uC0AC\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4"),e?.status!==404&&e?.status!==500?this.error="\uB300\uC2DC\uBCF4\uB4DC\uB97C \uBD88\uB7EC\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.":this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u{1F4A1} \uBC31\uC5D4\uB4DC API\uAC00 \uAD6C\uD604\uB418\uBA74 \uC790\uB3D9\uC73C\uB85C \uC5F0\uACB0\uB429\uB2C8\uB2E4"),this.loading=!1}})}ngOnDestroy(){this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u{1F50C} WebSocket \uC5F0\uACB0 \uD574\uC81C"),this.socketStatusInterval&&clearInterval(this.socketStatusInterval),this.socketService.disconnect(),this.subscriptions.forEach(e=>e.unsubscribe())}connectWebSocket(){return f(this,null,function*(){this.debugLogger.info("WebSocket","\u{1F50C} WebSocket \uC5F0\uACB0 \uC2DC\uC791");try{yield this.socketService.connect(),this.debugLogger.success("WebSocket","\u2705 WebSocket \uC5F0\uACB0 \uC644\uB8CC"),this.debugLogger.info("WebSocket",`\u{1F4DD} \uC0C1\uB2F4\uC6D0 \uB4F1\uB85D - agentId: ${this.agentId}, orgId: ${this.organizationId}`),this.socketService.registerAgent(this.agentId,this.organizationId),this.socketService.onAnyEvent((d,w)=>{console.log(`\u{1F3AF} [\uC18C\uCF13 \uC774\uBCA4\uD2B8 \uC218\uC2E0] ${d}:`,w),this.debugLogger.info("\uC774\uBCA4\uD2B8\uC218\uC2E0",`\u{1F3AF} ${d}`)})}catch(d){this.debugLogger.error("WebSocket",`\u274C WebSocket \uC5F0\uACB0 \uC2E4\uD328: ${d}`),console.error("WebSocket \uC5F0\uACB0 \uC2E4\uD328:",d)}let e=this.socketService.onEvent("newSupportRequest").subscribe(d=>{console.log("\u{1F514}\u{1F514}\u{1F514} newSupportRequest \uC774\uBCA4\uD2B8 \uC218\uC2E0!!!",d),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC","\u{1F514} \uC0C8 \uC0C1\uB2F4 \uC694\uCCAD \uC218\uC2E0!"),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC",`\u{1F4CA} roomId: ${d?.room?.id}`),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC",`\u{1F464} clientId: ${d?.room?.clientId}`),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC",`\u{1F4CC} status: ${d?.room?.status}`),this.handleNewSupportRequest(d.room)}),t=this.socketService.onEvent("createChat").subscribe(d=>{d?.chat&&(this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC218\uC2E0",`\u{1F4AC} \uC0C8 \uBA54\uC2DC\uC9C0 (createChat) - ${d.chat.senderType}: ${d.chat.content?.substring(0,20)}...`),this.handleNewMessage(d.chat))}),s=this.socketService.onEvent("assignAgentSuccess").subscribe(d=>f(this,null,function*(){if(this.debugLogger.success("WebSocket",`\u2705 \uC0C1\uB2F4 \uC218\uB77D \uC131\uACF5 - roomId: ${d?.roomId}`),yield this.loadRooms(),d?.roomId){let w=this.allRooms.find(wt=>wt.id===d.roomId);w&&(yield this.selectRoom(w))}})),r=this.socketService.onEvent("clientTyping").subscribe(d=>{this.debugLogger.info("WebSocket",`\u270D\uFE0F \uACE0\uAC1D \uD0C0\uC774\uD551 \uC911 - roomId: ${d?.roomId}`),this.handleClientTyping(d)}),g=this.socketService.onEvent("roomClosed").subscribe(d=>{this.debugLogger.info("WebSocket",`\u{1F6AA} \uCC44\uD305\uBC29 \uC885\uB8CC - roomId: ${d?.roomId}`),this.handleRoomClosed(d.roomId)});this.subscriptions.push(e,t,s,r,g),this.debugLogger.info("WebSocket","\u{1F4E1} \uC774\uBCA4\uD2B8 \uB9AC\uC2A4\uB108 \uB4F1\uB85D \uC644\uB8CC"),this.debugLogger.info("WebSocket","\u{1F3AF} \uC774\uBCA4\uD2B8 \uC218\uC2E0 \uB300\uAE30 \uC911...")})}loadRooms(){return f(this,null,function*(){this.debugLogger.info("\uCC44\uD305\uBC29\uBAA9\uB85D","\u{1F4CB} \uCC44\uD305\uBC29 \uBAA9\uB85D \uB85C\uB4DC \uC2DC\uC791"),this.debugLogger.info("\uCC44\uD305\uBC29\uBAA9\uB85D",`API \uD638\uCD9C: GET /channeltalk/agent/rooms/organization/${this.organizationId}`);try{let e=yield this.apiService.getAgentRooms(this.organizationId).toPromise();this.allRooms=e||[],this.allRooms.length>0&&(console.log("\u{1F4CA} \uCC44\uD305\uBC29 \uB370\uC774\uD130 \uC0D8\uD50C:",this.allRooms[0]),console.log("\u{1F464} \uACE0\uAC1D \uC815\uBCF4:",this.allRooms[0]?.client)),this.categorizeRooms(),this.debugLogger.success("\uCC44\uD305\uBC29\uBAA9\uB85D",`\u2705 \uCC44\uD305\uBC29 \uB85C\uB4DC \uC644\uB8CC - \uB300\uAE30: ${this.waitingRooms.length}\uAC1C, \uC9C4\uD589: ${this.activeRooms.length}\uAC1C, \uC804\uCCB4: ${this.allRooms.length}\uAC1C`)}catch(e){if(this.debugLogger.error("\uCC44\uD305\uBC29\uBAA9\uB85D",`\u274C \uCC44\uD305\uBC29 \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328: ${e?.status} - ${e?.message}`),this.debugLogger.info("\uCC44\uD305\uBC29\uBAA9\uB85D",`\uC5D0\uB7EC \uC0C1\uC138: ${JSON.stringify(e?.error||{})}`),e?.status===404||e?.status===500)this.debugLogger.warn("\uCC44\uD305\uBC29\uBAA9\uB85D","\u26A0\uFE0F \uBC31\uC5D4\uB4DC API \uBBF8\uAD6C\uD604 - \uBE48 \uBAA9\uB85D\uC73C\uB85C \uACC4\uC18D \uC9C4\uD589"),this.debugLogger.info("\uCC44\uD305\uBC29\uBAA9\uB85D","\u{1F4A1} CHAT_BACKEND_CONNECTION_GUIDE.md \uBB38\uC11C\uB97C \uCC38\uACE0\uD558\uC5EC \uBC31\uC5D4\uB4DC API\uB97C \uAD6C\uD604\uD558\uC138\uC694"),this.allRooms=[],this.categorizeRooms();else throw e}})}categorizeRooms(){this.waitingRooms=this.allRooms.filter(e=>e.status==="waiting_agent"),this.activeRooms=this.allRooms.filter(e=>e.status==="agent_active"&&e.agentId===this.agentId),this.debugLogger.info("\uCC44\uD305\uBC29\uBAA9\uB85D",`\u{1F4CA} \uCC44\uD305\uBC29 \uBD84\uB958 \uC644\uB8CC - \uB300\uAE30: ${this.waitingRooms.length}, \uC9C4\uD589: ${this.activeRooms.length}`)}selectRoom(e){return f(this,null,function*(){this.debugLogger.info("\uCC44\uD305\uBC29\uC120\uD0DD",`\u{1F4CC} \uCC44\uD305\uBC29 \uC120\uD0DD - roomId: ${e.id}, \uC0C1\uD0DC: ${e.status}`),console.log("\u{1F50D} selectRoom \uD638\uCD9C\uB428 - room:",e);try{this.selectedRoom=e,this.currentClient=e.client,this.messages=[],this.cdr.detectChanges(),console.log("\u2705 selectedRoom \uC124\uC815 \uC644\uB8CC:",this.selectedRoom),console.log("\u2705 Change Detection \uD2B8\uB9AC\uAC70 \uC644\uB8CC"),this.debugLogger.info("\uCC44\uD305\uBC29\uC120\uD0DD","\u2705 \uCC44\uD305\uBC29 UI \uD45C\uC2DC \uC644\uB8CC");try{yield this.loadMessages(e.id),this.cdr.detectChanges()}catch(t){console.error("\uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC2E4\uD328 (\uBB34\uC2DC):",t),this.debugLogger.warn("\uCC44\uD305\uBC29\uC120\uD0DD",`\u26A0\uFE0F \uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589): ${t}`)}try{yield this.markAsRead(e.id)}catch(t){console.error("\uC77D\uC74C \uCC98\uB9AC \uC2E4\uD328 (\uBB34\uC2DC):",t),this.debugLogger.warn("\uCC44\uD305\uBC29\uC120\uD0DD",`\u26A0\uFE0F \uC77D\uC74C \uCC98\uB9AC \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589): ${t}`)}try{this.socketService.emitEvent("joinRoom",{roomId:e.id}),this.debugLogger.info("\uCC44\uD305\uBC29\uC120\uD0DD",`\u{1F50C} Socket Room \uCC38\uAC00 - roomId: ${e.id}`)}catch(t){console.error("Socket Room \uCC38\uAC00 \uC2E4\uD328 (\uBB34\uC2DC):",t),this.debugLogger.warn("\uCC44\uD305\uBC29\uC120\uD0DD",`\u26A0\uFE0F Socket Room \uCC38\uAC00 \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589): ${t}`)}setTimeout(()=>this.scrollToBottom(),100),this.debugLogger.success("\uCC44\uD305\uBC29\uC120\uD0DD","\u2705 \uCC44\uD305\uBC29 \uC120\uD0DD \uC644\uB8CC")}catch(t){console.error("\uCC44\uD305\uBC29 \uC120\uD0DD \uC2E4\uD328:",t),this.debugLogger.error("\uCC44\uD305\uBC29\uC120\uD0DD",`\u274C \uCC44\uD305\uBC29 \uC120\uD0DD \uC2E4\uD328: ${t}`),this.selectedRoom||(this.selectedRoom=e,this.currentClient=e.client,this.cdr.detectChanges())}})}loadMessages(e){return f(this,null,function*(){this.debugLogger.info("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u{1F4E8} \uBA54\uC2DC\uC9C0 \uC870\uD68C - roomId: ${e}`);try{let t=yield this.apiService.getRoomMessages(e,100).toPromise();this.messages=t||[],this.debugLogger.success("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u2705 \uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC644\uB8CC: ${this.messages.length}\uAC1C`)}catch(t){console.error("\uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC2E4\uD328:",t),this.debugLogger.error("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u274C \uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC2E4\uD328: ${t}`),this.messages=[]}})}markAsRead(e){return f(this,null,function*(){try{yield this.apiService.markAsRead(e,this.agentId,"agent").toPromise();let t=this.allRooms.find(s=>s.id===e);t&&(t.unreadCount=0),this.debugLogger.info("\uBA54\uC2DC\uC9C0\uB85C\uB4DC","\u2705 \uC77D\uC74C \uCC98\uB9AC \uC644\uB8CC")}catch(t){this.debugLogger.error("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u274C \uC77D\uC74C \uCC98\uB9AC \uC2E4\uD328: ${t.status} ${t.statusText}`),this.debugLogger.error("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`URL: ${t.url}`),this.debugLogger.error("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\uC0C1\uC138: ${JSON.stringify(t.error||{})}`),t.status!==404&&console.error("\uC77D\uC74C \uCC98\uB9AC \uC2E4\uD328 (\uC804\uCCB4):",t)}})}acceptRequest(e){return f(this,null,function*(){this.debugLogger.info("\uC0C1\uB2F4\uC218\uB77D",`\u{1F64B} \uC0C1\uB2F4 \uC218\uB77D - roomId: ${e.id}`),console.log("\u{1F50D} acceptRequest \uD638\uCD9C\uB428 - room:",e);try{this.socketService.assignAgent(e.id,this.agentId),this.debugLogger.success("\uC0C1\uB2F4\uC218\uB77D","\u2705 \uC0C1\uB2F4\uC6D0 \uBC30\uC815 \uC644\uB8CC"),console.log("\u2705 assignAgent \uC644\uB8CC");let t=F(z({},e),{status:"agent_active",agentId:this.agentId});console.log("\u{1F504} updatedRoom \uC0DD\uC131:",t),this.updateRoomInList(t),this.categorizeRooms(),console.log("\u{1F4CA} \uCC44\uD305\uBC29 \uBAA9\uB85D \uC7AC\uBD84\uB958 \uC644\uB8CC"),console.log("\uB300\uAE30:",this.waitingRooms.length,"\uC9C4\uD589:",this.activeRooms.length),console.log("\u{1F3AF} selectRoom \uD638\uCD9C \uC2DC\uC791"),yield this.selectRoom(t),console.log("\u2705 selectRoom \uC644\uB8CC - selectedRoom:",this.selectedRoom),this.debugLogger.info("\uC0C1\uB2F4\uC218\uB77D","\u{1F4E1} \uACE0\uAC1D\uC5D0\uAC8C \uBC30\uC815 \uC54C\uB9BC \uC804\uC1A1"),this.snackBar.open("\uC0C1\uB2F4\uC774 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uB2EB\uAE30",{duration:2e3,panelClass:["success-snackbar"]})}catch(t){console.error("\u274C \uC0C1\uB2F4 \uC218\uB77D \uC2E4\uD328:",t),this.debugLogger.error("\uC0C1\uB2F4\uC218\uB77D",`\u274C \uC0C1\uB2F4 \uC218\uB77D \uC2E4\uD328: ${t}`),this.snackBar.open("\uC0C1\uB2F4 \uC218\uB77D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uB2EB\uAE30",{duration:3e3})}})}deleteAllWaitingRooms(){return f(this,null,function*(){if(confirm(`\uB300\uAE30 \uC911\uC778 ${this.waitingRooms.length}\uAC1C\uC758 \uCC44\uD305\uBC29\uC744 \uBAA8\uB450 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)){this.debugLogger.info("\uCC44\uD305\uBC29\uC0AD\uC81C",`\u{1F5D1}\uFE0F \uB300\uAE30 \uC911\uC778 \uCC44\uD305\uBC29 \uC0AD\uC81C \uC2DC\uC791 (${this.waitingRooms.length}\uAC1C)`);try{let t=yield this.apiService.deleteWaitingRooms(this.organizationId).toPromise();t&&(this.debugLogger.success("\uCC44\uD305\uBC29\uC0AD\uC81C",`\u2705 ${t.deletedCount}\uAC1C \uCC44\uD305\uBC29 \uC0AD\uC81C \uC644\uB8CC`),yield this.loadRooms(),this.selectedRoom&&this.waitingRooms.some(s=>s.id===this.selectedRoom?.id)&&(this.selectedRoom=void 0,this.messages=[]),this.snackBar.open(`${t.deletedCount}\uAC1C\uC758 \uB300\uAE30 \uC911\uC778 \uCC44\uD305\uBC29\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}))}catch(t){console.error("\uB300\uAE30 \uC911\uC778 \uCC44\uD305\uBC29 \uC0AD\uC81C \uC2E4\uD328:",t),this.debugLogger.error("\uCC44\uD305\uBC29\uC0AD\uC81C",`\u274C \uCC44\uD305\uBC29 \uC0AD\uC81C \uC2E4\uD328: ${t}`),this.snackBar.open("\uCC44\uD305\uBC29 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uB2EB\uAE30",{duration:3e3})}}})}sendMessage(){return f(this,null,function*(){if(!this.messageInput.trim()||!this.selectedRoom){this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u26A0\uFE0F \uBA54\uC2DC\uC9C0 \uB0B4\uC6A9 \uB610\uB294 \uCC44\uD305\uBC29 \uC815\uBCF4 \uC5C6\uC74C");return}let e=this.messageInput.trim(),t=this.selectedRoom.id;this.messageInput="",this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u{1F4E4} \uBA54\uC2DC\uC9C0 \uC804\uC1A1 - "${e.substring(0,30)}..."`),console.log("\u{1F4E4} \uBA54\uC2DC\uC9C0 \uC804\uC1A1:",{roomId:t,content:e,agentId:this.agentId});let s={id:`temp-${Date.now()}`,roomId:t,senderId:this.agentId,senderType:"agent",content:e,createdAt:new Date};this.messages.push(s),this.cdr.detectChanges(),setTimeout(()=>this.scrollToBottom(),50),console.log("\u2705 \uBA54\uC2DC\uC9C0\uB97C \uD654\uBA74\uC5D0 \uCD94\uAC00\uD568 (\uB099\uAD00\uC801 UI)");try{let r=yield this.apiService.sendMessage({roomId:t,senderId:this.agentId,senderType:"agent",content:e}).toPromise();if(console.log("\u2705 API \uC751\uB2F5:",r),r){let g=this.messages.findIndex(d=>d.id===s.id);g!==-1&&(this.messages[g]=r),this.socketService.emitEvent("createChat",{dto:{roomId:t,senderId:this.agentId,senderType:"agent",content:e},localId:s.id}),this.debugLogger.success("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u2705 \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC (createChat)"),console.log("\u2705 \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC (createChat)"),setTimeout(()=>this.scrollToBottom(),50)}}catch(r){if(console.error("\u274C \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC2E4\uD328:",r),this.debugLogger.error("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u274C \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC2E4\uD328: ${r?.message||r}`),r?.status===404||r?.status===500)this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u26A0\uFE0F \uBC31\uC5D4\uB4DC API \uBBF8\uAD6C\uD604 - \uBA54\uC2DC\uC9C0\uB294 \uB85C\uCEEC\uC5D0\uB9CC \uD45C\uC2DC\uB428"),console.log("\u{1F4A1} \uBA54\uC2DC\uC9C0\uB294 \uD654\uBA74\uC5D0 \uD45C\uC2DC\uB418\uC9C0\uB9CC \uC11C\uBC84\uC5D0 \uC800\uC7A5\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."),this.socketService.emitEvent("createChat",{dto:{roomId:t,senderId:this.agentId,senderType:"agent",content:e},localId:s.id});else{let g=this.messages.findIndex(d=>d.id===s.id);g!==-1&&this.messages.splice(g,1),this.snackBar.open("\uBA54\uC2DC\uC9C0 \uC804\uC1A1\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uB2EB\uAE30",{duration:3e3})}}})}onTyping(){this.selectedRoom&&(this.socketService.emitEvent("agentTyping",{roomId:this.selectedRoom.id,agentId:this.agentId,agentName:this.agentName}),clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>{this.socketService.emitEvent("agentStoppedTyping",{roomId:this.selectedRoom.id})},1e3))}closeRoom(){return f(this,null,function*(){if(console.log("\u{1F6AA} closeRoom \uD638\uCD9C\uB428"),this.debugLogger.info("\uC0C1\uB2F4\uC885\uB8CC","\u{1F6AA} closeRoom \uBA54\uC11C\uB4DC \uC2DC\uC791"),!this.selectedRoom){console.warn("\u26A0\uFE0F selectedRoom\uC774 \uC5C6\uC74C"),this.debugLogger.warn("\uC0C1\uB2F4\uC885\uB8CC","\u26A0\uFE0F \uC120\uD0DD\uB41C \uCC44\uD305\uBC29 \uC5C6\uC74C");return}if(console.log("\u{1F4CB} \uC120\uD0DD\uB41C \uBC29:",this.selectedRoom.id),!confirm("\uC774 \uC0C1\uB2F4\uC744 \uC885\uB8CC\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")){console.log("\u274C \uC0AC\uC6A9\uC790\uAC00 \uC885\uB8CC \uCDE8\uC18C");return}this.debugLogger.info("\uC0C1\uB2F4\uC885\uB8CC",`\u{1F6AA} \uC0C1\uB2F4 \uC885\uB8CC \uC2DC\uC791 - roomId: ${this.selectedRoom.id}`),console.log("\u{1F4E4} API \uD638\uCD9C \uC900\uBE44:",this.selectedRoom.id,"resolved");try{console.log("\u{1F4E1} updateRoomStatus API \uD638\uCD9C \uC911...");let e=yield this.apiService.updateRoomStatus(this.selectedRoom.id,"resolved").toPromise();if(console.log("\u2705 API \uC751\uB2F5:",e),e){let t=this.selectedRoom.id;console.log("\u{1F4E4} roomClosed \uC774\uBCA4\uD2B8 \uBC1C\uC1A1 \uC900\uBE44:",t),this.socketService.emitEvent("roomClosed",{roomId:t}),console.log("\u2705 roomClosed \uC774\uBCA4\uD2B8 \uBC1C\uC1A1 \uC644\uB8CC"),this.debugLogger.info("\uC0C1\uB2F4\uC885\uB8CC",`\u{1F4E1} roomClosed \uC774\uBCA4\uD2B8 \uBC1C\uC1A1 - roomId: ${t}`),this.updateRoomInList(e),this.categorizeRooms(),this.debugLogger.success("\uC0C1\uB2F4\uC885\uB8CC","\u2705 \uC0C1\uB2F4 \uC885\uB8CC \uC644\uB8CC"),console.log("\u2705 \uC0C1\uB2F4 \uC885\uB8CC \uC644\uB8CC"),this.snackBar.open("\uC0C1\uB2F4\uC774 \uC885\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uB2EB\uAE30",{duration:2e3,panelClass:["success-snackbar"]}),this.selectedRoom=void 0,this.messages=[],this.currentClient=void 0}else console.warn("\u26A0\uFE0F updatedRoom\uC774 null/undefined")}catch(e){console.error("\u274C \uC0C1\uB2F4 \uC885\uB8CC \uC2E4\uD328:",e),console.error("\u274C \uC5D0\uB7EC \uC0C1\uC138:",{status:e?.status,statusText:e?.statusText,message:e?.message,error:e?.error}),this.debugLogger.error("\uC0C1\uB2F4\uC885\uB8CC",`\u274C \uC0C1\uB2F4 \uC885\uB8CC \uC2E4\uD328: ${e?.message||e}`),this.snackBar.open("\uC0C1\uB2F4 \uC885\uB8CC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uB2EB\uAE30",{duration:3e3,panelClass:["error-snackbar"]})}})}handleNewSupportRequest(e){this.debugLogger.info("\uC0C1\uB2F4\uC694\uCCAD\uCC98\uB9AC",`\u{1F195} \uC0C8 \uC0C1\uB2F4 \uC694\uCCAD \uCC98\uB9AC - roomId: ${e.id}`);let t=this.allRooms.findIndex(s=>s.id===e.id);t>=0?(this.allRooms[t]=e,this.debugLogger.info("\uC0C1\uB2F4\uC694\uCCAD\uCC98\uB9AC","\u{1F504} \uAE30\uC874 \uCC44\uD305\uBC29 \uC5C5\uB370\uC774\uD2B8")):(this.allRooms.unshift(e),this.debugLogger.info("\uC0C1\uB2F4\uC694\uCCAD\uCC98\uB9AC","\u2795 \uC0C8 \uCC44\uD305\uBC29 \uCD94\uAC00")),this.categorizeRooms(),this.showNotification("\uC0C8\uB85C\uC6B4 \uC0C1\uB2F4 \uC694\uCCAD",`${e.client?.name||"\uACE0\uAC1D"}\uB2D8\uC774 \uC0C1\uB2F4\uC744 \uC694\uCCAD\uD588\uC2B5\uB2C8\uB2E4.`),this.debugLogger.success("\uC0C1\uB2F4\uC694\uCCAD\uCC98\uB9AC","\u2705 \uC0C8 \uC0C1\uB2F4 \uC694\uCCAD \uCC98\uB9AC \uC644\uB8CC")}handleNewMessage(e){if(this.debugLogger.info("\uBA54\uC2DC\uC9C0\uCC98\uB9AC",`\u{1F4AC} \uC0C8 \uBA54\uC2DC\uC9C0 \uCC98\uB9AC - roomId: ${e.roomId}`),this.selectedRoom&&e.roomId===this.selectedRoom.id)this.messages.push(e),setTimeout(()=>this.scrollToBottom(),50),this.markAsRead(e.roomId),this.debugLogger.info("\uBA54\uC2DC\uC9C0\uCC98\uB9AC","\u2705 \uBA54\uC2DC\uC9C0 \uCD94\uAC00 \uBC0F \uC77D\uC74C \uCC98\uB9AC");else{let t=this.allRooms.find(s=>s.id===e.roomId);t&&(t.unreadCount=(t.unreadCount||0)+1,t.lastMessageAt=e.createdAt,this.debugLogger.info("\uBA54\uC2DC\uC9C0\uCC98\uB9AC",`\u{1F4EC} \uB2E4\uB978 \uCC44\uD305\uBC29 \uBA54\uC2DC\uC9C0 - \uC77D\uC9C0 \uC54A\uC74C: ${t.unreadCount}`))}}handleClientTyping(e){this.selectedRoom&&e.roomId===this.selectedRoom.id&&(this.isTyping=!0,this.debugLogger.info("\uD0C0\uC774\uD551","\u270D\uFE0F \uACE0\uAC1D\uC774 \uC785\uB825 \uC911..."),setTimeout(()=>{this.isTyping=!1},3e3))}handleRoomClosed(e){this.debugLogger.info("\uCC44\uD305\uBC29\uC885\uB8CC\uCC98\uB9AC",`\u{1F6AA} \uCC44\uD305\uBC29 \uC885\uB8CC \uCC98\uB9AC - roomId: ${e}`);let t=this.allRooms.find(s=>s.id===e);t&&(t.status="resolved",this.categorizeRooms(),this.selectedRoom?.id===e&&(this.selectedRoom=void 0,this.messages=[],this.currentClient=void 0,this.debugLogger.info("\uCC44\uD305\uBC29\uC885\uB8CC\uCC98\uB9AC","\u2705 \uC120\uD0DD\uB41C \uCC44\uD305\uBC29 \uD574\uC81C")),this.debugLogger.success("\uCC44\uD305\uBC29\uC885\uB8CC\uCC98\uB9AC","\u2705 \uCC44\uD305\uBC29 \uC885\uB8CC \uCC98\uB9AC \uC644\uB8CC"))}updateRoomInList(e){let t=this.allRooms.findIndex(s=>s.id===e.id);t>=0?(this.allRooms[t]=e,this.debugLogger.info("\uCC44\uD305\uBC29\uC5C5\uB370\uC774\uD2B8","\u{1F504} \uAE30\uC874 \uCC44\uD305\uBC29 \uC5C5\uB370\uC774\uD2B8")):(this.allRooms.push(e),this.debugLogger.info("\uCC44\uD305\uBC29\uC5C5\uB370\uC774\uD2B8","\u2795 \uC0C8 \uCC44\uD305\uBC29 \uCD94\uAC00"))}scrollToBottom(){this.messagesContainer&&(this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight)}showNotification(e,t){"Notification"in window&&Notification.permission==="granted"&&new Notification(e,{body:t})}formatTime(e){let t=new Date(e),s=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${s}:${r}`}formatDate(e){let t=new Date(e),s=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${s}/${r}`}getStatusLabel(e){switch(e){case"waiting_agent":return"\uB300\uAE30\uC911";case"agent_active":return"\uC0C1\uB2F4\uC911";case"resolved":return"\uD574\uACB0\uB428";case"closed":return"\uC885\uB8CC";default:return e}}onKeyPress(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}trackByMessageId(e,t){return t.id}openTestGuide(){let e=`
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
  \u{1F4DA} \uCC44\uD305 \uC0C1\uB2F4 \uD14C\uC2A4\uD2B8 \uAC00\uC774\uB4DC
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

\u2705 \uBC29\uBC95 1: \uC2A4\uD1A0\uC5B4\uC5D0\uC11C \uC0C1\uB2F4 \uC694\uCCAD\uD558\uAE30

1. \uC2A4\uD1A0\uC5B4 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9
   \u{1F449} \uBA54\uB274\uC5D0\uC11C "\uC2A4\uD1A0\uC5B4" \uD074\uB9AD

2. "\uACE0\uAC1D \uC9C0\uC6D0" \uBC84\uD2BC \uD074\uB9AD
   \u{1F449} \uC6B0\uCE21 \uD558\uB2E8\uC758 \uC9C0\uC6D0 \uBC84\uD2BC\uC744 \uCC3E\uC73C\uC138\uC694

3. \uC0C1\uB2F4 \uC694\uCCAD \uC791\uC131
   \u{1F449} \uBB38\uC758 \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uACE0 \uC804\uC1A1

4. \uC0C1\uB2F4\uC6D0 \uB300\uC2DC\uBCF4\uB4DC\uC5D0\uC11C \uD655\uC778
   \u{1F449} \uC774 \uD398\uC774\uC9C0\uB85C \uB3CC\uC544\uC640\uC11C \uD655\uC778

\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

\u2705 \uBC29\uBC95 2: API\uB85C \uD14C\uC2A4\uD2B8 \uB370\uC774\uD130 \uC0DD\uC131

\uD130\uBBF8\uB110\uC5D0\uC11C \uC2E4\uD589:
cd SyncBI-Station
node seed-data-via-api.js

\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

\u{1F4A1} \uCC38\uACE0\uC0AC\uD56D:
\u2022 \uBC31\uC5D4\uB4DC \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4
\u2022 organizationId\uB294 '1'\uB85C \uC124\uC815\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4
\u2022 WebSocket \uC5F0\uACB0\uC774 \uC815\uC0C1\uC774\uC5B4\uC57C \uC2E4\uC2DC\uAC04 \uC54C\uB9BC\uC774 \uC791\uB3D9\uD569\uB2C8\uB2E4

\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    `.trim();console.log(e),this.debugLogger.info("\uD14C\uC2A4\uD2B8\uAC00\uC774\uB4DC","\u{1F4D6} \uD14C\uC2A4\uD2B8 \uBC29\uBC95\uC774 \uCF58\uC194\uC5D0 \uCD9C\uB825\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.snackBar.open("\uD14C\uC2A4\uD2B8 \uBC29\uBC95\uC774 \uCF58\uC194\uC5D0 \uCD9C\uB825\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (F12 \uAC1C\uBC1C\uC790\uB3C4\uAD6C \uD655\uC778)","\uD655\uC778",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"})}testSocketConnection(){this.debugLogger.info("\uC5F0\uACB0\uD14C\uC2A4\uD2B8","\u{1F9EA} WebSocket \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2DC\uC791");let e=this.socketService.isConnected();if(this.debugLogger.info("\uC5F0\uACB0\uD14C\uC2A4\uD2B8",`\u{1F4CA} \uC5F0\uACB0 \uC0C1\uD0DC: ${e?"\u2705 \uC5F0\uACB0\uB428":"\u274C \uC5F0\uACB0 \uC548 \uB428"}`),!e){this.snackBar.open("WebSocket\uC774 \uC5F0\uACB0\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uBC31\uC5D4\uB4DC \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD558\uC138\uC694.","\uB2EB\uAE30",{duration:5e3,panelClass:["error-snackbar"]}),this.debugLogger.error("\uC5F0\uACB0\uD14C\uC2A4\uD2B8","\u274C WebSocket \uC5F0\uACB0 \uC548 \uB428");return}this.debugLogger.info("\uC5F0\uACB0\uD14C\uC2A4\uD2B8","\u{1F4E4} \uD14C\uC2A4\uD2B8 \uC774\uBCA4\uD2B8 \uC804\uC1A1 \uC911...");let t={agentId:this.agentId,organizationId:this.organizationId,timestamp:new Date().toISOString(),message:"\uC5F0\uACB0 \uD14C\uC2A4\uD2B8"};this.socketService.emitEvent("test-connection",t),this.debugLogger.success("\uC5F0\uACB0\uD14C\uC2A4\uD2B8","\u2705 \uD14C\uC2A4\uD2B8 \uC774\uBCA4\uD2B8 \uC804\uC1A1 \uC644\uB8CC");let s=`
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
  \u{1F50D} WebSocket \uC5F0\uACB0 \uC0C1\uD0DC
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

\u2705 \uC5F0\uACB0 \uC0C1\uD0DC: \uC815\uC0C1
\u{1F464} \uC0C1\uB2F4\uC6D0 ID: ${this.agentId}
\u{1F3E2} \uC870\uC9C1 ID: ${this.organizationId}
\u23F0 \uD14C\uC2A4\uD2B8 \uC2DC\uAC04: ${new Date().toLocaleTimeString("ko-KR")}

\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

\u{1F4A1} \uB2E4\uC74C \uB2E8\uACC4:
1. \uC0C8 \uD0ED\uC5D0\uC11C /store/home \uC811\uC18D
2. \uACE0\uAC1D\uC73C\uB85C \uB85C\uADF8\uC778
3. \uCC44\uD305 \uC704\uC82F\uC5D0\uC11C "\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0" \uD074\uB9AD
4. \uC774 \uD398\uC774\uC9C0\uB85C \uB3CC\uC544\uC640\uC11C \uD655\uC778

\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

\u{1F514} \uC608\uC0C1 \uB85C\uADF8:
[\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC] \u{1F514} \uC0C8 \uC0C1\uB2F4 \uC694\uCCAD \uC218\uC2E0!
[\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC] \u{1F4CA} roomId: xxxxx
[\uC0C1\uB2F4\uC6D0\uB300\uC2DC\uBCF4\uB4DC] \u{1F464} clientId: X

\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    `.trim();console.log(s),this.debugLogger.success("\uC5F0\uACB0\uD14C\uC2A4\uD2B8","\u{1F389} \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC644\uB8CC!"),this.snackBar.open("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC644\uB8CC! \uC0C1\uC138 \uC815\uBCF4\uB294 \uCF58\uC194\uC744 \uD655\uC778\uD558\uC138\uC694.","\uD655\uC778",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||a)(A(Mt),A(Ot))};static \u0275cmp=L({type:a,selectors:[["app-chat-agent-dashboard"]],viewQuery:function(t,s){if(t&1&&D(It,5),t&2){let r;R(r=T())&&(s.messagesContainer=r.first)}},standalone:!1,decls:6,vars:5,consts:[["messagesContainer",""],[1,"agent-dashboard"],["class","consultation-disabled-overlay",4,"ngIf"],["class","connection-status",3,"connected","disconnected",4,"ngIf"],["class","loading-overlay",4,"ngIf"],["class","error-banner",4,"ngIf"],["class","dashboard-layout",4,"ngIf"],[1,"consultation-disabled-overlay"],[1,"disabled-content"],[1,"disabled-icon"],[1,"disabled-description"],[1,"disabled-steps"],[1,"step"],[1,"step-number"],[1,"step-text"],[1,"disabled-note"],[1,"connection-status"],[1,"status-indicator"],[1,"status-dot"],[1,"status-text"],[1,"agent-info"],["mat-stroked-button","",1,"test-btn",3,"click"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"spin"],[1,"error-banner"],["mat-icon-button","",3,"click"],[1,"dashboard-layout"],["class","all-clear-banner",4,"ngIf"],[1,"rooms-panel"],[1,"panel-header"],["mat-icon-button","","matTooltip","\uC0C8\uB85C\uACE0\uCE68",3,"click"],[1,"rooms-section"],[1,"section-header"],[1,"status-icon","waiting"],["mat-icon-button","","color","warn","matTooltip","\uB300\uAE30 \uC911\uC778 \uBAA8\uB4E0 \uCC44\uD305\uBC29 \uC0AD\uC81C",1,"delete-all-btn",3,"click","disabled"],["class","rooms-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"status-icon","active"],[1,"chat-panel"],["class","no-selection",4,"ngIf"],["class","chat-container",4,"ngIf"],[1,"all-clear-banner"],[1,"banner-animation"],[1,"pulse-ring"],[1,"pulse-ring","delay-1"],[1,"success-icon"],[1,"banner-content"],[1,"banner-stats"],[1,"stat-item"],[1,"banner-actions"],["mat-stroked-button","",3,"click"],[1,"rooms-list"],["class","room-card waiting",3,"selected","click",4,"ngFor","ngForOf"],[1,"room-card","waiting",3,"click"],[1,"room-info"],[1,"client-avatar"],[1,"room-details"],[1,"client-name"],["class","session-info",4,"ngIf"],[1,"last-message-time"],[1,"client-id-badge"],["mat-mini-fab","","color","primary","matTooltip","\uC0C1\uB2F4 \uC218\uB77D",1,"accept-btn",3,"click"],[1,"session-info"],[1,"empty-state"],["class","room-card active",3,"selected","click",4,"ngFor","ngForOf"],[1,"room-card","active",3,"click"],["class","unread-badge",4,"ngIf"],[1,"unread-badge"],[1,"no-selection"],[1,"chat-container"],[1,"chat-header"],[1,"client-info"],[1,"client-avatar-large"],[1,"client-details"],["class","session-info-header",4,"ngIf"],[1,"client-meta"],[1,"client-id-info"],["class","client-session-info",4,"ngIf"],[4,"ngIf"],[1,"chat-actions"],["mat-icon-button","","matTooltip","\uC0C1\uB2F4 \uC815\uBCF4"],["mat-icon-button","","matTooltip","\uC0C1\uB2F4 \uC885\uB8CC",3,"click"],[1,"messages-container"],["style","text-align: center; padding: 40px; color: #999;",4,"ngIf"],["class","message-wrapper",3,"client-message","agent-message","bot-message","system-message",4,"ngFor","ngForOf","ngForTrackBy"],["class","typing-indicator",4,"ngIf"],[1,"input-container"],[1,"input-actions"],["mat-icon-button","","matTooltip","\uD30C\uC77C \uCCA8\uBD80"],["mat-icon-button","","matTooltip","\uC774\uBBF8\uC9C0 \uCCA8\uBD80"],["placeholder","\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694... (Shift+Enter: \uC904\uBC14\uAFC8)","rows","1",1,"message-input",3,"ngModelChange","keydown","input","ngModel"],["mat-fab","","color","primary",1,"send-btn",3,"click","disabled"],[1,"session-info-header"],[1,"client-session-info"],[2,"text-align","center","padding","40px","color","#999"],[2,"font-size","64px","width","64px","height","64px","opacity","0.3"],[2,"margin","16px 0 0 0","font-size","14px"],[2,"margin","8px 0 0 0","font-size","12px","color","#bbb"],[1,"message-wrapper"],[1,"message-bubble"],[1,"message-content"],[1,"message-time"],[1,"typing-indicator"],[1,"typing-dots"],[1,"typing-text"]],template:function(t,s){t&1&&(i(0,"div",1),u(1,St,37,0,"div",2)(2,Et,11,7,"div",3)(3,At,6,0,"div",4)(4,Lt,8,1,"div",5)(5,Zt,31,10,"div",6),n()),t&2&&(c(),m("ngIf",!s.chatConsultationToggle.isEnabled()),c(),m("ngIf",s.chatConsultationToggle.isEnabled()),c(),m("ngIf",s.loading&&s.chatConsultationToggle.isEnabled()),c(),m("ngIf",s.error&&!s.loading&&s.chatConsultationToggle.isEnabled()),c(),m("ngIf",!s.loading&&!s.error&&s.chatConsultationToggle.isEnabled()))},dependencies:[W,G,H,U,K,nt,at,et,ot,mt,ut],styles:['.agent-dashboard[_ngcontent-%COMP%]{width:100%;height:100vh;background:#f5f7fa;position:relative;overflow:hidden;display:flex;flex-direction:column}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]{flex-shrink:0;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:10px 24px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 8px #0000001a;z-index:100}.agent-dashboard[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#11998e,#38ef7d)}.agent-dashboard[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eb3349,#f45c43);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 0 0 4px #ffffff4d;animation:_ngcontent-%COMP%_pulse-dot 2s ease-in-out infinite}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .agent-info[_ngcontent-%COMP%]{font-size:13px;opacity:.9}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .test-btn[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .test-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.agent-dashboard[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .test-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.agent-dashboard[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffffff2;display:flex;align-items:center;justify-content:center;z-index:1000}.agent-dashboard[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center}.agent-dashboard[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#1976d2;margin-bottom:16px}.agent-dashboard[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   mat-icon.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.agent-dashboard[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.agent-dashboard[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]{flex-shrink:0;background:#ffebee;color:#c62828;padding:16px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #ef9a9a}.agent-dashboard[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#c62828}.agent-dashboard[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:14px}.agent-dashboard[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#c62828}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffffffa;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]{text-align:center;max-width:500px;padding:40px}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:0 auto 24px;width:100px;height:100px;border-radius:50%;background:linear-gradient(135deg,#e3f2fd,#bbdefb);box-shadow:0 4px 12px #0000001a}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px;color:#1976d2}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#424242;margin:0 0 12px}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-description[_ngcontent-%COMP%]{font-size:15px;color:#757575;margin:0 0 32px;line-height:1.6}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:12px;padding:24px;text-align:left;margin:0 auto;max-width:400px}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#424242;margin:0 0 16px;display:flex;align-items:center;gap:8px}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#1976d2}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:12px}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:last-child{margin-bottom:0}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{flex-shrink:0;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#616161;line-height:1.5;padding-top:2px}.agent-dashboard[_ngcontent-%COMP%]   .consultation-disabled-overlay[_ngcontent-%COMP%]   .disabled-content[_ngcontent-%COMP%]   .disabled-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#424242;font-weight:600}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.agent-dashboard[_ngcontent-%COMP%]   .info-banner[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;padding:16px 20px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #90caf9;margin-bottom:0}.agent-dashboard[_ngcontent-%COMP%]   .info-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:24px;width:24px;height:24px}.agent-dashboard[_ngcontent-%COMP%]   .info-banner[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.agent-dashboard[_ngcontent-%COMP%]   .info-banner[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.agent-dashboard[_ngcontent-%COMP%]   .info-banner[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;opacity:.9}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:32px 40px;display:flex;align-items:center;gap:32px;border-bottom:none;margin-bottom:0;position:relative;overflow:hidden}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-10%;width:300px;height:300px;background:#ffffff1a;border-radius:50%;animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-30%;left:-5%;width:200px;height:200px;background:#ffffff14;border-radius:50%;animation:_ngcontent-%COMP%_float 8s ease-in-out infinite;animation-delay:1s}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-animation[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;flex-shrink:0;z-index:1}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-animation[_ngcontent-%COMP%]   .pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;border:3px solid rgba(255,255,255,.6);border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s ease-out infinite}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-animation[_ngcontent-%COMP%]   .pulse-ring.delay-1[_ngcontent-%COMP%]{animation-delay:.5s}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-animation[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:48px;width:48px;height:48px;color:#fff;animation:_ngcontent-%COMP%_scale-in .5s ease-out}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{flex:1;z-index:1}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:700;color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:15px;opacity:.95;color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-stats[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:20px}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;font-size:14px}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 20px;border-radius:8px;display:flex;align-items:center;gap:6px;transition:all .3s ease}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.agent-dashboard[_ngcontent-%COMP%]   .all-clear-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]{display:flex;flex:1;min-height:0;overflow:hidden}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]{width:360px;background:#fff;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;overflow:hidden}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #e0e0e0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;padding:8px 0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .status-icon.waiting[_ngcontent-%COMP%]{color:#ff9800}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .status-icon.active[_ngcontent-%COMP%]{color:#4caf50}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#333;flex:1}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .delete-all-btn[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s,transform .2s}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .delete-all-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:1;transform:scale(1.1)}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .delete-all-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:12px;padding:12px;cursor:pointer;transition:all .2s ease}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]:hover{background:#f5f5f5;transform:translate(4px)}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card.selected[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#1976d2}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card.waiting[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card.active[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .client-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;flex-shrink:0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .client-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;width:24px;height:24px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-details[_ngcontent-%COMP%]{flex:1;min-width:0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-details[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-details[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]{font-size:11px;color:#666;font-weight:400;margin-left:4px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-details[_ngcontent-%COMP%]   .last-message-time[_ngcontent-%COMP%]{font-size:12px;color:#999;display:flex;align-items:center;gap:8px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-details[_ngcontent-%COMP%]   .last-message-time[_ngcontent-%COMP%]   .client-id-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2px 8px;border-radius:12px;font-size:10px;font-weight:600;letter-spacing:.5px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{flex-shrink:0;transform:scale(.8)}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .rooms-list[_ngcontent-%COMP%]   .room-card[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{background:#f44336;color:#fff;border-radius:12px;padding:2px 8px;font-size:12px;font-weight:600;min-width:20px;text-align:center}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:32px 16px;color:#999}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px;opacity:.5}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]   .rooms-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;background:#fff}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .no-selection[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#999;padding:40px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .no-selection[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;opacity:.3;margin-bottom:20px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .no-selection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin:0 0 8px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .no-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:0;background:#fff}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{flex-shrink:0;padding:16px 20px;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0000000d;min-height:90px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-avatar-large[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-avatar-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:600;color:#333}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .session-info-header[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400;margin-left:6px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   .client-meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:12px;color:#666;flex-wrap:wrap}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   .client-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   .client-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   .client-meta[_ngcontent-%COMP%]   span.client-session-info[_ngcontent-%COMP%]{color:#999;font-family:Courier New,monospace}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   .client-meta[_ngcontent-%COMP%]   span.client-id-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:4px 12px;border-radius:16px;font-weight:600;letter-spacing:.5px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-details[_ngcontent-%COMP%]   .client-meta[_ngcontent-%COMP%]   span.client-id-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .chat-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;overflow-x:hidden;padding:20px;background:#f5f7fa;min-height:200px;max-height:calc(100vh - 400px);position:relative;box-sizing:border-box}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.client-message[_ngcontent-%COMP%], .agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.bot-message[_ngcontent-%COMP%]{justify-content:flex-start}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.client-message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%], .agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.bot-message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#fff;color:#333;border:1px solid #e0e0e0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.agent-message[_ngcontent-%COMP%]{justify-content:flex-end}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.agent-message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.system-message[_ngcontent-%COMP%]{justify-content:center}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper.system-message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#ffe0b2;color:#e65100;font-size:12px;padding:6px 12px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{max-width:70%;padding:12px 16px;border-radius:18px;box-shadow:0 2px 4px #0000001a}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;white-space:pre-wrap;word-break:break-word;margin-bottom:4px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:11px;opacity:.7;text-align:right}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]{display:flex;gap:4px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#999;animation:_ngcontent-%COMP%_typing 1.4s infinite}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-text[_ngcontent-%COMP%]{font-size:12px;color:#999}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{flex-shrink:0;padding:16px 20px;border-top:1px solid #e0e0e0;background:#fff;display:flex;align-items:flex-end;gap:12px;min-height:80px;box-sizing:border-box}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-actions[_ngcontent-%COMP%]{display:flex;gap:4px;padding-bottom:4px;flex-shrink:0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#666}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{flex:1;border:1px solid #e0e0e0;border-radius:24px;padding:12px 20px;font-size:14px;font-family:inherit;resize:none;outline:none;max-height:120px;min-height:40px;transition:border-color .2s;box-sizing:border-box}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{border-color:#1976d2}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::placeholder{color:#999}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{transform:scale(.85);box-shadow:0 4px 8px #1976d24d;flex-shrink:0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]:disabled{opacity:.5;box-shadow:none}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@keyframes _ngcontent-%COMP%_pulse-dot{0%,to{transform:scale(1);box-shadow:0 0 0 4px #ffffff4d}50%{transform:scale(1.2);box-shadow:0 0 0 8px #fff3}}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{transform:scale(1);opacity:.5}30%{transform:scale(1.2);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:translate(-50%,-50%) scale(.8);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes _ngcontent-%COMP%_scale-in{0%{transform:translate(-50%,-50%) scale(0)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(10deg)}}@media (max-width: 1024px){.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]{width:300px}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{max-width:80%}}@media (max-width: 768px){.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]{flex-direction:column}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .rooms-panel[_ngcontent-%COMP%]{width:100%;height:40%;border-right:none;border-bottom:1px solid #e0e0e0}.agent-dashboard[_ngcontent-%COMP%]   .dashboard-layout[_ngcontent-%COMP%]   .chat-panel[_ngcontent-%COMP%]{height:60%}}  .error-snackbar{background-color:#f44336!important;color:#fff!important}  .error-snackbar .mat-simple-snackbar-action{color:#fff!important}  .socket-status-snackbar{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff!important;white-space:pre-line;text-align:center;font-family:Courier New,monospace;font-size:13px;padding:16px!important}  .socket-status-snackbar .mat-simple-snackbar-action{color:#fff!important}']})};var Jt=[{path:"",component:S}],E=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=v({type:a});static \u0275inj=x({imports:[k.forChild(Jt),k]})};var kt=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=v({type:a});static \u0275inj=x({imports:[q,k,E,Y,X,st,gt,rt,lt,bt,_t,dt,ft,yt,Pt,I,ht]})};export{kt as ChatTalkAgentModule};
