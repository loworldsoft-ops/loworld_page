import{b as _t,c as xt}from"./chunk-M2ENAJQJ.js";import{b as Mt}from"./chunk-BXUV7OVH.js";import{a as ft,b as Ct}from"./chunk-ZXE7ND2J.js";import{d as pt}from"./chunk-AAPP6XBA.js";import{b as ht}from"./chunk-FWWLNTJR.js";import{d as gt}from"./chunk-BS3BHQKQ.js";import{a as mt,b as dt}from"./chunk-2WEVPE5E.js";import{b as et,c as nt,e as ot,f as it,i as at,l as rt,m as lt,n as ct,q as st,r as y,s as ut}from"./chunk-R7RMWIUH.js";import{h as X}from"./chunk-DCLAQPMP.js";import{fa as S,ha as Z,ka as tt}from"./chunk-2I43VYFY.js";import{$ as h,A as U,C as I,E as G,F as Y,I as V,M as K,N as q,V as J,W,X as $,Z as H,_ as Q,ba as M,e as v,m as z}from"./chunk-RCOEWTSU.js";import{$ as O,Fb as L,Lb as c,Mb as o,Nb as i,Ob as d,Sb as N,Wb as f,Xb as C,_ as b,_a as l,ca as E,db as u,g as F,ia as R,ja as j,kb as P,kc as r,lb as k,lc as p,qb as m}from"./chunk-A2MZWAXP.js";var g=class e{STORAGE_KEY="chat_talk_auth";CREDENTIALS={username:"admin",password:"9920"};isAuthenticatedSubject=new F(this.checkAuthStatus());isAuthenticated$=this.isAuthenticatedSubject.asObservable();constructor(){this.initAuth()}initAuth(){this.isAuthenticatedSubject.next(this.checkAuthStatus())}login(n,t){if(n===this.CREDENTIALS.username&&t===this.CREDENTIALS.password){let a=this.generateToken(n);return this.saveToken(a),this.isAuthenticatedSubject.next(!0),!0}return!1}logout(){localStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.STORAGE_KEY),this.isAuthenticatedSubject.next(!1)}isAuthenticated(){return this.checkAuthStatus()}getCurrentUser(){let n=this.getToken();if(!n)return null;try{let t=JSON.parse(n);return new Date().getTime()-t.timestamp>24*60*60*1e3?(this.logout(),null):{username:t.username}}catch{return this.logout(),null}}checkAuthStatus(){let n=this.getToken();if(!n)return!1;try{let t=JSON.parse(n);return new Date().getTime()-t.timestamp>24*60*60*1e3?(this.logout(),!1):!0}catch{return!1}}generateToken(n){let t={username:n,timestamp:new Date().getTime()};return JSON.stringify(t)}saveToken(n){localStorage.setItem(this.STORAGE_KEY,n),sessionStorage.setItem(this.STORAGE_KEY,n)}getToken(){return localStorage.getItem(this.STORAGE_KEY)||sessionStorage.getItem(this.STORAGE_KEY)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"})};function yt(e,n){if(e&1){let t=N();o(0,"div",6)(1,"div",7)(2,"mat-icon"),r(3,"account_circle"),i(),o(4,"span"),r(5),i()(),o(6,"button",8),f("click",function(){R(t);let s=C();return j(s.onLogout())}),o(7,"mat-icon"),r(8,"logout"),i()()()}if(e&2){let t=C();l(5),p(t.currentUser.username)}}var T=class e{constructor(n,t){this.authService=n;this.router=t}currentUser=null;ngOnInit(){this.currentUser=this.authService.getCurrentUser()}onLogout(){this.authService.logout(),this.router.navigate(["/chat-talk/login"])}static \u0275fac=function(t){return new(t||e)(u(g),u(h))};static \u0275cmp=P({type:e,selectors:[["app-chat-talk"]],standalone:!1,decls:10,vars:1,consts:[[1,"chat-talk-container"],[1,"chat-talk-header"],[1,"header-left"],[1,"logo-icon"],["class","header-right",4,"ngIf"],[1,"chat-talk-content"],[1,"header-right"],[1,"user-info"],["mat-icon-button","","matTooltip","\uB85C\uADF8\uC544\uC6C3",3,"click"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),r(4,"chat"),i(),o(5,"h1"),r(6,"\uCC44\uD305\uC0C1\uB2F4 \uC2DC\uC2A4\uD15C"),i()(),m(7,yt,9,1,"div",4),i(),o(8,"div",5),d(9,"router-outlet"),i()()),t&2&&(l(7),c("ngIf",a.currentUser))},dependencies:[v,Q,S,y,ft],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}.chat-talk-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;background:#f5f7fa}.chat-talk-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 2px 8px #0000001a;z-index:10}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#fff3;border-radius:20px;font-size:14px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.chat-talk-content[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column}@media (max-width: 768px){.chat-talk-header[_ngcontent-%COMP%]{padding:12px 16px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{gap:8px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]})};function Tt(e,n){if(e&1&&(o(0,"div",22)(1,"mat-icon"),r(2,"error_outline"),i(),o(3,"span"),r(4),i()()),e&2){let t=C();l(4),p(t.errorMessage)}}function wt(e,n){e&1&&(o(0,"mat-error"),r(1," \uC544\uC774\uB514\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function At(e,n){e&1&&(o(0,"mat-error"),r(1," \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function Et(e,n){e&1&&(o(0,"mat-icon"),r(1,"login"),i())}function It(e,n){e&1&&d(0,"mat-spinner",23)}var w=class e{constructor(n,t,a,s){this.fb=n;this.authService=t;this.router=a;this.route=s;this.loginForm=this.fb.group({username:["",[I.required]],password:["",[I.required]]})}loginForm;errorMessage="";isLoading=!1;returnUrl="/chat-talk/client/home";hidePassword=!0;ngOnInit(){if(this.authService.isAuthenticated()){this.router.navigate([this.returnUrl]);return}this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/chat-talk/client/home"}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{username:n,password:t}=this.loginForm.value;this.authService.login(n,t)?setTimeout(()=>{this.isLoading=!1,this.router.navigateByUrl(this.returnUrl).then(()=>{console.log("Navigation successful to:",this.returnUrl)}).catch(s=>{console.error("Navigation error:",s),this.router.navigate(["/chat-talk/client/home"])})},300):(this.errorMessage="\uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.isLoading=!1)}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static \u0275fac=function(t){return new(t||e)(u(J),u(g),u(h),u(H))};static \u0275cmp=P({type:e,selectors:[["app-chat-talk-login"]],standalone:!1,decls:43,vars:11,consts:[[1,"chat-talk-login-container"],[1,"login-card"],[1,"login-header"],[1,"logo"],[1,"logo-icon"],[1,"subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],["class","error-message",4,"ngIf"],["appearance","outline",1,"full-width"],["matInput","","type","text","formControlName","username","placeholder","\uC544\uC774\uB514\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","username"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20",4,"ngIf"],[1,"login-footer"],[1,"help-text"],[1,"background-decoration"],[1,"bubble","bubble-1"],[1,"bubble","bubble-2"],[1,"bubble","bubble-3"],[1,"error-message"],["diameter","20"]],template:function(t,a){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),r(5,"chat"),i()(),o(6,"h1"),r(7,"\uCC44\uD305\uC0C1\uB2F4 \uC2DC\uC2A4\uD15C"),i(),o(8,"p",5),r(9,"\uAD00\uB9AC\uC790 \uB85C\uADF8\uC778"),i()(),o(10,"form",6),f("ngSubmit",function(){return a.onSubmit()}),m(11,Tt,5,1,"div",7),o(12,"mat-form-field",8)(13,"mat-label"),r(14,"\uC544\uC774\uB514"),i(),d(15,"input",9),o(16,"mat-icon",10),r(17,"person"),i(),m(18,wt,2,0,"mat-error",11),i(),o(19,"mat-form-field",8)(20,"mat-label"),r(21,"\uBE44\uBC00\uBC88\uD638"),i(),d(22,"input",12),o(23,"mat-icon",10),r(24,"lock"),i(),o(25,"button",13),f("click",function(){return a.togglePasswordVisibility()}),o(26,"mat-icon"),r(27),i()(),m(28,At,2,0,"mat-error",11),i(),o(29,"button",14),m(30,Et,2,0,"mat-icon",11)(31,It,1,0,"mat-spinner",15),o(32,"span"),r(33),i()()(),o(34,"div",16)(35,"p",17)(36,"mat-icon"),r(37,"info"),i(),r(38," \uAD00\uB9AC\uC790 \uACC4\uC815\uC73C\uB85C\uB9CC \uC811\uC18D \uAC00\uB2A5\uD569\uB2C8\uB2E4 "),i()()(),o(39,"div",18),d(40,"div",19)(41,"div",20)(42,"div",21),i()()),t&2){let s,D;l(10),c("formGroup",a.loginForm),l(),c("ngIf",a.errorMessage),l(7),c("ngIf",(s=a.loginForm.get("username"))==null?null:s.hasError("required")),l(4),c("type",a.hidePassword?"password":"text"),l(3),L("aria-label","\uBE44\uBC00\uBC88\uD638 "+(a.hidePassword?"\uBCF4\uAE30":"\uC228\uAE30\uAE30")),l(2),p(a.hidePassword?"visibility_off":"visibility"),l(),c("ngIf",(D=a.loginForm.get("password"))==null?null:D.hasError("required")),l(),c("disabled",a.loginForm.invalid||a.isLoading),l(),c("ngIf",!a.isLoading),l(),c("ngIf",a.isLoading),l(2),p(a.isLoading?"\uB85C\uADF8\uC778 \uC911...":"\uB85C\uADF8\uC778")}},dependencies:[v,V,U,G,Y,K,q,at,et,nt,ot,it,lt,Z,S,y,mt],styles:[".chat-talk-login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden;padding:20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;padding:40px;width:100%;max-width:420px;position:relative;z-index:1;animation:_ngcontent-%COMP%_slideUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:80px;height:80px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;margin-bottom:20px;box-shadow:0 10px 25px #667eea66}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#fff}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0 0 8px;color:#2d3748}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:16px;color:#718096;margin:0}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fee;border:1px solid #fcc;border-radius:8px;color:#c33;font-size:14px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background:#f7fafc}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-focus-overlay{background:transparent}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{height:50px;font-size:16px;font-weight:600;border-radius:10px;margin-top:10px;display:flex;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,#667eea,#764ba2);transition:all .3s ease}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 10px 25px #667eea66;transform:translateY(-2px)}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:disabled{background:#cbd5e0}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}.chat-talk-login-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.chat-talk-login-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;font-size:14px;color:#718096;margin:0}.chat-talk-login-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none;overflow:hidden}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{position:absolute;background:#ffffff1a;border-radius:50%;animation:_ngcontent-%COMP%_float 6s infinite ease-in-out}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble.bubble-1[_ngcontent-%COMP%]{width:80px;height:80px;top:10%;left:10%;animation-delay:0s}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble.bubble-2[_ngcontent-%COMP%]{width:120px;height:120px;top:60%;right:10%;animation-delay:2s}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble.bubble-3[_ngcontent-%COMP%]{width:60px;height:60px;bottom:20%;left:20%;animation-delay:4s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}@media (max-width: 480px){.chat-talk-login-container[_ngcontent-%COMP%]{padding:10px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:30px 20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:60px;height:60px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}}"]})};var x=class e{constructor(n,t){this.authService=n;this.router=t}canActivate(n,t){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/chat-talk/login"],{queryParams:{returnUrl:t.url}}),!1)}static \u0275fac=function(t){return new(t||e)(E(g),E(h))};static \u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"})};var Bt=[{path:"login",component:w},{path:"",component:T,children:[{path:"client",loadChildren:()=>import("./chunk-FFJNAJWO.js").then(e=>e.ChatTalkClientModule),canActivate:[x]},{path:"agent",loadChildren:()=>import("./chunk-6CMRQWX7.js").then(e=>e.ChatTalkAgentModule),canActivate:[x]},{path:"",redirectTo:"agent",pathMatch:"full"}]},{path:"**",redirectTo:"login"}],A=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=k({type:e});static \u0275inj=O({imports:[M.forChild(Bt),M]})};var Ot=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=k({type:e});static \u0275inj=O({imports:[z,M,A,$,W,rt,ct,tt,ut,pt,xt,st,Ct,gt,_t,Mt,dt,X,ht]})};export{Ot as a};
