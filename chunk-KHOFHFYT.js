import{b as Dt}from"./chunk-3WI2ULJY.js";import{a as B,b as Tt}from"./chunk-5DK2ASP6.js";import{a as Lt}from"./chunk-GLJPGICH.js";import{a as dt}from"./chunk-YEEPMWEI.js";import{b as kt,c as St}from"./chunk-TNHFBQI7.js";import"./chunk-EQFVNSWN.js";import{a as Pt,b as yt,c as wt,d as $t}from"./chunk-Q3LZ3CGJ.js";import"./chunk-GR3MTTUM.js";import{b as Et}from"./chunk-CP67KMZW.js";import{a as X,b as It}from"./chunk-3NFRNFDT.js";import{b as be,c as bt,e as _e,f as ve,i as K,l as _t,m as vt,n as xt,o as Y,p as Mt,q as O,r as Ot}from"./chunk-S7UFXBMP.js";import{a as N}from"./chunk-H74DCEPP.js";import{a as mt,c as gt,e as pt,f as ut,g as ht,h as ft}from"./chunk-54G3DOWL.js";import{ka as L,ma as U,pa as Ct}from"./chunk-KJNWTZMH.js";import{A as Ze,F as G,H as J,J as W,K as he,L as et,M as tt,N as fe,O as Ce,S as nt,T as it,U as ot,_ as at,aa as rt,ba as st,ca as lt,d as Je,e as We,ea as ct,ga as q,h as qe,ja as De,k as Ke,p as Ye,w as Le,y as Xe}from"./chunk-ZJ6AKLDS.js";import{$ as I,$a as l,Bc as A,Cc as R,Dc as Ge,E as Ne,Gb as Be,Hb as h,Ib as f,Kb as E,Lb as T,Mb as C,Nb as o,Ob as a,Pb as w,Tb as k,U as p,W as V,Wa as z,Xb as d,Yb as m,aa as le,ac as ge,bc as pe,c as ze,cc as ue,da as M,ea as ce,eb as x,f as v,g as $,gc as He,ic as F,ja as b,ka as _,lb as S,lc as s,mb as de,mc as u,nc as D,p as Te,rb as me,rc as oe,sc as ae,tb as y,tc as re,wc as Qe}from"./chunk-5VJU6XTC.js";import{a as ie,b as Re,e as Ve}from"./chunk-JKOY2XUY.js";var j=class i{constructor(e,t){this.http=e;this.userManagementService=t;this.debugLogger.info("SlackAPI","\u{1F527} SlackApiService \uCD08\uAE30\uD654"),this.debugLogger.info("SlackAPI",`API Base URL: ${this.baseUrl}`)}baseUrl=dt.apiUrl+"/slack";debugLogger=ce(N);getChannels(){return this.debugLogger.info("SlackAPI","\u{1F4DE} GET /slack/channels \uD638\uCD9C"),this.http.get(`${this.baseUrl}/channels`).pipe(V(e=>{this.debugLogger.success("SlackAPI",`\u2705 \uCC44\uB110 \uC870\uD68C \uC131\uACF5: ${e.length}\uAC1C`)}))}getChannel(e){return this.debugLogger.info("SlackAPI",`\u{1F4DE} GET /slack/channels/${e} \uD638\uCD9C`),this.http.get(`${this.baseUrl}/channels/${e}`).pipe(V(t=>{this.debugLogger.success("SlackAPI",`\u2705 \uCC44\uB110 \uC870\uD68C \uC131\uACF5: ${t.name}`)}))}createChannel(e){return this.debugLogger.info("SlackAPI","\u{1F4DE} POST /slack/channels \uD638\uCD9C"),this.debugLogger.info("SlackAPI",`\uC694\uCCAD URL: ${this.baseUrl}/channels`),this.debugLogger.info("SlackAPI",`\uC694\uCCAD \uB370\uC774\uD130: ${JSON.stringify(e)}`),this.http.post(`${this.baseUrl}/channels`,e).pipe(V(t=>{this.debugLogger.success("SlackAPI",`\u2705 \uCC44\uB110 \uC0DD\uC131 \uC131\uACF5: ${t.name} (ID: ${t.id})`),this.debugLogger.info("SlackAPI",`\uC751\uB2F5 \uB370\uC774\uD130: ${JSON.stringify(t)}`)}))}deleteChannel(e){return this.http.delete(`${this.baseUrl}/channels/${e}`)}addMember(e,t){return this.http.post(`${this.baseUrl}/channels/${e}/members`,{userId:t})}removeMember(e,t){return this.http.delete(`${this.baseUrl}/channels/${e}/members/${t}`)}getMessages(e,t=1,n=50){let r=new Le().set("page",t.toString()).set("limit",n.toString());return this.http.get(`${this.baseUrl}/channels/${e}/messages`,{params:r})}sendMessage(e){return this.http.post(`${this.baseUrl}/messages`,e)}updateMessage(e,t){return this.http.put(`${this.baseUrl}/messages/${e}`,{text:t})}deleteMessage(e){return this.http.delete(`${this.baseUrl}/messages/${e}`)}getThreadReplies(e){return this.http.get(`${this.baseUrl}/messages/${e}/replies`)}replyToThread(e,t){return this.http.post(`${this.baseUrl}/messages/${e}/replies`,{text:t})}uploadFiles(e,t){let n=new FormData;n.append("channelId",e);for(let r=0;r<t.length;r++)n.append("files",t[r]);return this.http.post(`${this.baseUrl}/files/upload`,n)}getFileDownloadUrl(e){return`${this.baseUrl}/files/${e}/download`}getUsers(){return this.debugLogger.info("SlackAPI","\u{1F4DE} Store \uD68C\uC6D0 \uBAA9\uB85D \uC870\uD68C (UserManagementService)"),this.userManagementService.getAllUsers().pipe(V(e=>{this.debugLogger.info("SlackAPI",`Store \uD68C\uC6D0 \uC218\uC2E0: ${e.length}\uBA85`)}),Te(e=>e.map(t=>this.convertStoreUserToSlackUser(t))),V(e=>{this.debugLogger.success("SlackAPI",`\u2705 Slack \uC0AC\uC6A9\uC790 \uBCC0\uD658 \uC644\uB8CC: ${e.length}\uBA85`)}))}getUser(e){return this.debugLogger.info("SlackAPI",`\u{1F4DE} Store \uD68C\uC6D0 \uC870\uD68C: ${e}`),this.userManagementService.getUserById(e).pipe(V(t=>{this.debugLogger.info("SlackAPI",`Store \uD68C\uC6D0 \uC218\uC2E0: ${t.name}`)}),Te(t=>this.convertStoreUserToSlackUser(t)),V(t=>{this.debugLogger.success("SlackAPI",`\u2705 Slack \uC0AC\uC6A9\uC790 \uBCC0\uD658 \uC644\uB8CC: ${t.name}`)}))}convertStoreUserToSlackUser(e){return{id:e.userIdx||e.id,name:e.name,email:e.email,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random`,status:e.status==="ACTIVE"?"online":"offline",customStatus:this.getRoleDisplayName(e.role)}}getRoleDisplayName(e){return{CUSTOMER:"\uACE0\uAC1D",SELLER:"\uD310\uB9E4\uC790",ADMIN:"\uAD00\uB9AC\uC790",SUPER_ADMIN:"\uCD5C\uACE0 \uAD00\uB9AC\uC790"}[e]||e}updateUserStatus(e,t){return this.http.put(`${this.baseUrl}/users/me/status`,{status:e,customStatus:t})}searchMessages(e,t){let n=new Le().set("q",e);return t&&(n=n.set("channelId",t)),this.http.get(`${this.baseUrl}/search/messages`,{params:n})}static \u0275fac=function(t){return new(t||i)(M(Xe),M(Dt))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var H=class i{constructor(e){this.chatTalkSocket=e;this.setupSlackEventListeners()}messageReceived$=new v;messageDeleted$=new v;messageUpdated$=new v;reactionAdded$=new v;reactionRemoved$=new v;channelCreated$=new v;channelUpdated$=new v;userTyping$=new v;onlineUsers$=new v;userOnline$=new v;userOffline$=new v;onlineUserIds=new Set;setupSlackEventListeners(){this.chatTalkSocket.listenEvent("slack:message:received",e=>{console.log("\u{1F4E8} [Slack] Message received:",e),this.messageReceived$.next(e)}),this.chatTalkSocket.listenEvent("slack:message:deleted",e=>{console.log("\u{1F5D1}\uFE0F [Slack] Message deleted:",e),this.messageDeleted$.next(e)}),this.chatTalkSocket.listenEvent("slack:message:updated",e=>{console.log("\u270F\uFE0F [Slack] Message updated:",e),this.messageUpdated$.next(e)}),this.chatTalkSocket.listenEvent("slack:reaction:added",e=>{console.log("\u{1F44D} [Slack] Reaction added:",e),this.reactionAdded$.next(e)}),this.chatTalkSocket.listenEvent("slack:reaction:removed",e=>{console.log("\u{1F44E} [Slack] Reaction removed:",e),this.reactionRemoved$.next(e)}),this.chatTalkSocket.listenEvent("slack:channel:created",e=>{console.log("\u{1F195} [Slack] Channel created:",e),this.channelCreated$.next(e)}),this.chatTalkSocket.listenEvent("slack:channel:updated",e=>{console.log("\u{1F504} [Slack] Channel updated:",e),this.channelUpdated$.next(e)}),this.chatTalkSocket.listenEvent("slack:user:typing",e=>{console.log("\u2328\uFE0F [Slack] User typing:",e),this.userTyping$.next(e)}),this.chatTalkSocket.listenEvent("slack:users:online",e=>{console.log("\u{1F7E2} [Slack] Online users updated:",e),this.onlineUserIds=new Set(e),this.onlineUsers$.next(e)}),this.chatTalkSocket.listenEvent("slack:user:online",e=>{console.log("\u{1F7E2} [Slack] User came online:",e),this.onlineUserIds.add(e),this.userOnline$.next(e),this.onlineUsers$.next(Array.from(this.onlineUserIds))}),this.chatTalkSocket.listenEvent("slack:user:offline",e=>{console.log("\u26AB [Slack] User went offline:",e),this.onlineUserIds.delete(e),this.userOffline$.next(e),this.onlineUsers$.next(Array.from(this.onlineUserIds))})}connect(e){return Ve(this,null,function*(){yield this.chatTalkSocket.connect(),this.chatTalkSocket.emitEvent("slack:register:user",{userId:e})})}disconnect(){console.log("\u{1F50C} [Slack] Unsubscribing from Slack events")}joinChannel(e){console.log("\u{1F6AA} [Slack] Joining channel:",e),this.chatTalkSocket.emitEvent("slack:channel:join",{channelId:e})}leaveChannel(e){console.log("\u{1F6AA} [Slack] Leaving channel:",e),this.chatTalkSocket.emitEvent("slack:channel:leave",{channelId:e})}sendMessage(e,t,n){console.log("\u{1F4E4} [Slack] Sending message:",{channelId:e,text:t,files:n}),this.chatTalkSocket.emitEvent("slack:message:send",{channelId:e,text:t,files:n,timestamp:new Date})}deleteMessage(e){console.log("\u{1F5D1}\uFE0F [Slack] Deleting message:",e),this.chatTalkSocket.emitEvent("slack:message:delete",{messageId:e})}updateMessage(e,t){console.log("\u270F\uFE0F [Slack] Updating message:",{messageId:e,text:t}),this.chatTalkSocket.emitEvent("slack:message:update",{messageId:e,text:t})}toggleReaction(e,t){console.log("\u{1F44D} [Slack] Toggling reaction:",{messageId:e,emoji:t}),this.chatTalkSocket.emitEvent("slack:reaction:toggle",{messageId:e,emoji:t})}sendTypingStatus(e,t){this.chatTalkSocket.emitEvent("slack:user:typing",{channelId:e,isTyping:t})}isUserOnline(e){return this.onlineUserIds.has(e)}getOnlineUserIds(){return Array.from(this.onlineUserIds)}get isConnected$(){return new ze(e=>{let t=()=>{e.next(this.chatTalkSocket.isConnected())};t();let n=setInterval(t,1e3);return()=>clearInterval(n)})}get onMessageReceived$(){return this.messageReceived$.asObservable()}get onMessageDeleted$(){return this.messageDeleted$.asObservable()}get onMessageUpdated$(){return this.messageUpdated$.asObservable()}get onReactionAdded$(){return this.reactionAdded$.asObservable()}get onReactionRemoved$(){return this.reactionRemoved$.asObservable()}get onChannelCreated$(){return this.channelCreated$.asObservable()}get onChannelUpdated$(){return this.channelUpdated$.asObservable()}get onUserTyping$(){return this.userTyping$.asObservable()}get onOnlineUsersChanged$(){return this.onlineUsers$.asObservable()}get onUserOnline$(){return this.userOnline$.asObservable()}get onUserOffline$(){return this.userOffline$.asObservable()}static \u0275fac=function(t){return new(t||i)(M(Lt))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var Z=class i{constructor(e,t){this.apiService=e;this.socketAdapter=t;this.debugLogger.info("SlackChannel","\u{1F680} ChannelViewModel \uCD08\uAE30\uD654"),this.initializeSocketListeners()}destroy$=new v;debugLogger=ce(N);channels$=new $([]);activeChannel$=new $(null);isLoading$=new $(!1);initializeSocketListeners(){this.debugLogger.info("SlackChannel","\u{1F442} Socket \uC774\uBCA4\uD2B8 \uB9AC\uC2A4\uB108 \uCD08\uAE30\uD654"),this.socketAdapter.onChannelCreated$.pipe(p(this.destroy$)).subscribe(e=>{this.debugLogger.success("SlackChannel",`\u2705 \uC0C8 \uCC44\uB110 \uC0DD\uC131\uB428: ${e.name} (ID: ${e.id})`);let t=this.channels$.value;this.channels$.next([...t,e])}),this.socketAdapter.onChannelUpdated$.pipe(p(this.destroy$)).subscribe(e=>{this.debugLogger.info("SlackChannel",`\u{1F4DD} \uCC44\uB110 \uC5C5\uB370\uC774\uD2B8\uB428: ${e.name}`);let t=this.channels$.value,n=t.findIndex(r=>r.id===e.id);if(n!==-1){let r=[...t];r[n]=e,this.channels$.next(r),this.activeChannel$.value?.id===e.id&&this.activeChannel$.next(e)}})}loadChannels(){this.debugLogger.info("SlackChannel","\u{1F4DE} \uCC44\uB110 \uBAA9\uB85D \uB85C\uB4DC \uC2DC\uC791"),this.isLoading$.next(!0),this.apiService.getChannels().pipe(p(this.destroy$)).subscribe({next:e=>{this.debugLogger.success("SlackChannel",`\u2705 \uCC44\uB110 \uBAA9\uB85D \uB85C\uB4DC \uC131\uACF5: ${e.length}\uAC1C`),this.debugLogger.info("SlackChannel",`\uCC44\uB110 \uBAA9\uB85D: ${JSON.stringify(e.map(t=>t.name))}`),this.channels$.next(e),this.isLoading$.next(!1)},error:e=>{this.debugLogger.error("SlackChannel",`\u274C \uCC44\uB110 \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328: ${e.message}`),console.error("Failed to load channels:",e),this.isLoading$.next(!1)}})}selectChannel(e){this.debugLogger.info("SlackChannel",`\u{1F3AF} \uCC44\uB110 \uC120\uD0DD: ${e}`),this.isLoading$.next(!0),this.apiService.getChannel(e).pipe(p(this.destroy$)).subscribe({next:t=>{this.debugLogger.success("SlackChannel",`\u2705 \uCC44\uB110 \uC120\uD0DD \uC131\uACF5: ${t.name}`),this.activeChannel$.next(t),this.socketAdapter.joinChannel(e),this.isLoading$.next(!1)},error:t=>{this.debugLogger.error("SlackChannel",`\u274C \uCC44\uB110 \uC120\uD0DD \uC2E4\uD328: ${t.message}`),console.error("Failed to select channel:",t),this.isLoading$.next(!1)}})}createChannel(e,t,n,r){this.debugLogger.info("SlackChannel","\u{1F528} \uCC44\uB110 \uC0DD\uC131 \uC2DC\uC791"),this.debugLogger.info("SlackChannel",`\uCC44\uB110\uBA85: ${e}`),this.debugLogger.info("SlackChannel",`\uC124\uBA85: ${t}`),this.debugLogger.info("SlackChannel",`\uBE44\uACF5\uAC1C: ${n}`),this.debugLogger.info("SlackChannel",`\uBA64\uBC84 \uC218: ${r.length}\uBA85`),this.debugLogger.info("SlackChannel",`\uBA64\uBC84 IDs: ${JSON.stringify(r)}`),this.isLoading$.next(!0);let c={name:e,description:t,isPrivate:n,members:r};this.debugLogger.info("SlackChannel",`API \uD638\uCD9C \uB370\uC774\uD130: ${JSON.stringify(c)}`),this.apiService.createChannel(c).pipe(p(this.destroy$)).subscribe({next:g=>{this.debugLogger.success("SlackChannel",`\u2705 \uCC44\uB110 \uC0DD\uC131 \uC131\uACF5: ${g.name} (ID: ${g.id})`),this.debugLogger.info("SlackChannel",`\uC0DD\uC131\uB41C \uCC44\uB110 \uB370\uC774\uD130: ${JSON.stringify(g)}`),this.selectChannel(g.id),this.isLoading$.next(!1)},error:g=>{this.debugLogger.error("SlackChannel","\u274C \uCC44\uB110 \uC0DD\uC131 \uC2E4\uD328"),this.debugLogger.error("SlackChannel",`\uC5D0\uB7EC \uBA54\uC2DC\uC9C0: ${g.message}`),this.debugLogger.error("SlackChannel",`\uC5D0\uB7EC \uC0C1\uD0DC: ${g.status}`),this.debugLogger.error("SlackChannel",`\uC5D0\uB7EC \uC804\uCCB4: ${JSON.stringify(g)}`),console.error("Failed to create channel:",g),this.isLoading$.next(!1)}})}deleteChannel(e){this.apiService.deleteChannel(e).pipe(p(this.destroy$)).subscribe({next:()=>{let t=this.channels$.value;this.channels$.next(t.filter(n=>n.id!==e)),this.activeChannel$.value?.id===e&&this.activeChannel$.next(null)},error:t=>{console.error("Failed to delete channel:",t)}})}addMember(e,t){this.apiService.addMember(e,t).pipe(p(this.destroy$)).subscribe({next:n=>{},error:n=>{console.error("Failed to add member:",n)}})}removeMember(e,t){this.apiService.removeMember(e,t).pipe(p(this.destroy$)).subscribe({next:n=>{},error:n=>{console.error("Failed to remove member:",n)}})}getChannels(){return this.channels$.asObservable()}getActiveChannel(){return this.activeChannel$.asObservable()}getIsLoading(){return this.isLoading$.asObservable()}ngOnDestroy(){let e=this.activeChannel$.value;e&&this.socketAdapter.leaveChannel(e.id),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(M(j),M(H))};static \u0275prov=I({token:i,factory:i.\u0275fac})};var ee=class i{constructor(e,t){this.apiService=e;this.socketAdapter=t;this.initializeSocketListeners(),this.initializeTypingHandler()}destroy$=new v;messages$=new $([]);isLoading$=new $(!1);isFileUploading$=new $(!1);uploadedFiles$=new $([]);typingUsers$=new $(new Set);messageForm=new tt("",[J.required,J.maxLength(5e3)]);currentPage=1;hasMore=!0;initializeSocketListeners(){this.socketAdapter.onMessageReceived$.pipe(p(this.destroy$)).subscribe(e=>{let t=this.messages$.value;this.messages$.next([...t,e])}),this.socketAdapter.onMessageDeleted$.pipe(p(this.destroy$)).subscribe(e=>{let t=this.messages$.value;this.messages$.next(t.filter(n=>n.id!==e))}),this.socketAdapter.onMessageUpdated$.pipe(p(this.destroy$)).subscribe(e=>{let t=this.messages$.value,n=t.findIndex(r=>r.id===e.id);if(n!==-1){let r=[...t];r[n]=e,this.messages$.next(r)}}),this.socketAdapter.onReactionAdded$.pipe(p(this.destroy$)).subscribe(({messageId:e,reaction:t})=>{this.addReactionToMessage(e,t)}),this.socketAdapter.onReactionRemoved$.pipe(p(this.destroy$)).subscribe(({messageId:e,emoji:t,userId:n})=>{this.removeReactionFromMessage(e,t,n)}),this.socketAdapter.onUserTyping$.pipe(p(this.destroy$)).subscribe(({userId:e,isTyping:t})=>{let n=new Set(this.typingUsers$.value);t?n.add(e):n.delete(e),this.typingUsers$.next(n)})}initializeTypingHandler(){this.messageForm.valueChanges.pipe(Ne(300),p(this.destroy$)).subscribe(e=>{})}loadMessages(e,t=!1){!this.hasMore&&!t||(t&&(this.currentPage=1,this.messages$.next([])),this.isLoading$.next(!0),this.apiService.getMessages(e,this.currentPage,50).pipe(p(this.destroy$)).subscribe({next:({messages:n,hasMore:r})=>{let c=this.messages$.value;this.messages$.next([...n.reverse(),...c]),this.hasMore=r,this.currentPage++,this.isLoading$.next(!1)},error:n=>{console.error("Failed to load messages:",n),this.isLoading$.next(!1)}}))}sendMessage(e){let t=this.messageForm.value?.trim();if(!t&&this.uploadedFiles$.value.length===0)return;let n=this.uploadedFiles$.value.map(r=>r.id);this.socketAdapter.sendMessage(e,t||"",n),this.messageForm.reset(),this.uploadedFiles$.next([])}deleteMessage(e){this.socketAdapter.deleteMessage(e)}updateMessage(e,t){this.socketAdapter.updateMessage(e,t)}toggleReaction(e,t){this.socketAdapter.toggleReaction(e,t)}uploadFiles(e,t){t.length!==0&&(this.isFileUploading$.next(!0),this.apiService.uploadFiles(e,t).pipe(p(this.destroy$)).subscribe({next:n=>{let r=this.uploadedFiles$.value;this.uploadedFiles$.next([...r,...n]),this.isFileUploading$.next(!1)},error:n=>{console.error("Failed to upload files:",n),this.isFileUploading$.next(!1)}}))}removeUploadedFile(e){let t=this.uploadedFiles$.value;this.uploadedFiles$.next(t.filter(n=>n.id!==e))}addReactionToMessage(e,t){let n=this.messages$.value,r=n.findIndex(c=>c.id===e);if(r!==-1){let c=[...n],g=ie({},c[r]);g.reactions=[...g.reactions,t],c[r]=g,this.messages$.next(c)}}removeReactionFromMessage(e,t,n){let r=this.messages$.value,c=r.findIndex(g=>g.id===e);if(c!==-1){let g=[...r],Ee=ie({},g[c]);Ee.reactions=Ee.reactions.filter(je=>!(je.emoji===t&&je.userId===n)),g[c]=Ee,this.messages$.next(g)}}groupReactions(e){let t=new Map;return e.forEach(n=>{t.has(n.emoji)||t.set(n.emoji,{count:0,userIds:[]});let r=t.get(n.emoji);r.count++,r.userIds.push(n.userId)}),Array.from(t.entries()).map(([n,r])=>({emoji:n,count:r.count,userIds:r.userIds}))}hasUserReacted(e,t,n){return e.some(r=>r.emoji===t&&r.userId===n)}getMessages(){return this.messages$.asObservable()}getIsLoading(){return this.isLoading$.asObservable()}getIsFileUploading(){return this.isFileUploading$.asObservable()}getUploadedFiles(){return this.uploadedFiles$.asObservable()}getTypingUsers(){return this.typingUsers$.asObservable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(M(j),M(H))};static \u0275prov=I({token:i,factory:i.\u0275fac})};var Q=class i{constructor(e){this.router=e;this.checkSessionExpiry()}STORAGE_KEY="slack_auth_token";SESSION_KEY="slack_session_timestamp";SESSION_DURATION=8*60*60*1e3;isAuthenticatedSubject=new $(this.checkAuth());isAuthenticated$=this.isAuthenticatedSubject.asObservable();AUTH_HASH=this.simpleHash("admin9920");login(e,t){if(this.simpleHash(e+t)===this.AUTH_HASH){let r=Date.now().toString();return sessionStorage.setItem(this.STORAGE_KEY,"authenticated"),sessionStorage.setItem(this.SESSION_KEY,r),this.isAuthenticatedSubject.next(!0),!0}return!1}logout(){sessionStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.SESSION_KEY),this.isAuthenticatedSubject.next(!1),this.router.navigate(["/slack/login"])}isAuthenticated(){return this.checkAuth()}checkAuth(){let e=sessionStorage.getItem(this.STORAGE_KEY),t=sessionStorage.getItem(this.SESSION_KEY);if(!e||!t)return!1;let n=parseInt(t,10);return Date.now()-n>this.SESSION_DURATION?(this.logout(),!1):e==="authenticated"}checkSessionExpiry(){setInterval(()=>{!this.checkAuth()&&this.isAuthenticatedSubject.value&&this.logout()},6e4)}simpleHash(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return t.toString(36)}static \u0275fac=function(t){return new(t||i)(M(q))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var Vt=(i,e)=>e.id;function Jt(i,e){i&1&&(o(0,"mat-error"),s(1,"\uCC44\uB110 \uC774\uB984\uC740 \uD544\uC218\uC785\uB2C8\uB2E4"),a())}function Wt(i,e){i&1&&(o(0,"mat-error"),s(1,"\uCC44\uB110 \uC774\uB984\uC740 \uCD5C\uC18C 2\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4"),a())}function qt(i,e){i&1&&(o(0,"mat-icon"),s(1,"lock"),a(),s(2," Only invited members can see this channel "))}function Kt(i,e){i&1&&(o(0,"mat-icon"),s(1,"tag"),a(),s(2," Anyone can join this channel "))}function Yt(i,e){if(i&1){let t=k();o(0,"button",20),d("click",function(){b(t);let r=m();return _(r.searchQuery="")}),o(1,"mat-icon"),s(2,"close"),a()()}}function Xt(i,e){if(i&1){let t=k();o(0,"div",22),w(1,"img",23),o(2,"span"),s(3),a(),o(4,"button",24),d("click",function(){let r=b(t).$implicit,c=m(2);return _(c.toggleMember(r))}),o(5,"mat-icon"),s(6,"close"),a()()()}if(i&2){let t=e.$implicit;l(),C("src",t.avatar,z)("alt",t.name),l(2),u(t.name)}}function Zt(i,e){if(i&1&&(o(0,"div",13)(1,"h4"),s(2,"Selected Members:"),a(),o(3,"div",21),E(4,Xt,7,3,"div",22,Vt),a()()),i&2){let t=m();l(4),T(t.selectedMembers)}}function en(i,e){i&1&&(o(0,"div",15),w(1,"mat-spinner",25),o(2,"p"),s(3,"Loading members..."),a()())}function tn(i,e){i&1&&(o(0,"div",16)(1,"mat-icon"),s(2,"person_off"),a(),o(3,"p"),s(4,"No members found"),a()())}function nn(i,e){if(i&1&&(o(0,"span",35),s(1),a()),i&2){let t=m().$implicit;l(),u(t.customStatus)}}function on(i,e){if(i&1){let t=k();o(0,"div",27),d("click",function(){let r=b(t).$implicit,c=m(2);return _(c.toggleMember(r))}),o(1,"div",28),w(2,"img",29),o(3,"div",30)(4,"div",31),s(5),o(6,"mat-icon",32),s(7," fiber_manual_record "),a()(),o(8,"div",33)(9,"span",34),s(10),a(),h(11,nn,2,1,"span",35),a()()(),o(12,"mat-checkbox",36),d("click",function(r){return b(t),_(r.stopPropagation())})("change",function(){let r=b(t).$implicit,c=m(2);return _(c.toggleMember(r))}),a()()}if(i&2){let t=e.$implicit,n=m(2);F("selected",n.isMemberSelected(t.id)),l(2),C("src",t.avatar,z)("alt",t.name),l(3),D(" ",t.name," "),l(),F("online",t.status==="online"),l(4),u(t.email),l(),f(t.customStatus?11:-1),l(),C("checked",n.isMemberSelected(t.id))}}function an(i,e){if(i&1&&E(0,on,13,10,"div",26,Vt),i&2){let t=m();T(t.filteredUsers)}}var Me=class i{constructor(e,t,n,r){this.fb=e;this.dialogRef=t;this.slackApiService=n;this.debugLogger=r;this.debugLogger.info("SlackDialog","\u{1F3A8} \uCC44\uB110 \uC0DD\uC131 \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC5F4\uB9BC"),this.channelForm=this.fb.group({name:["",[J.required,J.minLength(2)]],description:[""],isPrivate:[!1]})}destroy$=new v;channelForm;allUsers=[];selectedMembers=[];isLoading=!1;searchQuery="";ngOnInit(){this.debugLogger.info("SlackDialog","\u{1F504} \uB2E4\uC774\uC5BC\uB85C\uADF8 \uCD08\uAE30\uD654"),this.loadUsers()}loadUsers(){this.debugLogger.info("SlackDialog","\u{1F4DE} Store \uD68C\uC6D0 \uBAA9\uB85D \uB85C\uB4DC \uC2DC\uC791"),this.isLoading=!0,this.slackApiService.getUsers().pipe(p(this.destroy$)).subscribe({next:e=>{this.debugLogger.success("SlackDialog",`\u2705 \uD68C\uC6D0 \uB85C\uB4DC \uC131\uACF5: ${e.length}\uBA85`),this.debugLogger.info("SlackDialog",`\uD68C\uC6D0 \uBAA9\uB85D: ${JSON.stringify(e.map(t=>({id:t.id,name:t.name})))}`),this.allUsers=e,this.isLoading=!1},error:e=>{this.debugLogger.error("SlackDialog",`\u274C \uD68C\uC6D0 \uB85C\uB4DC \uC2E4\uD328: ${e.message}`),this.debugLogger.error("SlackDialog",`\uC5D0\uB7EC \uC804\uCCB4: ${JSON.stringify(e)}`),console.error("Failed to load users:",e),this.isLoading=!1}})}toggleMember(e){let t=this.selectedMembers.findIndex(n=>n.id===e.id);t>-1?(this.debugLogger.info("SlackDialog",`\u2796 \uBA64\uBC84 \uC120\uD0DD \uD574\uC81C: ${e.name} (${e.id})`),this.selectedMembers.splice(t,1)):(this.debugLogger.info("SlackDialog",`\u2795 \uBA64\uBC84 \uC120\uD0DD: ${e.name} (${e.id})`),this.selectedMembers.push(e)),this.debugLogger.info("SlackDialog",`\uD604\uC7AC \uC120\uD0DD\uB41C \uBA64\uBC84 \uC218: ${this.selectedMembers.length}\uBA85`)}isMemberSelected(e){return this.selectedMembers.some(t=>t.id===e)}get filteredUsers(){if(!this.searchQuery)return this.allUsers;let e=this.searchQuery.toLowerCase();return this.allUsers.filter(t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e))}createChannel(){if(this.channelForm.invalid){this.debugLogger.warn("SlackDialog","\u26A0\uFE0F \uD3FC \uC720\uD6A8\uC131 \uAC80\uC0AC \uC2E4\uD328"),this.debugLogger.info("SlackDialog",`\uD3FC \uC5D0\uB7EC: ${JSON.stringify(this.channelForm.errors)}`);return}let e=this.channelForm.value,t={name:e.name,description:e.description||"",isPrivate:e.isPrivate,members:this.selectedMembers.map(n=>n.id)};this.debugLogger.info("SlackDialog","\u2705 \uCC44\uB110 \uC0DD\uC131 \uB370\uC774\uD130 \uC900\uBE44 \uC644\uB8CC"),this.debugLogger.info("SlackDialog",`\uCC44\uB110\uBA85: ${t.name}`),this.debugLogger.info("SlackDialog",`\uC124\uBA85: ${t.description}`),this.debugLogger.info("SlackDialog",`\uBE44\uACF5\uAC1C: ${t.isPrivate}`),this.debugLogger.info("SlackDialog",`\uC120\uD0DD\uB41C \uBA64\uBC84 \uC218: ${t.members.length}\uBA85`),this.debugLogger.info("SlackDialog",`\uBA64\uBC84 IDs: ${JSON.stringify(t.members)}`),this.debugLogger.info("SlackDialog",`\uC804\uC1A1 \uB370\uC774\uD130: ${JSON.stringify(t)}`),this.dialogRef.close(t)}cancel(){this.debugLogger.info("SlackDialog","\u274C \uCC44\uB110 \uC0DD\uC131 \uCDE8\uC18C"),this.dialogRef.close()}ngOnDestroy(){this.debugLogger.info("SlackDialog","\u{1F51A} \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC885\uB8CC"),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(x(rt),x(mt),x(j),x(N))};static \u0275cmp=S({type:i,selectors:[["app-create-channel-dialog"]],standalone:!1,decls:46,vars:10,consts:[[1,"create-channel-dialog"],["mat-dialog-title",""],[3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","e.g., project-updates"],["matPrefix",""],["matInput","","formControlName","description","rows","3","placeholder","What's this channel about?"],[1,"private-toggle"],["formControlName","isPrivate"],[1,"helper-text"],[1,"members-section"],["matInput","","placeholder","Search by name or email",3,"ngModelChange","ngModel"],["mat-icon-button","","matSuffix","","aria-label","Clear"],[1,"selected-members"],[1,"users-list"],[1,"loading-state"],[1,"empty-state"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-icon-button","","matSuffix","","aria-label","Clear",3,"click"],[1,"member-chips"],[1,"member-chip"],[1,"member-avatar-small",3,"src","alt"],["mat-icon-button","",1,"remove-button",3,"click"],["diameter","40"],[1,"user-item",3,"selected"],[1,"user-item",3,"click"],[1,"user-info"],[1,"user-avatar",3,"src","alt"],[1,"user-details"],[1,"user-name"],[1,"status-indicator"],[1,"user-meta"],[1,"user-email"],[1,"user-role"],[3,"click","change","checked"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"h2",1),s(2,"Create Channel"),a(),o(3,"mat-dialog-content")(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),s(7,"Channel Name"),a(),w(8,"input",4),o(9,"mat-icon",5),s(10,"tag"),a(),h(11,Jt,2,0,"mat-error"),h(12,Wt,2,0,"mat-error"),a(),o(13,"mat-form-field",3)(14,"mat-label"),s(15,"Description (optional)"),a(),o(16,"textarea",6),s(17,"        "),a(),o(18,"mat-icon",5),s(19,"description"),a()(),o(20,"div",7)(21,"mat-checkbox",8),s(22," Make Private "),a(),o(23,"p",9),h(24,qt,3,0)(25,Kt,3,0),a()()(),o(26,"div",10)(27,"h3"),s(28),a(),o(29,"mat-form-field",3)(30,"mat-label"),s(31,"Search members"),a(),o(32,"input",11),re("ngModelChange",function(c){return ae(n.searchQuery,c)||(n.searchQuery=c),c}),a(),o(33,"mat-icon",5),s(34,"search"),a(),h(35,Yt,3,0,"button",12),a(),h(36,Zt,6,0,"div",13),o(37,"div",14),h(38,en,4,0,"div",15)(39,tn,5,0,"div",16)(40,an,2,0),a()()(),o(41,"mat-dialog-actions",17)(42,"button",18),d("click",function(){return n.cancel()}),s(43,"Cancel"),a(),o(44,"button",19),d("click",function(){return n.createChannel()}),s(45," Create Channel "),a()()()),t&2){let r,c,g;l(4),C("formGroup",n.channelForm),l(7),f((r=n.channelForm.get("name"))!=null&&r.hasError("required")?11:-1),l(),f((c=n.channelForm.get("name"))!=null&&c.hasError("minlength")?12:-1),l(12),f((g=n.channelForm.get("isPrivate"))!=null&&g.value?24:25),l(4),D("Add Members (",n.selectedMembers.length," selected)"),l(4),oe("ngModel",n.searchQuery),l(3),f(n.searchQuery?35:-1),l(),f(n.selectedMembers.length>0?36:-1),l(2),f(n.isLoading?38:n.filteredUsers.length===0?39:40),l(6),C("disabled",n.channelForm.invalid)}},dependencies:[Ce,G,W,he,fe,it,ot,U,L,O,K,be,bt,_e,ve,Y,X,pt,ht,ut,kt],styles:[".create-channel-dialog[_ngcontent-%COMP%]{width:600px;max-width:90vw}.create-channel-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:20px 28px;border-bottom:2px solid var(--slack-primary);background:var(--slack-primary-light);font-size:20px;font-weight:700;color:var(--text-primary);letter-spacing:.3px;transition:all .3s ease}mat-dialog-content[_ngcontent-%COMP%]{padding:28px;max-height:70vh;overflow-y:auto}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}mat-dialog-actions[_ngcontent-%COMP%]{padding:20px 28px;border-top:1px solid var(--border-color);background-color:var(--bg-secondary);transition:all .3s ease}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:var(--slack-gradient)}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background:var(--slack-gradient-hover);box-shadow:0 4px 8px var(--slack-shadow)}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__leading, .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__notch, .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__trailing{border-color:var(--slack-primary)!important}.private-toggle[_ngcontent-%COMP%]{margin-bottom:28px;padding:16px;background-color:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);transition:all .3s ease}.private-toggle[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.private-toggle[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox__background{border-color:var(--slack-primary)}.private-toggle[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox--selected .mdc-checkbox__background{background-color:var(--slack-primary);border-color:var(--slack-primary)}.private-toggle[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;padding-left:32px;font-size:12px;color:var(--text-muted)}.private-toggle[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:var(--slack-primary)}.members-section[_ngcontent-%COMP%]{margin-top:28px}.members-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 18px;font-size:17px;font-weight:700;color:var(--text-primary)}.members-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 14px;font-size:14px;font-weight:600;color:var(--text-secondary)}.selected-members[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:var(--slack-primary-light);border-radius:10px;border:1px solid var(--slack-primary);transition:all .3s ease}.selected-members[_ngcontent-%COMP%]   .member-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 10px 6px 6px;background-color:var(--bg-primary);border:1px solid var(--border-color);border-radius:20px;font-size:13px;font-weight:500;box-shadow:0 2px 4px var(--shadow);transition:all .2s ease}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]:hover{border-color:var(--slack-primary);box-shadow:0 2px 6px var(--slack-shadow)}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .member-avatar-small[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:50%;object-fit:cover;box-shadow:0 1px 3px #0000001a}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{width:22px;height:22px;padding:0;margin-left:4px;color:#868e96}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{color:#dc3545;background-color:#dc35451a}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.users-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid var(--border-color);border-radius:10px;margin-top:16px;background-color:var(--bg-primary);box-shadow:0 2px 4px var(--shadow);transition:all .3s ease}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:50px 20px;color:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:52px;width:52px;height:52px;margin-bottom:16px;color:var(--slack-primary);opacity:.3}.users-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;font-size:14px;color:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid var(--bg-tertiary)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.users-list[_ngcontent-%COMP%]   .user-item.selected[_ngcontent-%COMP%]{background:var(--slack-primary-light);border-left:3px solid var(--slack-primary)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;object-fit:cover;box-shadow:0 2px 4px #0000001a}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{flex:1;min-width:0}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;color:#dee2e6}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   .status-indicator.online[_ngcontent-%COMP%]{color:#198754}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:12px;color:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{padding:3px 8px;background:var(--slack-primary-light);color:var(--slack-primary);border-radius:12px;font-weight:500}"]})};var rn=(i,e)=>e.id;function sn(i,e){if(i&1&&(o(0,"span",10),s(1),a()),i&2){let t=m().$implicit;l(),u(t.unreadCount)}}function ln(i,e){if(i&1){let t=k();o(0,"div",6),d("click",function(){let r=b(t).$implicit,c=m();return _(c.selectChannel(r.id))}),o(1,"mat-icon",7),s(2),a(),o(3,"div",8)(4,"span",9),s(5),a(),h(6,sn,2,1,"span",10),a()()}if(i&2){let t=e.$implicit,n=m();F("active",n.isActive(t.id)),l(2),D(" ",t.isPrivate?"lock":"tag"," "),l(3),u(t.name),l(),f(t.unreadCount>0?6:-1)}}function cn(i,e){if(i&1){let t=k();o(0,"div",5)(1,"p"),s(2,"No channels available"),a(),o(3,"button",11),d("click",function(){b(t);let r=m();return _(r.openCreateChannelDialog())}),s(4," Create Channel "),a()()}}var ke=class i{constructor(e,t){this.dialog=e;this.debugLogger=t}channels=[];activeChannel=null;channelSelected=new y;channelCreated=new y;selectChannel(e){this.debugLogger.info("SlackChannelList",`\u{1F3AF} \uCC44\uB110 \uC120\uD0DD \uC774\uBCA4\uD2B8 \uBC1C\uC0DD: ${e}`),this.channelSelected.emit(e)}openCreateChannelDialog(){this.debugLogger.info("SlackChannelList","\u{1F3A8} \uCC44\uB110 \uC0DD\uC131 \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC5F4\uAE30"),this.dialog.open(Me,{width:"600px",maxWidth:"90vw",disableClose:!1}).afterClosed().subscribe(t=>{t?(this.debugLogger.info("SlackChannelList","\u2705 \uB2E4\uC774\uC5BC\uB85C\uADF8\uC5D0\uC11C \uB370\uC774\uD130 \uBC1B\uC74C"),this.debugLogger.info("SlackChannelList",`\uBC1B\uC740 \uB370\uC774\uD130: ${JSON.stringify(t)}`),this.debugLogger.info("SlackChannelList","\u{1F680} channelCreated \uC774\uBCA4\uD2B8 \uBC1C\uD589"),this.channelCreated.emit(t)):this.debugLogger.info("SlackChannelList","\u274C \uB2E4\uC774\uC5BC\uB85C\uADF8 \uCDE8\uC18C\uB428 (result \uC5C6\uC74C)")})}isActive(e){return this.activeChannel?.id===e}static \u0275fac=function(t){return new(t||i)(x(gt),x(N))};static \u0275cmp=S({type:i,selectors:[["app-channel-list"]],inputs:{channels:"channels",activeChannel:"activeChannel"},outputs:{channelSelected:"channelSelected",channelCreated:"channelCreated"},standalone:!1,decls:11,vars:1,consts:[[1,"channel-list-container"],[1,"channel-list-header"],["mat-icon-button","","matTooltip","Create Channel",3,"click"],[1,"channel-list"],[1,"channel-item",3,"active"],[1,"empty-state"],[1,"channel-item",3,"click"],[1,"channel-icon"],[1,"channel-info"],[1,"channel-name"],[1,"unread-badge"],["mat-button","",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Channels"),a(),o(4,"button",2),d("click",function(){return n.openCreateChannelDialog()}),o(5,"mat-icon"),s(6,"add"),a()()(),o(7,"div",3),E(8,ln,7,5,"div",4,rn,!1,cn,5,0,"div",5),a()()),t&2&&(l(8),T(n.channels))},dependencies:[U,L,O,B],styles:[".channel-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:var(--bg-primary);transition:background-color .3s ease}.channel-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border-color);background-color:var(--bg-primary);transition:background-color .3s ease,border-color .3s ease}.channel-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:var(--text-primary)}.channel-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--slack-primary)}.channel-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.channel-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.channel-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:all .2s ease;color:var(--text-secondary);border-left:3px solid transparent}.channel-item[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light);color:var(--text-primary)}.channel-item.active[_ngcontent-%COMP%]{background:var(--slack-primary-light);color:var(--slack-primary);border-left-color:var(--slack-primary);font-weight:600}.channel-item[_ngcontent-%COMP%]   .channel-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:inherit}.channel-item[_ngcontent-%COMP%]   .channel-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:space-between;min-width:0}.channel-item[_ngcontent-%COMP%]   .channel-name[_ngcontent-%COMP%]{font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.channel-item[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:22px;padding:0 6px;border-radius:11px;background:var(--slack-gradient);color:#fff;font-size:11px;font-weight:700;box-shadow:0 2px 4px var(--slack-shadow)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;text-align:center;color:#fff9}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}"]})};var mn=(i,e)=>e.id,gn=(i,e)=>e.emoji;function pn(i,e){if(i&1&&w(0,"img",3),i&2){let t=m();C("src",t.message.user.avatar,z)("alt",t.message.user.name)}}function un(i,e){if(i&1&&(o(0,"div",4),s(1),a()),i&2){let t=m();l(),D(" ",t.message.user.name.charAt(0).toUpperCase()," ")}}function hn(i,e){i&1&&(o(0,"span",9),s(1,"(edited)"),a())}function fn(i,e){if(i&1&&w(0,"img",21),i&2){let t=m().$implicit;C("src",t.url,z)("alt",t.name)}}function Cn(i,e){if(i&1&&(o(0,"div",22)(1,"mat-icon"),s(2,"insert_drive_file"),a(),o(3,"span"),s(4),a()()),i&2){let t=m().$implicit;l(4),u(t.name)}}function bn(i,e){if(i&1&&(o(0,"div",20),h(1,fn,1,2,"img",21)(2,Cn,5,1,"div",22),a()),i&2){let t=e.$implicit;l(),f(t.type.startsWith("image/")?1:2)}}function _n(i,e){if(i&1&&(o(0,"div",11),E(1,bn,3,1,"div",20,mn),a()),i&2){let t=m();l(),T(t.message.files)}}function vn(i,e){if(i&1){let t=k();o(0,"button",24),d("click",function(){let r=b(t).$implicit,c=m(2);return _(c.onReactionClick(r.emoji))}),o(1,"span"),s(2),a(),o(3,"span",25),s(4),a()()}if(i&2){let t=e.$implicit;l(2),u(t.emoji),l(2),u(t.count)}}function xn(i,e){if(i&1&&(o(0,"div",12),E(1,vn,5,2,"button",23,gn),a()),i&2){let t=m();l(),T(t.groupReactions())}}function Mn(i,e){if(i&1&&(o(0,"button",15)(1,"mat-icon"),s(2,"forum"),a(),o(3,"span",26),s(4),a()()),i&2){let t=m();l(4),u(t.message.threadCount)}}function kn(i,e){i&1&&(o(0,"div",19)(1,"p"),s(2,"Emoji Picker (TODO: Install @ctrl/ngx-emoji-mart)"),a()())}var Se=class i{message;deleted=new y;reactionToggled=new y;isEmojiPickerOpen=!1;deleteMessage(){this.deleted.emit()}toggleEmojiPicker(){this.isEmojiPickerOpen=!this.isEmojiPickerOpen}onEmojiSelected(e){this.reactionToggled.emit(e.emoji.native),this.isEmojiPickerOpen=!1}onReactionClick(e){this.reactionToggled.emit(e)}groupReactions(){let e=new Map;return this.message.reactions?.forEach(t=>{e.set(t.emoji,(e.get(t.emoji)||0)+1)}),Array.from(e.entries()).map(([t,n])=>({emoji:t,count:n}))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-message-card"]],inputs:{message:"message"},outputs:{deleted:"deleted",reactionToggled:"reactionToggled"},standalone:!1,decls:42,vars:13,consts:[["menu","matMenu"],[1,"message-card"],[1,"message-avatar"],[3,"src","alt"],[1,"avatar-placeholder"],[1,"message-content"],[1,"message-header"],[1,"message-author"],[1,"message-time"],[1,"message-edited"],[1,"message-text"],[1,"message-files"],[1,"message-reactions"],[1,"message-actions"],["mat-icon-button","","matTooltip","Add reaction",3,"click"],["mat-icon-button","","matTooltip","View thread"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"emoji-picker-wrapper"],[1,"file-item"],[1,"file-image",3,"src","alt"],[1,"file-placeholder"],["mat-button","",1,"reaction-button"],["mat-button","",1,"reaction-button",3,"click"],[1,"reaction-count"],[1,"thread-count"]],template:function(t,n){if(t&1){let r=k();o(0,"div",1)(1,"div",2),h(2,pn,1,2,"img",3)(3,un,2,1,"div",4),a(),o(4,"div",5)(5,"div",6)(6,"span",7),s(7),a(),o(8,"span",8),s(9),A(10,"date"),a(),h(11,hn,2,0,"span",9),a(),o(12,"div",10),s(13),a(),h(14,_n,3,0,"div",11),h(15,xn,3,0,"div",12),o(16,"div",13)(17,"button",14),d("click",function(){return b(r),_(n.toggleEmojiPicker())}),o(18,"mat-icon"),s(19,"add_reaction"),a()(),h(20,Mn,5,1,"button",15),o(21,"button",16)(22,"mat-icon"),s(23,"more_vert"),a()(),o(24,"mat-menu",null,0)(26,"button",17)(27,"mat-icon"),s(28,"reply"),a(),o(29,"span"),s(30,"Reply in thread"),a()(),o(31,"button",17)(32,"mat-icon"),s(33,"edit"),a(),o(34,"span"),s(35,"Edit"),a()(),o(36,"button",18),d("click",function(){return b(r),_(n.deleteMessage())}),o(37,"mat-icon"),s(38,"delete"),a(),o(39,"span"),s(40,"Delete"),a()()()(),h(41,kn,3,0,"div",19),a()()}if(t&2){let r=He(25);l(2),f(n.message.user.avatar?2:3),l(5),u(n.message.user.name),l(2),u(Ge(10,10,n.message.timestamp,"short")),l(2),f(n.message.edited?11:-1),l(2),D(" ",n.message.text," "),l(),f(n.message.files&&n.message.files.length>0?14:-1),l(),f(n.groupReactions().length>0?15:-1),l(5),f(n.message.threadCount&&n.message.threadCount>0?20:-1),l(),C("matMenuTriggerFor",r),l(20),f(n.isEmojiPickerOpen?41:-1)}},dependencies:[U,L,O,B,yt,Pt,wt,Ke],styles:[".message-card[_ngcontent-%COMP%]{display:flex;gap:14px;padding:16px 0;position:relative;border-bottom:1px solid var(--bg-tertiary);transition:background-color .2s ease}.message-card[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.message-card[_ngcontent-%COMP%]:hover   .message-actions[_ngcontent-%COMP%]{opacity:1}.message-avatar[_ngcontent-%COMP%]{flex-shrink:0}.message-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .message-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;box-shadow:0 2px 4px var(--shadow)}.message-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--slack-gradient);color:#fff;font-weight:700;font-size:16px}.message-content[_ngcontent-%COMP%]{flex:1;min-width:0;position:relative}.message-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:10px;margin-bottom:6px}.message-header[_ngcontent-%COMP%]   .message-author[_ngcontent-%COMP%]{font-weight:700;font-size:15px;color:var(--text-primary)}.message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted)}.message-header[_ngcontent-%COMP%]   .message-edited[_ngcontent-%COMP%]{font-size:11px;color:var(--text-muted);font-style:italic}.message-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:var(--text-secondary);word-wrap:break-word}.message-files[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}.message-files[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{max-width:200px}.message-files[_ngcontent-%COMP%]   .file-image[_ngcontent-%COMP%]{max-width:100%;border-radius:4px;cursor:pointer}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background-color:var(--bg-secondary);border:1px solid var(--border-color);border-radius:4px;cursor:pointer;transition:all .2s ease}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]:hover{border-color:var(--slack-primary);background-color:var(--slack-primary-light)}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#616061}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#1d1c1d;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message-reactions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}.message-reactions[_ngcontent-%COMP%]   .reaction-button[_ngcontent-%COMP%]{min-width:auto;padding:2px 8px;height:26px;line-height:26px;border:1px solid #e0e0e0;border-radius:13px;font-size:13px}.message-reactions[_ngcontent-%COMP%]   .reaction-button[_ngcontent-%COMP%]:hover{border-color:#1164a3;background-color:#e8f5fa}.message-reactions[_ngcontent-%COMP%]   .reaction-button[_ngcontent-%COMP%]   .reaction-count[_ngcontent-%COMP%]{margin-left:4px;color:#616061}.message-actions[_ngcontent-%COMP%]{position:absolute;top:-12px;right:16px;display:flex;gap:4px;opacity:0;transition:opacity .2s;background-color:#fff;border:1px solid #e0e0e0;border-radius:4px;box-shadow:0 1px 3px #0000001a}.message-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;line-height:32px}.message-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.message-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .thread-count[_ngcontent-%COMP%]{font-size:11px;margin-left:2px}.emoji-picker-wrapper[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:100;margin-top:8px;background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:16px}"]})};var On=["scrollContainer"],Pn=(i,e)=>e.id;function yn(i,e){if(i&1&&(o(0,"p",7),s(1),a()),i&2){let t=m(2);l(),u(t.activeChannel.description)}}function wn(i,e){if(i&1&&(o(0,"div",2)(1,"div",6)(2,"mat-icon"),s(3),a(),o(4,"h2"),s(5),a()(),h(6,yn,2,1,"p",7),a()),i&2){let t=m();l(3),u(t.activeChannel.isPrivate?"lock":"tag"),l(2),u(t.activeChannel.name),l(),f(t.activeChannel.description?6:-1)}}function $n(i,e){i&1&&(o(0,"div",4),w(1,"mat-spinner",8),o(2,"p"),s(3,"Loading messages..."),a()())}function In(i,e){if(i&1){let t=k();o(0,"app-message-card",10),d("deleted",function(){let r=b(t).$implicit,c=m(2);return _(c.deleteMessage(r.id))})("reactionToggled",function(r){let c=b(t).$implicit,g=m(2);return _(g.toggleReaction(c.id,r))}),a()}if(i&2){let t=e.$implicit;C("message",t)}}function En(i,e){if(i&1&&E(0,In,1,1,"app-message-card",9,Pn),i&2){let t=m();T(t.messages)}}function Tn(i,e){i&1&&(o(0,"div",5)(1,"mat-icon"),s(2,"forum"),a(),o(3,"h3"),s(4,"No messages yet"),a(),o(5,"p"),s(6,"Be the first to send a message!"),a()())}var Oe=class i{messages=[];isLoading=!1;activeChannel=null;messageDeleted=new y;reactionToggled=new y;scrollContainer;shouldScrollToBottom=!0;ngAfterViewChecked(){this.shouldScrollToBottom&&this.scrollToBottom()}scrollToBottom(){try{this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}catch(e){console.error("Scroll error:",e)}}onScroll(e){let t=e.target,n=Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<10;this.shouldScrollToBottom=n}deleteMessage(e){this.messageDeleted.emit(e)}toggleReaction(e,t){this.reactionToggled.emit({messageId:e,emoji:t})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-message-list"]],viewQuery:function(t,n){if(t&1&&ge(On,5),t&2){let r;pe(r=ue())&&(n.scrollContainer=r.first)}},inputs:{messages:"messages",isLoading:"isLoading",activeChannel:"activeChannel"},outputs:{messageDeleted:"messageDeleted",reactionToggled:"reactionToggled"},standalone:!1,decls:7,vars:2,consts:[["scrollContainer",""],[1,"message-list-container"],[1,"channel-header"],[1,"messages-scroll",3,"scroll"],[1,"loading-state"],[1,"empty-state"],[1,"channel-title"],[1,"channel-description"],["diameter","40"],[3,"message"],[3,"deleted","reactionToggled","message"]],template:function(t,n){if(t&1){let r=k();o(0,"div",1),h(1,wn,7,3,"div",2),o(2,"div",3,0),d("scroll",function(g){return b(r),_(n.onScroll(g))}),h(4,$n,4,0,"div",4)(5,En,2,0)(6,Tn,7,0,"div",5),a()()}t&2&&(l(),f(n.activeChannel?1:-1),l(3),f(n.isLoading?4:n.messages&&n.messages.length>0?5:6))},dependencies:[O,X,Se],styles:[".message-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;background-color:var(--bg-secondary);transition:background-color .3s ease;min-height:0}.channel-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid var(--border-color);background:var(--slack-gradient);box-shadow:0 2px 4px var(--shadow);transition:all .3s ease;flex-shrink:0}.channel-header[_ngcontent-%COMP%]   .channel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.channel-header[_ngcontent-%COMP%]   .channel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;width:24px;height:24px}.channel-header[_ngcontent-%COMP%]   .channel-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;color:#fff;letter-spacing:.3px}.channel-header[_ngcontent-%COMP%]   .channel-description[_ngcontent-%COMP%]{margin:8px 0 0 34px;font-size:13px;color:#ffffffe6}.messages-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:20px 24px;background-color:var(--bg-primary);transition:background-color .3s ease;min-height:0;display:flex;flex-direction:column;gap:12px}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--border-color);border-radius:4px}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--text-muted)}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:var(--bg-secondary)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 16px;gap:16px}.loading-state[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]     circle{stroke:var(--slack-primary)}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 16px;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:var(--slack-primary);opacity:.3;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:700;color:var(--text-primary)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--text-muted)}"]})};var Dn=["fileInput"],An=(i,e)=>e.id;function Fn(i,e){if(i&1&&w(0,"img",13),i&2){let t=m().$implicit;C("src",t.url,z)("alt",t.name)}}function Un(i,e){i&1&&(o(0,"div",14)(1,"mat-icon"),s(2,"insert_drive_file"),a()())}function jn(i,e){if(i&1){let t=k();o(0,"div",12),h(1,Fn,1,2,"img",13)(2,Un,3,0,"div",14),o(3,"span",15),s(4),a(),o(5,"button",16),d("click",function(){let r=b(t).$implicit,c=m(2);return _(c.removeFile(r.id))}),o(6,"mat-icon"),s(7,"close"),a()()()}if(i&2){let t=e.$implicit;l(),f(t.type.startsWith("image/")?1:2),l(3),u(t.name)}}function Rn(i,e){if(i&1&&(o(0,"div",2),E(1,jn,8,2,"div",12,An),a()),i&2){let t=m();l(),T(t.uploadedFiles)}}function Vn(i,e){i&1&&w(0,"mat-spinner",10)}function zn(i,e){i&1&&(o(0,"mat-icon"),s(1,"send"),a())}var Pe=class i{messageForm;uploadedFiles=[];isUploading=!1;activeChannel=null;messageSent=new y;filesUploaded=new y;fileRemoved=new y;fileInput;triggerFileUpload(){this.fileInput.nativeElement.click()}onFileSelected(e){let t=e.target.files;t&&t.length>0&&this.activeChannel&&(this.filesUploaded.emit({channelId:this.activeChannel.id,files:t}),this.fileInput.nativeElement.value="")}removeFile(e){this.fileRemoved.emit(e)}onKeyDown(e){e.isComposing||e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}sendMessage(){!this.activeChannel||!this.messageForm.value?.trim()&&(!this.uploadedFiles||this.uploadedFiles.length===0)||this.messageSent.emit(this.activeChannel.id)}isSendDisabled(){return!this.messageForm.value?.trim()&&(!this.uploadedFiles||this.uploadedFiles.length===0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-message-input"]],viewQuery:function(t,n){if(t&1&&ge(Dn,5),t&2){let r;pe(r=ue())&&(n.fileInput=r.first)}},inputs:{messageForm:"messageForm",uploadedFiles:"uploadedFiles",isUploading:"isUploading",activeChannel:"activeChannel"},outputs:{messageSent:"messageSent",filesUploaded:"filesUploaded",fileRemoved:"fileRemoved"},standalone:!1,decls:18,vars:7,consts:[["fileInput",""],[1,"message-input-container"],[1,"uploaded-files-preview"],[1,"input-wrapper"],["appearance","outline",1,"message-field"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10",3,"keydown","formControl","placeholder"],[1,"input-actions"],["mat-icon-button","","matTooltip","Attach files",3,"click","disabled"],["mat-icon-button","","matTooltip","Add emoji",3,"disabled"],["mat-raised-button","","color","primary",1,"send-button",3,"click","disabled"],["diameter","20"],["type","file","multiple","",2,"display","none",3,"change"],[1,"file-preview"],[1,"file-thumbnail",3,"src","alt"],[1,"file-icon"],[1,"file-name"],["mat-icon-button","",1,"remove-file",3,"click"]],template:function(t,n){if(t&1){let r=k();o(0,"div",1),h(1,Rn,3,0,"div",2),o(2,"div",3)(3,"mat-form-field",4)(4,"textarea",5),d("keydown",function(g){return b(r),_(n.onKeyDown(g))}),s(5,"      "),a()(),o(6,"div",6)(7,"button",7),d("click",function(){return b(r),_(n.triggerFileUpload())}),o(8,"mat-icon"),s(9,"attach_file"),a()(),o(10,"button",8)(11,"mat-icon"),s(12,"sentiment_satisfied_alt"),a()(),o(13,"button",9),d("click",function(){return b(r),_(n.sendMessage())}),h(14,Vn,1,0,"mat-spinner",10)(15,zn,2,0,"mat-icon"),a()()(),o(16,"input",11,0),d("change",function(g){return b(r),_(n.onFileSelected(g))}),a()()}t&2&&(l(),f(n.uploadedFiles&&n.uploadedFiles.length>0?1:-1),l(3),C("formControl",n.messageForm)("placeholder",n.activeChannel?"Message #"+n.activeChannel.name:"Select a channel"),l(3),C("disabled",!n.activeChannel),l(3),C("disabled",!n.activeChannel),l(3),C("disabled",n.isSendDisabled()||n.isUploading),l(),f(n.isUploading?14:15))},dependencies:[G,W,nt,U,L,O,K,Y,vt,B,X],styles:[".message-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 24px;border-top:1px solid var(--border-color);background-color:var(--bg-primary);box-shadow:0 -2px 8px var(--shadow);transition:all .3s ease}.uploaded-files-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:14px}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:10px;padding:10px 14px;background-color:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;max-width:220px;transition:all .2s ease}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]:hover{border-color:var(--slack-primary);background-color:var(--slack-primary-light)}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:6px;box-shadow:0 2px 4px #0000001a}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--slack-primary-light);border-radius:6px}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--slack-primary)}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;font-weight:500}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px;color:#868e96}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]:hover{color:#dc3545;background-color:#dc35451a}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:12px}.message-field[_ngcontent-%COMP%]{flex:1;margin:0}.message-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{padding:10px 16px;border:1px solid var(--border-color);border-radius:8px;background-color:var(--bg-secondary);transition:all .2s ease}.message-field[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mat-mdc-form-field-flex{border-color:var(--slack-primary);background-color:var(--bg-primary);box-shadow:0 0 0 3px var(--slack-primary-light)}.message-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0}.message-field[_ngcontent-%COMP%]     textarea{resize:none;font-size:14px;line-height:1.5;color:var(--text-secondary)}.input-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding-bottom:8px}.input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--slack-primary)}.input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.input-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:var(--slack-gradient);color:#fff}.input-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background:var(--slack-gradient-hover);box-shadow:0 4px 8px var(--slack-shadow)}.input-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background:var(--border-color);color:var(--text-muted)}.input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.input-actions[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{min-width:60px;height:36px}.input-actions[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}"]})};function Bn(i,e){if(i&1&&(o(0,"div",18)(1,"mat-icon",19),s(2,"account_circle"),a(),o(3,"div",20)(4,"span",21),s(5),a(),o(6,"span",22),s(7),a()()()),i&2){let t=e.$implicit;l(5),u(t.name),l(),F("online",t.isOnline)("offline",!t.isOnline),l(),D(" \u25CF ",t.isOnline?"Online":"Offline"," ")}}var ye=class i{constructor(e,t,n,r,c){this.channelVM=e;this.messageVM=t;this.socketAdapter=n;this.slackApi=r;this.slackAuthService=c}destroy$=new v;isConnected=!1;isSidebarOpen=!0;isMembersSidebarOpen=!0;members=[];ngOnInit(){this.socketAdapter.isConnected$.pipe(p(this.destroy$)).subscribe(t=>{this.isConnected=t}),this.socketAdapter.onOnlineUsersChanged$.pipe(p(this.destroy$)).subscribe(t=>{console.log("\u{1F7E2} Online users updated:",t),this.updateMembersOnlineStatus()}),this.socketAdapter.onUserOnline$.pipe(p(this.destroy$)).subscribe(t=>{console.log("\u{1F7E2} User online:",t),this.updateMembersOnlineStatus()}),this.socketAdapter.onUserOffline$.pipe(p(this.destroy$)).subscribe(t=>{console.log("\u26AB User offline:",t),this.updateMembersOnlineStatus()}),this.socketAdapter.connect("user-123"),this.loadMembers(),this.channelVM.loadChannels(),this.channelVM.getActiveChannel().pipe(p(this.destroy$)).subscribe(t=>{t&&this.messageVM.loadMessages(t.id,!0)})}loadMembers(){this.slackApi.getUsers().pipe(p(this.destroy$)).subscribe({next:e=>{this.members=e,this.updateMembersOnlineStatus()},error:e=>{console.error("Failed to load members:",e)}})}updateMembersOnlineStatus(){!this.members||this.members.length===0||(this.members=this.members.map(e=>Re(ie({},e),{isOnline:this.socketAdapter.isUserOnline(Number(e.id))})))}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}toggleMembersSidebar(){this.isMembersSidebarOpen=!this.isMembersSidebarOpen}logout(){this.slackAuthService.logout()}ngOnDestroy(){this.socketAdapter.disconnect(),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(x(Z),x(ee),x(H),x(j),x(Q))};static \u0275cmp=S({type:i,selectors:[["app-slack-main"]],standalone:!1,features:[Qe([Z,ee])],decls:43,vars:35,consts:[[1,"slack-container"],[1,"slack-header"],["mat-icon-button","",3,"click"],[1,"header-actions"],["mat-icon-button","","matTooltip","\uB85C\uADF8\uC544\uC6C3",3,"click"],["mat-icon-button","","matTooltip","Toggle Members",3,"click"],[1,"connection-status"],[1,"slack-content"],[1,"slack-sidebar"],[3,"channelSelected","channelCreated","channels","activeChannel"],[1,"slack-main"],[3,"messageDeleted","reactionToggled","messages","isLoading","activeChannel"],[3,"messageSent","filesUploaded","fileRemoved","messageForm","uploadedFiles","isUploading","activeChannel"],[1,"slack-members-sidebar"],[1,"members-header"],["mat-icon-button","","matTooltip","Close",1,"close-btn",3,"click"],[1,"members-list"],["class","member-item",4,"ngFor","ngForOf"],[1,"member-item"],[1,"member-avatar"],[1,"member-info"],[1,"member-name"],[1,"member-status"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"header",1)(2,"button",2),d("click",function(){return n.toggleSidebar()}),o(3,"mat-icon"),s(4,"menu"),a()(),o(5,"h1"),s(6,"\uD611\uC5C5 \uCC57"),a(),o(7,"div",3)(8,"button",4),d("click",function(){return n.logout()}),o(9,"mat-icon"),s(10,"logout"),a()(),o(11,"button",5),d("click",function(){return n.toggleMembersSidebar()}),o(12,"mat-icon"),s(13),a()(),o(14,"span",6)(15,"mat-icon"),s(16),a(),s(17),a()()(),o(18,"div",7)(19,"aside",8)(20,"app-channel-list",9),A(21,"async"),A(22,"async"),d("channelSelected",function(c){return n.channelVM.selectChannel(c)})("channelCreated",function(c){return n.channelVM.createChannel(c.name,c.description,c.isPrivate,c.members)}),a()(),o(23,"main",10)(24,"app-message-list",11),A(25,"async"),A(26,"async"),A(27,"async"),d("messageDeleted",function(c){return n.messageVM.deleteMessage(c)})("reactionToggled",function(c){return n.messageVM.toggleReaction(c.messageId,c.emoji)}),a(),o(28,"app-message-input",12),A(29,"async"),A(30,"async"),A(31,"async"),d("messageSent",function(c){return n.messageVM.sendMessage(c)})("filesUploaded",function(c){return n.messageVM.uploadFiles(c.channelId,c.files)})("fileRemoved",function(c){return n.messageVM.removeUploadedFile(c)}),a()(),o(32,"aside",13)(33,"div",14)(34,"mat-icon"),s(35,"group"),a(),o(36,"h3"),s(37,"Loworld Members"),a(),o(38,"button",15),d("click",function(){return n.toggleMembersSidebar()}),o(39,"mat-icon"),s(40,"close"),a()()(),o(41,"div",16),me(42,Bn,8,6,"div",17),a()()()()),t&2&&(l(13),u(n.isMembersSidebarOpen?"people":"people_outline"),l(),F("connected",n.isConnected),l(2),u(n.isConnected?"wifi":"wifi_off"),l(),D(" ",n.isConnected?"Connected":"Disconnected"," "),l(2),F("open",n.isSidebarOpen),l(),C("channels",R(21,19,n.channelVM.getChannels()))("activeChannel",R(22,21,n.channelVM.getActiveChannel())),l(4),C("messages",R(25,23,n.messageVM.getMessages()))("isLoading",R(26,25,n.messageVM.getIsLoading()))("activeChannel",R(27,27,n.channelVM.getActiveChannel())),l(4),C("messageForm",n.messageVM.messageForm)("uploadedFiles",R(29,29,n.messageVM.getUploadedFiles()))("isUploading",R(30,31,n.messageVM.getIsFileUploading()))("activeChannel",R(31,33,n.channelVM.getActiveChannel())),l(4),F("closed",!n.isMembersSidebarOpen),l(10),C("ngForOf",n.members))},dependencies:[Je,L,O,B,ke,Oe,Pe,qe],styles:['.slack-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:var(--bg-secondary);transition:background-color .3s ease}.slack-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 20px;background:var(--slack-gradient);color:#fff;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:1000;transition:background .3s ease}.slack-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{color:#fff}.slack-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]:hover{background:#ffffff1a}.slack-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;letter-spacing:.5px}.slack-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;gap:12px}.slack-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.slack-header[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;padding:6px 12px;border-radius:20px;background-color:#ffffff26;font-weight:500}.slack-header[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]{background-color:#1987544d}.slack-header[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.slack-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.slack-sidebar[_ngcontent-%COMP%]{width:280px;background-color:var(--bg-primary);border-right:1px solid var(--border-color);display:flex;flex-direction:column;transition:transform .3s ease,background-color .3s ease,border-color .3s ease;overflow:hidden;box-shadow:2px 0 8px var(--shadow)}.slack-sidebar[_ngcontent-%COMP%]:not(.open){transform:translate(-100%)}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid var(--border-color);background:var(--slack-gradient);transition:background .3s ease,border-color .3s ease}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;color:#fff;letter-spacing:.3px}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px 0}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}@media (max-width: 768px){.slack-sidebar[_ngcontent-%COMP%]{position:absolute;left:0;top:52px;bottom:0;z-index:10;box-shadow:2px 0 8px #00000026}}.slack-main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:var(--bg-primary);overflow:hidden;transition:background-color .3s ease;position:relative}.slack-main[_ngcontent-%COMP%]   app-message-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}.slack-main[_ngcontent-%COMP%]   app-message-input[_ngcontent-%COMP%]{flex-shrink:0;position:sticky;bottom:0;z-index:10}.slack-members-sidebar[_ngcontent-%COMP%]{width:280px;background-color:var(--bg-primary);border-left:1px solid var(--border-color);display:flex;flex-direction:column;overflow:hidden;transition:transform .3s ease,width .3s ease,background-color .3s ease,border-color .3s ease;box-shadow:-2px 0 8px var(--shadow)}.slack-members-sidebar.closed[_ngcontent-%COMP%]{transform:translate(100%);width:0;border-left:none}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 20px;background:var(--slack-gradient);border-bottom:1px solid rgba(255,255,255,.2);position:sticky;top:0;z-index:1;transition:background .3s ease}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:22px;width:22px;height:22px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#fff;flex:1;letter-spacing:.3px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#fff;width:32px;height:32px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px 0}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:background-color .2s;border-bottom:1px solid var(--bg-tertiary)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;color:var(--slack-primary)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status[_ngcontent-%COMP%]{font-size:12px;font-weight:500;display:flex;align-items:center;gap:4px}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.online[_ngcontent-%COMP%]{color:#198754}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.offline[_ngcontent-%COMP%]{color:#868686}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status[_ngcontent-%COMP%]:before{content:"";width:8px;height:8px;border-radius:50%;display:inline-block}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.online[_ngcontent-%COMP%]:before{background-color:#198754;box-shadow:0 0 6px #19875480}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.offline[_ngcontent-%COMP%]:before{background-color:#868686}@media (max-width: 1024px){.slack-members-sidebar[_ngcontent-%COMP%]{display:none}}']})};function Hn(i,e){if(i&1&&(o(0,"div",16)(1,"mat-icon"),s(2,"error"),a(),o(3,"span"),s(4),a()()),i&2){let t=m();l(4),u(t.errorMessage)}}var we=class i{constructor(e,t,n){this.slackAuthService=e;this.router=t;this.route=n}username="";password="";errorMessage="";hidePassword=!0;returnUrl="/slack";ngOnInit(){if(this.slackAuthService.isAuthenticated()){this.router.navigate(["/slack"]);return}this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/slack"}onSubmit(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="\uC544\uC774\uB514\uC640 \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.slackAuthService.login(this.username,this.password)?(console.log("\uD611\uC5C5 \uCC57 \uB85C\uADF8\uC778 \uC131\uACF5"),this.router.navigate([this.returnUrl])):(this.errorMessage="\uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.password="")}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static \u0275fac=function(t){return new(t||i)(x(Q),x(q),x(ct))};static \u0275cmp=S({type:i,selectors:[["app-slack-login"]],standalone:!1,decls:33,vars:6,consts:[[1,"slack-login-container"],[1,"login-card"],[1,"login-header"],[1,"slack-logo"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","name","username","placeholder","admin","autocomplete","username","required","",3,"ngModelChange","ngModel"],["matPrefix",""],["matInput","","name","password","placeholder","\u2022\u2022\u2022\u2022","autocomplete","current-password","required","",3,"ngModelChange","type","ngModel"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"login-button"],[1,"hint-section"],[1,"hint-icon"],[1,"hint-text"],[1,"error-message"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),s(4,"forum"),a(),o(5,"h1"),s(6,"\uD611\uC5C5 \uCC57 \uB85C\uADF8\uC778"),a(),o(7,"p",4),s(8,"\uD611\uC5C5 \uCC57\uC5D0 \uB85C\uADF8\uC778\uD558\uC138\uC694"),a(),o(9,"form",5),d("ngSubmit",function(){return n.onSubmit()}),o(10,"mat-form-field",6)(11,"mat-label"),s(12,"\uC544\uC774\uB514"),a(),o(13,"input",7),re("ngModelChange",function(c){return ae(n.username,c)||(n.username=c),c}),a(),o(14,"mat-icon",8),s(15,"person"),a()(),o(16,"mat-form-field",6)(17,"mat-label"),s(18,"\uBE44\uBC00\uBC88\uD638"),a(),o(19,"input",9),re("ngModelChange",function(c){return ae(n.password,c)||(n.password=c),c}),a(),o(20,"mat-icon",8),s(21,"lock"),a(),o(22,"button",10),d("click",function(){return n.togglePasswordVisibility()}),o(23,"mat-icon"),s(24),a()()(),me(25,Hn,5,1,"div",11),o(26,"button",12),s(27," \uB85C\uADF8\uC778 "),a(),o(28,"div",13)(29,"mat-icon",14),s(30,"info"),a(),o(31,"p",15),s(32,"\uAE30\uBCF8 \uACC4\uC815: admin / 9920"),a()()()()()()),t&2&&(l(13),oe("ngModel",n.username),l(6),C("type",n.hidePassword?"password":"text"),oe("ngModel",n.password),l(3),Be("aria-label","\uBE44\uBC00\uBC88\uD638 "+(n.hidePassword?"\uD45C\uC2DC":"\uC228\uAE40")),l(2),u(n.hidePassword?"visibility_off":"visibility"),l(),C("ngIf",n.errorMessage))},dependencies:[We,Ce,G,W,he,at,fe,et,U,L,O,K,be,_e,ve,Y],styles:[".slack-login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,var(--slack-primary) 0%,var(--slack-primary-dark) 100%);padding:20px;transition:background .3s ease}.login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background:var(--bg-primary);border-radius:16px;box-shadow:0 10px 40px var(--shadow);overflow:hidden;transition:all .3s ease}.login-card[_ngcontent-%COMP%]:hover{box-shadow:0 15px 50px var(--slack-shadow);transform:translateY(-2px)}.login-header[_ngcontent-%COMP%]{background:var(--slack-gradient);padding:40px 32px;text-align:center;color:#fff}.login-header[_ngcontent-%COMP%]   .slack-logo[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px;margin-bottom:16px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:700;letter-spacing:.5px}.login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.95;font-weight:500}.login-form[_ngcontent-%COMP%]{padding:32px}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:var(--bg-secondary);transition:background-color .3s ease}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__leading, .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__notch, .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__trailing{border-color:var(--slack-primary)!important;border-width:2px}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-error .mdc-notched-outline__leading, .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-error .mdc-notched-outline__notch, .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-error .mdc-notched-outline__trailing{border-color:var(--danger)!important}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     input{color:var(--text-primary)}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix, .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-suffix{color:var(--text-muted)}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;margin-bottom:20px;background-color:#ef44441a;border:1px solid var(--danger);border-radius:8px;color:var(--danger);font-size:14px;animation:_ngcontent-%COMP%_shake .5s}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:600;letter-spacing:.5px;background:var(--slack-gradient)!important;color:#fff!important;transition:all .3s ease}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--slack-gradient-hover)!important;box-shadow:0 6px 20px var(--slack-shadow);transform:translateY(-2px)}.login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.hint-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:24px;padding:16px;background-color:var(--slack-primary-light);border-radius:8px;border:1px solid var(--slack-primary)}.hint-section[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--slack-primary)}.hint-section[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:var(--text-primary);font-weight:500}@media (max-width: 480px){.slack-login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-header[_ngcontent-%COMP%]{padding:32px 24px}.login-header[_ngcontent-%COMP%]   .slack-logo[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.login-form[_ngcontent-%COMP%]{padding:24px}}"]})};var $e=class i{constructor(e,t){this.slackAuthService=e;this.router=t}canActivate(e,t){return this.slackAuthService.isAuthenticated()?!0:(console.log("\uD611\uC5C5 \uCC57 \uC778\uC99D \uD544\uC694 - \uB85C\uADF8\uC778 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9"),this.router.createUrlTree(["/slack/login"],{queryParams:{returnUrl:t.url}}))}static \u0275fac=function(t){return new(t||i)(M(Q),M(q))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qn=[{path:"login",component:we},{path:"",component:ye,canActivate:[$e]}],Ie=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=de({type:i});static \u0275inj=le({imports:[De.forChild(Qn),De]})};var Nt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=de({type:i});static \u0275inj=le({imports:[Ye,st,lt,Ze,Ct,Ot,_t,Mt,Tt,$t,It,ft,Et,St,xt,Ie]})};export{Nt as SlackModule};
